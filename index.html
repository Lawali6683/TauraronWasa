<!DOCTYPE html>
<html lang="ha">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TauraronWasa </title>
  <meta property="og:description" content="TauraronWasa shine gidan nisha…ói da wasanni na zamani! Ku kalli wasannin kwallon kafa kai tsaye, ku saurari rediyo da bidiyo, ku karanta labarai da hira da ‚Äôyan wasa, ku yi sharhi da comments, ku bibiye tarihin wasanni, har ma ku shiga kasuwar saye da sayarwa na ‚Äôyan wasa. Duk abin nisha…ói da wasan ku, akwai a TauraronWasa!" />
<meta property="og:image" content="https://i.imgur.com/CgvdgMA.png" />
<meta property="og:image:secure_url" content="https://i.imgur.com/CgvdgMA.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://tauraronwasa.pages.dev/" />
<meta property="og:image:alt" content="TauraronWasa Labaran Wasanni" />
<link rel="icon" type="image/png" href="https://i.imgur.com/CgvdgMA.png" />
<link rel="manifest" href="/manifest.json">
   
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
          .loading-backdrop {
            position: fixed;
            z-index: 9000;
            inset: 0;
          background: linear-gradient(to bottom, #180022, #300040);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s, visibility 0.3s;
            text-align: center;
            padding: 1em;
        }
        
        .loading-backdrop.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .lds-roller {
            display: inline-block;
            position: relative;
            width: 72px;
            height: 72px;
        }
        .lds-roller div {
            animation: lds-roller 1.2s cubic-bezier(0.6, 0, 0.6, 1) infinite;
            transform-origin: 36px 36px;
        }
        .lds-roller div:after {
            content: " ";
            display: block;
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent);
            margin: -4px 0 0 -4px;
        }
        .lds-roller div:nth-child(1) { animation-delay: -0.036s; top: 63px; left: 63px; }
        .lds-roller div:nth-child(2) { animation-delay: -0.072s; top: 68px; left: 56px; }
        .lds-roller div:nth-child(3) { animation-delay: -0.108s; top: 71px; left: 48px; }
        .lds-roller div:nth-child(4) { animation-delay: -0.144s; top: 72px; left: 39px; }
        .lds-roller div:nth-child(5) { animation-delay: -0.18s; top: 71px; left: 31px; }
        .lds-roller div:nth-child(6) { animation-delay: -0.216s; top: 68px; left: 24px; }
        .lds-roller div:nth-child(7) { animation-delay: -0.252s; top: 63px; left: 17px; }
        .lds-roller div:nth-child(8) { animation-delay: -0.288s; top: 56px; left: 12px; }
        @keyframes lds-roller {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
        }
       
       
        body {
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(to bottom, #180022, #300040);
    background-repeat: no-repeat;
    background-attachment: fixed; 
    background-size: cover;
    color: #ffffff;    
    transition: background 0.6s, color 0.6s;
}

body.bg-1 {
    background: linear-gradient(to bottom, #180022, #300040);
    background-attachment: fixed;
    color: #ffffff;
}

body.bg-2 {
    background: linear-gradient(to bottom right, #ffffff, #f0f0f0);
    background-attachment: fixed;
    color: #222222;
}

body.bg-3 {
    background: #0e0e0e;
    background-attachment: fixed;
    color: #f4f4f4;
}

header#site1-header {
    width: 100%;
 background: #00110338;
    padding: 0.6rem 1.2rem 0.6rem 0.6rem;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    z-index: 10;
}
.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    
}

.logo {
    height: 44px;
    width: auto;
}
.header-icons {
    display: flex;
    gap: 7px;
    
    
}
 
.header-btn {
    background: rgba(255,255,255,0.06);   
    padding: 0.rem 0.1rem;
    border-radius: 50%;    
    font-size: 1.7rem;    
    cursor: pointer;
    transition: background 0.2s, box-shadow 0.2s, color 0.2s;  
    box-shadow: 0 2px 8px 0 rgba(0,0,0,0.04);
    position: relative;
}
.header-btn:hover, .header-btn:focus {
    background: rgba(255,255,255,0.14);
    color: #ffcb05;
    outline: none;
    
}
#user-btn.active {
    background: #ffcb05;    
    color: #222;
     border: 1px solid #ff2b5f;
}

#register-notification {
    position: fixed;
    top: 80px;
    right: 10px;
    background: rgba(40, 40, 60, 0.98);
    border-radius: 12px;
    box-shadow: 0 8px 32px 0 rgba(0,0,0,0.19);
    padding: 12px;
    z-index: 1002;
    width: min(94vw, 320px);
    max-width: 320px;
    min-width: 220px;
    display: none;
    animation: fadeInNotif 0.4s;
}
#register-notification.show {
    display: block;
}

.register-container {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 0.7rem;
}
.register-actions {
    display: flex;
    justify-content: space-between;
    gap: 1rem;
    margin-top: 0.5rem;
}
.register-link, .login-link {
    padding: 0.5rem 1.2rem;
    border-radius: 24px;
    background: #ffcb05;
    color: #222;
    text-decoration: none;
    font-weight: 600;
    box-shadow: 0 3px 14px 0 rgba(255,203,5,0.08);
    transition: background 0.2s, color 0.2s;
    border: none;
}
.register-link:hover, .login-link:hover {
    background: #fcd800;
    color: #180022;
}
.close-btn {
    background: none;
    border: none;
    color: #ffcb05;
    font-size: 1.5em;
    position: absolute;
    top: 12px;
    right: 12px;
    cursor: pointer;
}
@keyframes fadeInNotif {
    from { opacity: 0; transform: translateY(-20px);}
    to { opacity: 1; transform: translateY(0);}
}

/* ‚è≥‚úîÔ∏èSite 1 CSS ya kare daga nan */


/* üö¶‚úîÔ∏èSite 2 CSS ya fara daga nan */

.site2-menu {
    display: flex;
    justify-content: space-between;
    width: 100%;
    max-width: 700px;
    gap: 16px;
}

.site2-menu-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    gap: 6px;
    padding: 8px;
    border-radius: 14px;
    transition: all 0.2s ease-in-out;
}

.site2-menu-item:hover {
    background: rgba(255, 203, 5, 0.1);
    filter: brightness(1.2);
    transform: translateY(-2px);
}

.menu-img {
    width: 52px;
    height: 52px;
    border-radius: 14px;
    object-fit: cover;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

.site2-menu-item span {
    font-size: 14px;
    font-weight: bold;
    text-align: center;
    color: inherit;
}


.site2-view-anim {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(255,255,255,0.07);
    border-radius: 14px;
    padding: 10px 16px;
    min-width: 100px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.site2-view-anim:hover {
    transform: scale(1.05);
}

.site2-view-anim i {
    font-size: 2.1rem;
    color: #ffcb05;
    margin-bottom: 6px;
}


.site2-viewcount-text {
    font-size: 13px;
    color: #aaf;
    margin-top: 2px;
}
/* ‚è≥‚úîÔ∏èSite 2 CSS ya kare daga nan */


/* üö¶‚úîÔ∏èSite 3 CSS ya fara daga nan */
#site3-leagues {
    width: 100%;
    padding: 0.2rem 0.1rem 1.4rem 0.2rem;
    box-sizing: border-box;
    overflow-x: auto;
}
.leagues-scroller {
    display: flex;
    gap: 2.1rem;
    
    overflow-x: auto;
    padding-bottom: 1.2rem;
    scroll-snap-type: x mandatory;
}
.league-card {
    min-width: 92px;
    max-width: 110px;
    display: flex;
    flex-direction: column;
    align-items: center;
    
    background: #ffcb05;
    box-shadow: 0 1px 8px rgba(0,0,0,0.06);
    cursor: pointer;
    padding: 0.6rem 0.5rem 0.7rem 0.5rem;
    transition: box-shadow 0.16s, background 0.16s, color 0.14s;
    scroll-snap-align: start;
    border: 2px solid #fff2;
    
    background: rgba(255,255,255,0.08);
    border-radius: 16px;
    padding: 8px 10px;
}
.league-card img {
    width: 50px;
    height: 50px;
    
    border-radius: 8px;
    object-fit: cover;
    margin-bottom: 0.5rem;       
    
}
.league-card span {
    font-size: 0.92rem;
    font-weight: 600;
    text-align: center;
    color: inherit;
}
.league-card:hover, .league-card:focus {
    
    color: #222;
    border-color: #ffcb05;
    
}
/* ‚è≥‚úîÔ∏èSite 3 CSS ya kare daga nan */



/* siteüö¶‚úîÔ∏è 4 ya fara daga nan */
#site4-sarki {
    width: 100%;
    margin: 0 auto 1.5rem auto;
    box-sizing: border-box;
    position: relative;
    padding: 0;
}


.sarki-tab-container {
    position: relative;
    width: 100%;
    max-width: 650px;
    margin: 0 auto;
    height: 0px;
    z-index: 10;
}

.sarki-tab-title {
    position: absolute;
    top: -40px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 32px 12px 32px;
    font-weight: 700;
    font-size: clamp(1rem, 2vw, 1rem);
    color: #fff;
    background: linear-gradient(135deg, #ff512f 0%, #dd2476 100%);
    border-radius: 0 0 18px 18px;
    white-space: nowrap;
    letter-spacing: 0.01em;
    box-shadow: 0 7px 18px 0 #18002233;
    clip-path: polygon(0 0, 100% 0, 90% 100%, 10% 100%);
    z-index: 10;
    line-height: 1.0;
    min-width: 230px;
    text-align: center;
    border-bottom: 2px solid #fff5;
}

.sarki-tab-title .sarki-tab-name {
    display: inline-block;
    max-width: 340px;
    white-space: pre;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: inherit;
    vertical-align: middle;
}

@media (max-width: 700px) {
    .sarki-tab-title {
        font-size: 0.95rem;
        min-width: 160px;
        padding: 10px 16px;
    }
    .sarki-tab-title .sarki-tab-name {
        max-width: 160px;
    }
}


.sarki-container {
    position: relative;
    width: 100%;
    min-height: 250px;
    max-width: 650px;
    margin: 0 auto 1.2rem auto;
    border-radius: 0px;
    overflow: hidden;
    box-shadow: 0 6px 32px 0 rgba(18, 0, 40, 0.20);
    background: #222;
    display: flex;
    align-items: stretch;
    z-index: 2;
    transition: box-shadow 0.23s;
    margin-top: 35px;
}


.sarki-bg,
.sarki-bg-fallback {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    left: 0;
    top: 0;
    z-index: 1;
    filter: brightness(0.80) contrast(1.08);
    transition: filter 0.23s;
}

.sarki-bg-fallback {
    background: linear-gradient(135deg, #180022 0%, #300040 66%, #fff 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.5rem;
    color: #fff;
}


.sarki-overlay {    
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 2;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 1.1rem 1.3rem 1rem 1.3rem;
    background: linear-gradient(180deg, rgba(40, 5, 60, 0.63) 0%, rgba(20, 10, 3, 0.10) 70%, rgba(20, 20, 20, 0.07) 100%);
}

.sarki-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: .4rem;
    width: 100%;
    
}

.sarki-info {
    flex: 1 1 0;
    min-width: 0;
}

.sarki-fullname {
    font-size: clamp(1.1rem, 2.9vw, 2.5rem);
    font-weight: 900;
    line-height: 1.1;
    color: #fff;
    text-shadow: 2px 5px 15px #180022cc;
    margin-bottom: 0.11em;
    word-break: break-all;
}

.sarki-fullname.auto-scale {
    font-size: clamp(1rem, 2vw, 1.4rem);
}

.sarki-congrats {
    font-size: clamp(0.89rem, 1.4vw, 1rem);
    margin-bottom: 0.12em;
    color: #f7f7f7;
    text-shadow: 1px 1px 7px #180022;
    font-weight: 500;
}

.sarki-score-row {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    font-size: clamp(0.9rem, 1.2vw, 1rem);
    font-weight: 600;
    color: #fff;
    margin-bottom: 0.15em;
    text-shadow: 1px 1px 6px #180022bb;
    justify-content: flex-start;
    
}

.sarki-score-logo {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #fff;
    object-fit: cover;
   
    border: 1px solid #fff;
    margin-inline: 0.10em;
}

.sarki-score-team {
    font-weight: 700;
    font-size: clamp(0.8rem, 1.2vw, 10px;);
  line-height: 1.0;
    margin: 0 0.1em;
    color: #ffcb05;
    white-space: nowrap;
    text-shadow: 0 2px 8px #180022bb;
}


.sarki-comment {
    background: rgba(255, 255, 255, 0.12);
    padding: 0.6rem;
    border-radius: 12px;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

.sarki-comment .comment-text {
    font-size: 0.8rem;
    line-height: 1.1;
    color: #fff;
    margin: 0;
}

.sarki-comment .read-more-btn {
    color: #ffcb05;
    cursor: pointer;
    font-weight: bold;
    font-size: 0.75rem;
    margin-top: 0.3em;
    display: inline-block;
}


.sarki-audio-row {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    background: rgba(255, 255, 255, 0.18);
    border-radius: 16px;
    padding: 0.5em 0.7em;
    margin-bottom: 0.15em;
}

.sarki-audio-player {
    flex: 1 1 0;
    min-width: 0;
    width: 120px;
    accent-color: #ffcb05;
    height: 2.1em;
}

.sarki-audio-profile,
.sarki-audio-clublogo {
    width: 30px;
    height: 30px;
    object-fit: cover;
    border-radius: 50%;
    border: 2px solid #fff;
    background: #fff;
}

.sarki-time {
    font-size: clamp(0.8rem, 1vw, 0.9rem);    
    margin-top: 0.28em;
    color: #ffe;
    text-shadow: 1px 1px 4px #18002299;
}

.sarki-profile {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0rem;
    margin-left: 0; 
    position: relative;
    flex-shrink: 0;
    
}

.sarki-profile-img {
    width: 100px;  
    height: 100px;
    border-radius: 20%;
    border: 5px solid #ffcb05;
    object-fit: cover;
    margin-bottom: 0.2rem;
    background: #fff;
    box-shadow: 0 6px 22px 0 #ffcb0552, 0 0 0 5px #fff;
    transition: box-shadow 0.23s, border-color 0.23s;
    cursor: pointer;
    z-index: 30;
}

.sarki-profile-img:active {
    box-shadow: 0 0 0 7px #ffcb05bb;
}

.sarki-club-img {
    position: absolute;
    width: 50px;  
    height: 50px;
    border-radius: 50%;
    border: 2.6px solid #fff;
    top: -5px;    
    right: 0px;    
    background: #fff;
    object-fit: cover;
    box-shadow: 0 2px 9px 0 #ffcb050a;
    z-index: 31;
}

.sarki-user-info {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 0.4em;
    background: rgba(0, 0, 0, 0.4);    
    padding: 0.3em 0.5em;
    border-radius: 20px;
}

.sarki-user-profile-logo {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    margin-right: 0em;
    object-fit: cover;
}

.sarki-username {
    font-size: 0.8rem;
    font-weight: 500;
    color: #fff;
    white-space: nowrap;
}


.sarki-bottom {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 1.2rem;
}

.sarki-love-btn {
    background: rgba(255, 255, 255, 0.11);
    border: none;
    border-radius: 50%;
    padding: 0.6rem 1.0rem;
    font-size: 2.1rem;
    color: #ffcb05;
    cursor: pointer;
    transition: background 0.23s, transform 0.18s;
    animation: heartBeat 2.3s infinite;
    box-shadow: 0 2px 9px 0 #ffcb0512;
    position: relative;
    outline: none;
}

.sarki-love-btn:active,
.sarki-love-btn:focus,
.sarki-love-btn.loved,
.sarki-love-btn.loved:hover {
    background: green;
    color: red;
    transform: scale(1.18);
    animation: none;
}

.sarki-love-btn.loved::after {
    content: '‚úîÔ∏è';
    position: absolute;
    top: -0px;
    left: 60%;
    transform: translateX(-50%);
    font-size: 1.1rem;
    color: #23c24b;
    background: none;
    border-radius: 50%;
    padding: 1px 8px;
    pointer-events: none;
}

@keyframes heartBeat {
    0%,
    100% {
        transform: scale(1);
    }
    60% {
        transform: scale(1.16);
    }
}

.sarki-love-count {
    font-size: 1.35rem;
    font-weight: 700;
    margin-left: 0.48rem;
    color: #ffcb05;
    text-shadow: 1px 1px 6px #18002299;
    letter-spacing: 0.02em;
}

@media (max-width: 700px) {
    .sarki-container {
        max-width: 99vw;
        border-radius: 13px;
    }
    .sarki-profile-img {
        width: 90px;
        height: 90px;
    }
    .sarki-club-img {
        width: 28px;
        height: 28px;
        top: 0;
        right: 0;
    }
    .sarki-overlay {
        padding: 0.7rem 0.6rem 0.7rem 1rem;
    }
    .sarki-user-info {
        display: none;
       
    }
}


.sarki-modal {
    display: none;
    position: fixed;
    z-index: 99999;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(18, 0, 40, 0.14);
    justify-content: center;
    align-items: center;
    flex-direction: column;
    transition: background 0.21s;
}

.sarki-modal.show {
    display: flex;
}

.sarki-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(18, 0, 40, 0.25);
    z-index: 1;
}

.sarki-modal-content {
    position: relative;
    z-index: 2;
    background: #fff;
    border-radius: 21px;
    box-shadow: 0 12px 44px 0 #18002277;
    padding: 1.2rem 1.3rem 1.1rem 1.3rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 260px;
    min-height: 170px;
    max-width: 98vw;
    max-height: 95vh;
}

.sarki-modal-img-wrapper {
    position: relative;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

.sarki-modal-profile-img {
    width: 250px;
    height: 250px;
    border-radius: 16px;
    object-fit: cover;
    background: #eee;
    box-shadow: 0 8px 44px 0 #ffcb0552;
    border: 5px solid #ffcb05;
    max-width: 84vw;
    max-height: 72vh;
}

.sarki-modal-club-img {
    position: absolute;
    left: 60%;
    top: 10px;
    transform: translateX(-50%);
    width: 82px;
    height: 82px;
    border-radius: 50%;
    border: 3.5px solid #fff;
    background: #fff;
    object-fit: cover;
    box-shadow: 0 2px 9px 0 #ffcb050a;
}
.sarki-modal-usernam2{
    font-size: 1.2rem;
    font-weight: bold;
    color: #444;
    
}
.sarki-modal-username {
    font-size: 1rem;
    font-weight: bold;
    color: #444;
    margin-top: 0.8rem;
    text-align: center;
}

.sarki-modal-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(255, 255, 255, 0.93);
    border: none;
    font-size: 2rem;
    color: #c00;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 6px #18002233;
    z-index: 3;
    transition: background 0.18s;
}

.sarki-modal-close:active {
    background: #ffd8d8;
}

@media (max-width: 600px) {
    .sarki-modal-profile-img {
        width: 94vw;
        height: 94vw;
        max-width: 98vw;
        max-height: 90vh;
    }
    .sarki-modal-club-img {
        width: 36px;
        height: 36px;
        top: 7px;
    }
    .sarki-modal-content {
        padding: 0.6rem 0.5rem 0.6rem 0.5rem;
    }
}

.sarkiIm{
    width: 250px;
    height: 250px;
}

/* siteüö¶‚úîÔ∏è 4 ya kare daga nan */


/* üö¶‚úîÔ∏èSite 5 CSS ya fara daga nan */

#site5-kaitsayepost {
    width: 100%;
    max-width: 800px;
    margin: 0 auto 0.4rem auto;
    min-height: 170px;
    box-sizing: border-box;
    font-family: 'Segoe UI', Arial, sans-serif;
}

.kaitsaye-post-container {
    width: 97%;
    margin-bottom: 2rem;
    padding: 0;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    border-top: 4px solid;
    border-bottom: 4px solid;
    border-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1;
    border-radius: 0px;
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
}

@keyframes site5-fadein {
    from {
        opacity: 0;
        transform: scale(0.97);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.kaitsaye-post-container:hover {
    box-shadow: 0 8px 60px 0 #18002277, 0 1.5px 14px #4a00e041;
    transform: translateY(-4px) scale(1.005);
}

.kaitsaye-top-bar {
    background: linear-gradient(to right, #8e2de2, #4a00e0);
    border: 2.2px solid #6f42c1;
    border-radius: 15px 15px 0 0;
    box-shadow: inset 0 -3px 8px rgba(0, 0, 0, 0.36);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    padding: 0.48rem 0.9rem 0.42rem 0.9rem;
    position: relative;
    min-height: 52px;
    z-index: 2;
}

.kaitsaye-top-bar-logo {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    background: #fff;
    object-fit: contain;
    border: 2.5px solid #ffcb05;
    margin-right: 0.7rem;
    box-shadow: 0 1px 8px #ffcb0570;
    transition: box-shadow 0.16s;
}

.kaitsaye-top-bar-logo:hover {
    box-shadow: 0 2px 16px #fde000c6;
}

.kaitsaye-top-title {
    font-size: 1.22rem;
    font-weight: 700;
    color: #fff;
    letter-spacing: 0.7px;
    text-shadow: 0 1px 5px #30004099;
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.kaitsaye-top-title i {

    color: #ffcb05;
    font-size: 1.22rem;
    animation: site5-bounce 1.7s infinite;
}

@keyframes site5-bounce {
    0%,
    100% {
        transform: translateY(0);
    }
    14% {
        transform: translateY(-3px);
    }
    28% {
        transform: translateY(1px);
    }
    70% {
        transform: translateY(-2px);
    }
}

.kaitsaye-top-bar-time {
    margin-left: auto;
    font-size: 13px;
    color: #fde000;
    font-weight: 600;
    opacity: 0.87;
    display: flex;
    align-items: center;
    gap: 0.1rem;
}

.kaitsaye-content {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 0;
    margin: 0;
    z-index: 1;
    background-color: #1a1a1a;
    
}

.kaitsaye-post-text {
    font-size: clamp(15px, 1.12vw, 22px);
    font-weight: 600;
    color: inherit;
   
    line-height: 1.27;
    max-width: 100%;
    overflow: hidden;
    word-break: break-word;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 5px;
    margin-bottom: 0;
    text-shadow: 0 2px 9px #180022c0;
    transition: font-size 0.22s;
    letter-spacing: 0.03em;
    background: linear-gradient(90deg, #ffcb05 60%, #fffbe2 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-align: center;
}

.kaitsaye-post-media-box {
    width: 100%;
    background: transparent;
    border-radius: 0;
    margin-top: 0; 
    margin-bottom: 0;
    position: relative;
    box-shadow: none;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    min-height: auto;
}


.kaitsaye-audio-player-with-image {
    position: relative;
    width: 100%;
    padding-top: 56.25%; 
    height: 0;
    overflow: hidden;
    border-radius: 0;
}

.kaitsaye-media-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    filter: brightness(0.7);
    transition: filter 0.3s;
}

.kaitsaye-media-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    z-index: 10;
    display: flex;
    justify-content: center;
    align-items: flex-end; 
    padding: 10px;
    box-sizing: border-box;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0)); 
}


.kaitsaye-audio-player-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(255, 255, 255, 0.15);
    padding: 10px 15px;
    border-radius: 12px;
    backdrop-filter: blur(5px);
    width: 90%;
    max-width: 400px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.kaitsaye-audio-player-controls .audio-play-btn {
    background: linear-gradient(to right, #ffcb05, #fd6d00);
    color: #222;
    border-radius: 50%;
    border: none;
    width: 45px;
    height: 45px;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease-out;
}

.kaitsaye-audio-player-controls .audio-play-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
}

.kaitsaye-audio-player-controls .audio-progress-container {
    flex-grow: 1;
    height: 8px;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 5px;
    position: relative;
    cursor: pointer;
}

.kaitsaye-audio-player-controls .audio-progress-bar {
    width: 0;
    height: 100%;
    background: #ffcb05;
    border-radius: 5px;
}

.kaitsaye-audio-player-controls .audio-seek-slider {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    -webkit-appearance: none;
    background: transparent;
    cursor: pointer;
    z-index: 2;
}

.kaitsaye-audio-player-controls .audio-seek-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 15px;
    height: 15px;
    background: #fff;
    border: 2px solid #ffcb05;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
}

.kaitsaye-audio-player-controls .audio-time {
    font-size: 0.9rem;
    color: #fff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}


.kaitsaye-audio-player-box {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px;
    box-sizing: border-box;
    z-index: 9999;
    background: linear-gradient(115deg, #ffcb05 60%, #8e2de2 100%);
    border-radius: 12px;
    margin-top: 15px;
    margin-bottom: 0;
    flex-direction: row;
    align-items: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.kaitsaye-audio-player-box .kaitsaye-audio-player-controls {
    background: none;
    backdrop-filter: none;
    box-shadow: none;
    padding: 0;
    width: 100%;
    max-width: none;
}

.kaitsaye-audio-player-box .audio-play-btn {
    background: #fff;
    color: #8e2de2;
    box-shadow: 0 2px 10px rgba(142, 45, 226, 0.3);
}

.kaitsaye-audio-player-box .audio-play-btn:hover {
    background: #8e2de2;
    color: #fff;
}


.rediyo-kai-tsaye-player {
    position: relative;
    width: 100%;
    height: 0;
    padding-top: 56.25%;
    overflow: hidden;
    border-radius: 0;
    margin-top: 0;
    margin-bottom: 0;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.rediyo-kai-tsaye-player img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    filter: brightness(0.6);
    z-index: 0;
}

.rediyo-kai-tsaye-player .center-overlay {
text-align: center;         
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    background: rgba(0, 0, 0, 0.3);
    padding: 0px;
    border-radius: 15px;
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.rediyo-kai-tsaye-player .rediyo-kai-tsaye-button {
    background: linear-gradient(to right, #ffcb05, #fd6d00);
    color: #222;
    border-radius: 50%;
    border: none;
    width: 60px;
    height: 60px;
    font-size: 2.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease-out;
    
}

.rediyo-kai-tsaye-player .rediyo-kai-tsaye-button:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
}

.rediyo-kai-tsaye-player .rediyo-kai-tsaye-title {
    color: #fff;
    font-size: 1.4rem;
    font-weight: 700;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    text-align: center;
}


.kaitsaye-actions-bar {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-evenly;
    gap: 0px;
    border-radius: 0 0 15px 15px;
    background: linear-gradient(to right, #4a00e0, #8e2de2);
    padding: 0.3rem 0;
    box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.36);
    margin-top: 0;
    border-top: none;
    padding-top: 0;
}

.kaitsaye-action-btn {
    display: flex;
    align-items: center;
    gap: 0.37rem;
    font-size: 1.14rem;
    color: #ffcb05;
    font-weight: 700;
    background: none;
    border: none;
    outline: none;
    cursor: pointer;
    transition: color 0.16s, transform 0.13s, background 0.14s;
    position: relative;
    padding: 0.12rem 0.5rem;
    border-radius: 10px;
}

.kaitsaye-action-btn i {
    font-size: 1.22rem;
    margin-right: 0.24rem;
    text-shadow: 0 1px 6px #fff2;
}

.kaitsaye-action-btn:hover,
.kaitsaye-action-btn.active {
    color: #46eb8d;
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
}

.kaitsaye-action-btn.download:hover {
    color: #fd6d00;
    background: rgba(253, 109, 0, 0.15);
}

.kaitsaye-action-btn.share:hover {
    color: #4a00e0;
    background: rgba(74, 0, 224, 0.15);
}

.kaitsaye-action-btn.love.active {
    color: #fd6d00;
    background: rgba(253, 109, 0, 0.15);
}

@keyframes love-pop {
    0% {
        transform: scale(1.6);
    }
    60% {
        transform: scale(0.9);
    }
    100% {
        transform: scale(1.12);
    }
}

.kaitsaye-action-badge {
    background: #fde000;
    color: #222;
    border-radius: 14px;
    font-size: 0.95rem;
    font-weight: 700;
    padding: 0.17rem 0.30rem;
    margin-left: 0.1rem;
    min-width: 28px;
    text-align: center;
    display: inline-block;
    box-shadow: 0 1px 5px #ffcb0542;
}

.kaitsaye-post-container .fa-spinner {
    color: inherit;
    font-size: 2.4rem;
    margin-bottom: 0.6rem;
    animation: site5-spin 1.4s linear infinite;
}

@keyframes site5-spin {
    0% {
        transform: rotate(0);
    }
    100% {
        transform: rotate(360deg);
    }
}


.site5-push-container {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(to right, #4a00e0, #8e2de2);
    color: #fff;
    padding: 12px 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.1rem;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
}

.site5-push-container.show {
    opacity: 1;
    visibility: visible;
}

.site5-push-container i {
    font-size: 1.3em;
}

.kaitsaye-loading {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 200px;
    color: inherit;
}


.site5-kaitsaye-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}


.video-fullscreen-btn {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    border: none;
    border-radius: 5px;
    padding: 8px 12px;
    font-size: 16px;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 5px;
    transition: background-color 0.3s ease;
}

.video-fullscreen-btn:hover {
    background: rgba(0, 0, 0, 0.8);
}


.kaitsaye-video-fullscreen-viewer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: black;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.kaitsaye-video-fullscreen-viewer.active {
    opacity: 1;
    visibility: visible;
}

.kaitsaye-fullscreen-video-frame {
    width: 100%;
    height: 100%;
}


.kaitsaye-video-fullscreen-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    transition: background-color 0.3s ease;
}

.kaitsaye-video-fullscreen-close-btn:hover {
    background: rgba(255, 255, 255, 0.4);
}


.kaitsaye-post-media-box img,
.kaitsaye-post-media-box video,
.kaitsaye-post-media-box iframe {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    background: transparent;
    display: block;
    margin: 0 auto;
    border-radius: 0;
}

.kaitsaye-video-container {
    position: relative;
    width: 100%;
    padding-top: 56.25%;
    height: 0;
    overflow: hidden;
    border-radius: 0;
}

.kaitsaye-video-container .video-play-btn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 2.5rem;
    opacity: 1;
    z-index: 5;
    background: rgba(0, 0, 0, 0.6);
    border-radius: 50%;
    width: 80px;
    height: 80px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: background 0.3s ease;
}

.kaitsaye-video-container .video-play-btn:hover {
    background: rgba(0, 0, 0, 0.8);
}

/* ‚úçÔ∏èüëΩSite5 CSS ya kare daga nan */



/* üö¶‚úîÔ∏èSite 6 CSS ya fara daga nan */
:root {
    --accent: #16e7cf;
    --fg: #fff;
    --bg-card: rgba(255, 255, 255, 0.08);
    --live-color: #ff4d4d;
    --finished-color: #43a047;
}


#site6-wasanninyau {
    width: 100%;
    max-width: 900px;
    margin: 0 auto 0rem auto;
    box-sizing: border-box;
    position: relative;
    padding: 0 7px;
    
   
}

#site6-navbar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    padding: 0rem 0; 
    margin: 0 auto 2rem auto;
    max-width: 900px;
    
      border-top: 1px solid;
    border-bottom: 1px solid;
    border-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1;
    border-radius: 0px;
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
    
}

.site6-nav-btn {
    background: blue;
    Border-radius: 20%;
    border: 1px solid #3cff2b;
    cursor: pointer;
    color: var(--accent);
    font-size: 1rem;
    transition: color 0.2s, transform 0.2s;
    padding: 0.5rem;
}
.site6-nav-btn{
     color: inherit;
    transform: scale(1.1);
}
.site6-nav-btn:hover {
    color: var(--fg);
    transform: scale(1.1);
}

.site6-nav-date {
    font-size: 1rem;
    font-weight: 700;
      color: inherit;
    white-space: nowrap;
}


.wasanni-scroller-wrapper {
    position: relative;
    overflow: hidden;
    padding: 0 0.5rem;
}

.wasanni-scroll-btn {
    background: var(--bg-card);
    border: 1px solid rgba(255, 255, 255, 0.18);
    border-radius: 50%;
    width: 35px;
    height: 35px;
    min-width: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--fg);
    cursor: pointer;
    font-size: 1.1rem;
    z-index: 10;
    transition: all 0.2s;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
}

.wasanni-scroll-btn:hover {
    background: var(--accent);
    color: #222;
}

.wasanni-scroll-left {
    left: 0;
}

.wasanni-scroll-right {
    right: 0;
}


.wasanni-scroller {
    display: flex;
    gap: 1.2rem;
    padding: 0 0.3rem;
    scroll-snap-type: x mandatory;
    overflow-x: scroll;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    width: 100%;
    box-sizing: border-box;
}

.wasanni-scroller::-webkit-scrollbar {
    display: none;
}


.wasanni-card-chunk {
   height: 100%;
    flex: 0 0 100%; 
    display: flex;
    flex-direction: column; 
    gap: 1.5rem; 
    scroll-snap-align: center;
}

.wasanni-card {    
    border-radius: var(--card-radius);
        border: 1px solid #00ffcc;
        
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;        
        
    width: 100%;    
    background: var(--bg-card);
    backdrop-filter: blur(10px);
    
    border-radius: 15px;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
                            
}

.wasanni-card:hover {
    transform: translateY(-3px) scale(1.01);
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.5);
    background: var(--accent); 
    color: #222;
}

.wasanni-card.site6-live {
    background: rgba(255, 128, 0, 0.6);
    border-color: #ff8000;
    color: var(--fg);
    animation: pulse 2s infinite; 
}

@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(255, 128, 0, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(255, 128, 0, 0); }
    100% { box-shadow: 0 0 0 0 rgba(255, 128, 0, 0); }
}


.wasanni-card.site6-finished {
    background: rgba(67, 160, 71, 0.4);
    border-color: var(--finished-color);
    color: var(--fg);
}

.wasanni-card.site6-live:hover, .wasanni-card.site6-finished:hover {
    background: var(--accent); 
    animation: none;
}

.wasanni-teams {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.7rem;
}

.wasanni-team {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    text-align: center;
    flex: 1;
}

.wasanni-team-logo {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    background: rgba(255, 255, 255, 0.3);
    border: 2px solid var(--fg);
}

.wasanni-team-name {
    font-size: 0.9rem;
    font-weight: 700;
    white-space: normal;
    line-height: 1.2;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    max-height: 2.4em;
    width: 100%;
    padding: 0 5px;
}


.wasanni-vs {
    font-size: 1.6rem;
    font-weight: 900;
    color: var(--accent);
    margin: 0 0.5rem;
    min-width: 50px;
    text-align: center;
}

.wasanni-card.site6-live .wasanni-vs, .wasanni-card.site6-finished .wasanni-vs {
    color: var(--fg);
  
    text-shadow: 0 0 5px rgba(0,0,0,0.5); 
}


.wasanni-info {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: 0.5rem;
}

.wasanni-time {
    font-size: 0.9rem;
    font-weight: 600;
    color: #ffe;
    text-align: center;
    margin-bottom: 0.3rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.wasanni-league {
    font-size: 0.8rem;
    font-weight: 500;
    color: #ccc;
    text-align: center;
    margin-bottom: 0.3rem;
}

.wasanni-status {
    font-size: 0.85rem;
    font-weight: 700;
    margin-top: 0.15rem;
    color: var(--accent); 
    text-align: center;
}

.site6-live .wasanni-status {
    color: var(--live-color);
    font-weight: 900;
    display: flex;
    align-items: center;
    justify-content: center;
}

.site6-live-dot {
    width: 8px;
    height: 8px;
    background-color: var(--live-color);
    border-radius: 50%;
    display: inline-block;
    margin-right: 5px;
    animation: blinker 1s infinite;
}

.site6-finished .wasanni-status {
    color: var(--finished-color);
    font-weight: 900;
}

@media (max-width: 950px) {
    .wasanni-card {
        
        flex: 0 0 calc((100% / 2) - 1.2rem - 0.5rem); 
        min-width: 250px;
    }
}



@media (max-width: 600px) {
    .wasanni-card-chunk {
        
        flex: 0 0 95%; 
    }
    .wasanni-scroll-btn {
        display: none; 
    }
}


.wasanni-babuwasa-msg {       
    text-align: center;
    width: 90%; 
    padding: 25px;
    margin: 20px auto; 
    border-radius: 15px; 
    background: rgba(255, 255, 255, 0.1);
    color: var(--fg, #fff);
    font-size: 1.1rem;
    font-weight: 600;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    
  
    flex-shrink: 0; 
    flex-grow: 1;
    min-width: 90%; 
    max-width: 600px;
}
/* ‚è≥‚úîÔ∏èSite 6 CSS ya kare daga nan */



/* üö¶‚úîÔ∏èSite 7 CSS ya fara daga nan */

#site7-wasaninmasuzabi {
    width: 100%;
    height: 50%;
    max-width: 900px;   
    min-height: 100px;
    box-sizing: border-box;
    overflow-x: hidden;
    position: relative;
    padding-bottom: 0.5rem;    
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
           
     
    border-bottom: 2px solid;
    border-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1;
    border-radius: 0px;
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
    
}

.aite7-title-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.9rem;
    font-size: 1.3rem; 
    font-weight: 800; 
    margin-bottom: 1rem; 
    letter-spacing: 0.8px;
    opacity: 0.95;
    user-select: none;    
    text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    
      border-top: 4px solid;
    border-bottom: 4px solid;
    border-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1;
    
     
}

.aite7-scroller-container {
    position: relative;
    width: 100%;
    overflow: hidden;    
     
}

.aite7-scroller {
    display: flex;
    gap: 1.8rem; 
    overflow-x: auto;
    padding-bottom: 0.5rem;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch; 
    scrollbar-width: none; 
    -ms-overflow-style: none; 
}

.aite7-scroller::-webkit-scrollbar {
    display: none; 
}

.aite7-card {
    min-width: 300px; 
    max-width: 350px;
    border-radius: 20px;
     
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); 
    padding: 1.5rem 1.2rem; 
    display: flex;
    flex-direction: column;
    align-items: center; 
    position: relative;
    margin-bottom: 0.5rem;
    cursor: default; 
    transition: all 0.2s ease-in-out; 
    border: 0px solid #e0e0e0; 
}

.aite7-card:hover {
    
    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
}

.aite7-img-wrap {
    position: relative;
    width: 100%;
    height: 180px; 
    border-radius: 18px; 
    overflow: hidden;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, #eaf6fb, #d4e7f7); 
    display: flex;
    align-items: center;
    justify-content: center;
}

.aite7-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    border-radius: 18px;
    transition: transform 0.3s ease-out;
}

.aite7-img-wrap:hover .aite7-img {
    transform: scale(1.03); 
}

.aite7-img-hover {
    position: absolute;
    left: 0; top: 0; right: 0; bottom: 0;
    pointer-events: none;
    background: linear-gradient(180deg, rgba(45,144,255,0.15) 0%, rgba(22,22,22,0.02) 100%);
    opacity: 1; 
    border-radius: 18px;
}
.aite7-game-row {
    display: flex;
    align-items: center;
    justify-content: center; 
    width: 100%;
    margin-bottom: 0.8rem;
    gap: 1.2rem;
    position: relative;
     
}


.aite7-teams {
    display: flex;
    align-items: center;
    justify-content: space-between; 
    width: 100%;
    font-size: 1.15rem; 
    font-weight: bold;
    margin-bottom: 0.8rem;
}


.aite7-team-col {
    display: flex;
    flex-direction: column; 
    align-items: center; 
    flex: 1; 
    min-width: 0;
    gap: 0.0rem;
}


.aite7-game-logo {
    width: 35px; 
    height: 35px; 
    border-radius: 50%;
    object-fit: cover;
    background: #fff;
    margin-bottom: 0.2rem;
    border: 3px solid #fdd835; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.aite7-game-name {
    font-size: 1.05rem; 
    font-weight: 800; 
    text-align: center;
     color: inherit;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 120px;
}

.aite7-vs-label {
    font-size: 2.25rem; 
    font-weight: 900;
    color: #f59e0b; 
    margin: 0 0.6rem;
    user-select: none;
    letter-spacing: 2.5px;
    display: flex;
    align-items: center;
    gap: 0.1rem;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.aite7-game-time {
    font-size: 1.05rem;
    font-weight: 600;
    color: #555; 
    text-align: center;
    margin-bottom: 1rem;
    padding: 0.1rem 0.8rem;
    background: #f0f0f0;
    border-radius: 15px;
}

.aite7-score-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    margin-bottom: 12px;
    gap: 1rem;
}

.aite7-vote-box {
    background: #f5f5f5;
    padding: 1px 14px;
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    flex: 1; 
    transition: all 0.3s ease;
    position: relative;
    border: 1px solid #eee;
}

.aite7-vote-box.voted {
    background: #4CAF50; 
    color: white;
    border-color: #4CAF50;
    box-shadow: 0 2px 10px rgba(76, 175, 80, 0.3);
}

.aite7-vote-box.voted .aite7-vote-indicator {
    background: linear-gradient(to right, #22c55e, #10b981); 
}

.aite7-vote-box.voted .aite7-team-icon {
    color: white;
}
.aite7-vote-box.voted .aite7-box-count {
    color: white; 
}

.aite7-vote-box.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

.aite7-vote-box .aite7-check-mark {
    font-size: 1.3rem;
    position: absolute;
    top: -8px;
    right: -8px;
    background: #4CAF50;
    color: white;
    border-radius: 50%;
    width: 25px;
    height: 25px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.aite7-team-icon {
    font-size: 1.0rem;
    color: #2d90ff; 
}

.aite7-box-count {
    font-size: 1.1rem;
    font-weight: 700;
    color: #444; 
    margin-left: 0.2rem;
}

.aite7-vote-indicator {
    margin-top: 8px;
    height: 6px;
    width: 100%;
    border-radius: 4px;
    background: #ccc; 
    transition: background 0.4s ease;
}

.aite7-divider {
    font-size: 1.5rem;    
    font-weight: bold;
}

.aite7-poster {
    margin-bottom: 1rem;
    width: 100%;
    text-align: center;
}

.aite7-poster img {
    width: 100%;
    max-height: 250px; 
    object-fit: cover;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    cursor: pointer; 
}

.aite7-content {
  font-size: 1rem;
  margin-bottom: 12px;
  line-height: 1.5;
  text-align: justify;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 4; 
  -webkit-box-orient: vertical;
  position: relative;
}

.aite7-read-more {

color: green;
    font-weight: 900;
    cursor: pointer;
    font-size: 1.05em;
    text-decoration: underline;
    margin-left: 0.3em;
    
         
}

.aite7-audio-player-wrap {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    background: linear-gradient(90deg, #e9f5ff, #f3f7fa);
    border-radius: 12px;
    padding: 0.5rem 0.8rem;
    min-width: 0;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
}

.aite7-audio-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: #2d90ff;
    cursor: pointer;
    transition: color 0.2s ease-in-out;
}

.aite7-audio-btn:hover {
    color: #1e70d4;
}

.aite7-audio-progress {
    flex: 1;
    appearance: none;
    height: 6px;
    border-radius: 7px;
    background: #d0e8ff;
    outline: none;
    cursor: pointer;
}

.aite7-audio-progress::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #2d90ff;
    cursor: pointer;
    box-shadow: 0 0 5px rgba(45,144,255,0.5);
    transition: background 0.2s ease-in-out;
}

.aite7-audio-progress::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #2d90ff;
    cursor: pointer;
    box-shadow: 0 0 5px rgba(45,144,255,0.5);
    transition: background 0.2s ease-in-out;
}

.aite7-audio-time {
    font-size: 0.9rem;
    color: #555;
    min-width: 70px;
    text-align: right;
    font-weight: 600;
}



.aite7-icon-item {
    
    gap: 9.4rem;
    border-radius: 0 0 15px 15px;
    padding: .3rem 1.0rem;
    
    box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.36);
    transition: background 0.3s ease;
    color: white;
    font-size: 1.0rem;
    font-weight: 500;
}

.aite7-icon-item:hover {
    background: #5e35b1;
    transform: translateY(-1px);
}

.aite7-icon-item i {
    font-size: 2.0rem;
    color: #fdd835;
    transition: color 0.2s ease-in-out;
}

.aite7-icon-item.liked i.fa-thumbs-up {
    color: #2d90ff; 
}


.aite7-icon-row {
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
    gap: 2.0rem;
    width: 100%;
    margin-top: 1rem;
    
}


.aite7-count {
    font-size: 1.0rem !important;    
    color: #fdd835;
    min-width: 20px;
    text-align: center;
    font-weight: bold;
}


.aite7-image-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.aite7-image-modal img {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.7);
}

.aite7-modal-close-btn, .aite7-modal-download-btn {
    position: absolute;
    background: none;
    border: none;
    color: #fff;
    font-size: 2.0rem;
    cursor: pointer;
    z-index: 10000;
    text-shadow: 0 0 5px rgba(0,0,0,0.5);
    transition: all 0.2s ease-in-out;
}

.aite7-modal-close-btn:hover, .aite7-modal-download-btn:hover {
    color: #ddd;
    transform: scale(1.1);
}

.aite7-modal-close-btn {
    top: 20px;
    right: 20px;
}

.aite7-modal-download-btn {
    bottom: 20px;
    right: 20px;
    font-size: 1.8rem;
    background: #2d90ff;
    padding: 10px 15px;
    border-radius: 50px;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 10px rgba(45,144,255,0.4);
}


.aite7-scroll-btn {
    position: absolute;
    top: 50%;
    z-index: 4;
    transform: translateY(-50%);
    width: 68px; 
    height: 68px;
    background: #2d90ff;
    color: #fff;
    border-radius: 50%;
    font-size: 2.8rem; 
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    box-shadow: 0 4px 12px rgba(45,144,255,0.4); 
    
}

.aite7-scroll-btn:hover {
    background: #1e70d4;
    transform: translateY(-50%) scale(1.05);
    box-shadow: 0 6px 16px rgba(45,144,255,0.5);
}

.aite7-scroll-btn:active {
    background: #15803d;
    transform: translateY(-50%) scale(0.95);
}

.aite7-scroll-btn.aite7-left {
    left: -24px; 
}

.aite7-scroll-btn.aite7-right {
    right: -22px; 
}

.aite7-scroll-btn[hidden] {
    display: none;
}


@media (max-width: 500px) {
    .aite7-card {
        min-width: 90vw; 
        max-width: 95vw;
        padding: 1.2rem 0.8rem;
    }
    .aite7-img-wrap {
        height: 40vw;
        min-height: 150px;
    }
    .aite7-game-name {
        font-size: 1.05rem;
    }
    .aite7-vs-label {
        font-size: 1.1rem;
    }
    .aite7-audio-player-wrap {
        flex-wrap: wrap;
        justify-content: center;
        padding: 0.8rem 0.5rem;
    }
    .aite7-audio-time {
        min-width: auto;
    }
    .aite7-meta-info {
        flex-wrap: wrap;
        gap: 1rem;
    }
    .aite7-icon-item {
        flex-basis: 45%; 
    }
    .aite7-scroll-btn {
        width: 40px;
        height: 40px;
        font-size: 1.6rem;
        left: -15px;
        right: -15px;
    }
}


.aite7-teams .aite7-vs-label { 
    font-weight: 500;
    font-size: 1.1em;
}


.aite7-teams .aite7-vs-label[style*="bold"] {
    font-size: 1.25em; 
    color: #38c172 !important; 
    padding: 0 5px;
    border: 2px solid #38c172;
    border-radius: 4px;
    background-color: #e9ffed;
}


.aite7-teams {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
}
/* ‚è≥‚úîÔ∏èSite 7 CSS ya kare daga nan */


/* üö¶‚úîÔ∏èSite 8 CSS ya fara daga nan */
#site8-posting {
    width: 98%;
    max-width: 700px;
    margin: 0 auto 1rem auto;
    min-height: 70px;
    box-sizing: border-box;               
}

.no-posts {
    text-align: center;
    color: #888;
    font-size: 1rem;
    padding: 2px;
    
}

.posting-feed {
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
}

.posting-card {      
    border-bottom: 2px solid;
    border-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1;
    
}

 .posting-card.first-post {
    border: 2px solid yellow;
    border-radius: 15px;
} 


.posting-logo-row {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    font-size: 0.95rem;
    color: inherit;
}

.posting-logo-img {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    object-fit: cover;
    background: #fff;
    border: 2px solid #FFD700;
    flex-shrink: 0;
}

.posting-timestamp {
    font-size: 0.9rem;
    color: inherit;
    margin-left: auto;
}

.posting-text-below-logo {
    font-size: 1rem;
    font-weight: 500;
    color: inherit;   
    line-height: 1.4;
    margin: 0.5rem 0;
    white-space: pre-wrap; 
}


.posting-learnmore {
    color: green;
    font-weight: 700;
    cursor: pointer;
    font-size: 1.1em;
    text-decoration: underline;
    margin-left: 0.3em;
}


.posting-media {            
width: 100%;    
    border-bottom: 2px solid yellow;
    padding-bottom: 0rem;
    margin: 0.5rem 0 0.2rem 0;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0.15rem;
    
}


.posting-img,
.posting-video {
            
    width: 100%;
    height: auto;
    object-fit: contain;
    border-radius: 20px;
    background: #222;
    margin-bottom: 0.18rem;
    max-height: 500px;
}

.posting-img-double-container {
    display: flex;
    width: 100%;
    gap: 0.15rem;
    justify-content: space-between;
}

.posting-img-double {
    width: 49.5%;
    height: auto;
    object-fit: cover;
    border-radius: 13px;
    background: #222;
    flex-grow: 1;
    max-height: 300px; 
}

.posting-audio-full-container {
    width: 100%;
    margin: 0.3rem 0;
}

.posting-audio-full {
    width: 100%;
    border-radius: 13px;
}

.posting-audio-container {
    width: 100%;
    margin-top: 0.5rem;
}

.posting-audio-controller {
    width: 100%;
    height: 40px; 
    border-radius: 5px;
}

.posting-audio-text-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    width: 100%;
    margin: 0.5rem 0;
}

.posting-audio-small {
    width: 100%;
    height: 30px; 
    border-radius: 5px;
}

.posting-bottom {
    display: flex;
    align-items: center;
    justify-content: space-around;
    font-size: 0.98rem;
    margin-top: 0.55rem;
    flex-wrap: wrap;
}

.posting-action {
    display: flex;
    align-items: center;
    gap: 0rem;
    cursor: pointer;
    color: yellow;
    transition: color 0.17s;
    font-size: 1.1rem;
    font-weight: bold;
}

.posting-action i {
    font-size: 2.0rem;
    color: yellow;
}

.posting-action.posting-action-like.active {
    color: blue;
}

.posting-action:hover {
    color: #ffd700;
}


.site8-image-viewer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.site8-image-viewer.active {
    opacity: 1;
    pointer-events: auto;
}

.site8-image-viewer img {
    max-width: 100%;
    max-height: 80%;
    object-fit: contain;
    border-radius: 0px;
}

.site8-image-viewer-controls {
    position: absolute;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 15px;
}

.site8-image-viewer-controls i {
    color: white;
    font-size: 2.5rem;
    cursor: pointer;
    background: rgba(0, 0, 0, 0.5);
    padding: 10px;
    border-radius: 50%;
}

.site8-image-viewer-controls i:hover {
    color: yellow;
}

.push-container {
    position: fixed;
    top: 1.8em;
    right: 1.5em;
    z-index: 9999;
    background: #222;
    color: #fff;
    padding: 0.9em 1.6em;
    border-radius: 10px;
    box-shadow: 0 0 12px #19c37d22;
    font-weight: 600;
    font-size: 1.06em;
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 0.3s, transform 0.3s;
    pointer-events: none;
}

.push-container.active {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.posting-logo-row {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    border-bottom: 1px solid #fff155;
}


.site8-video-fullscreen-viewer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.site8-video-fullscreen-viewer.active {
    opacity: 1;
    visibility: visible;
}

.site8-video-fullscreen-content {
    position: relative;
    width: 100%; 
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.site8-fullscreen-video-frame {
    width: 100%;
    height: 100%;
    max-width: 100vw;
    max-height: 100vh;
}

.site8-video-fullscreen-close-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1001; 
}

.site8-video-fullscreen-close-btn:hover {
    background: rgba(255, 255, 255, 0.4);
}


.posting-video-container {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
    height: 0;
    overflow: hidden;
}

.posting-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.video-fullscreen-btn {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    border: none;
    border-radius: 5px;
    padding: 8px 12px;
    font-size: 16px;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 5px;
}

.video-fullscreen-btn:hover {
    background: rgba(0, 0, 0, 0.8);
}


.posting-video-container.youtube-embed {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%; 
    overflow: hidden;
    cursor: pointer;
}

.youtube-thumbnail {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: opacity 0.3s ease;
}

.youtube-play-btn {
    color: #fff;
    font-size: 4rem;
    filter: drop-shadow(0 0 5px rgba(0,0,0,0.5));
    transition: color 0.2s ease;
}

.youtube-play-btn:hover {
    color: #ff0000;
}

.youtube-iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.youtube-iframe.hidden {
    display: none;
}


#site8-load-more-btn {
    display: block;
    width: 90%;
    max-width: 400px;
    margin: 20px auto 40px auto; 
    padding: 12px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 8px; 
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

#site8-load-more-btn:hover {
    background-color: #0056b3; 
    transform: translateY(-2px); 
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
}

#site8-load-more-btn:active {
    transform: translateY(0);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}


.site8-loader {
    display: flex; 
    justify-content: center;
    align-items: center;
    flex-direction: column;
    text-align: center;
    padding: 30px 0;
     color: inherit;;
    font-size: 18px;
    font-weight: 500;
}

.site8-loader i {
    font-size: 2.5em; 
    margin-bottom: 10px;
    color: inherit;
    animation: fa-spin 1s infinite linear;
}
/* ‚è≥‚úîÔ∏èSite 8 CSS ya kare daga nan */



@media (max-width: 680px) {
    .site2-menu { max-width: 99vw; gap: 0.7rem;}
    #site2-container, #site3-leagues, #site4-sarki,
    #site5-kaitsayepost, #site6-wasanninyau,
    #site7-wasaninmasuzabi, #site8-posting { padding-left: 0; padding-right: 0;}
}
@media (max-width: 520px) {
    .leagues-scroller { gap: 0.6rem;}
    .league-card { min-width: 85px; max-width: 100px; padding: 0.4rem;}
    .posting-card, .kaitsaye-post-container { padding: 0.6rem 0.4rem;}
}


.header-btn {
  background: none;
  border: none;
  color: #fff;
  font-size: 1.45em;
  margin-left: 10px;
  cursor: pointer;
  transition: color .19s;
}
.header-btn:active,
.header-btn:hover {
  color: #7d3cff;
}

.push1-container {
  display: none;
  position: fixed;
  top: 85px;
  right: 50px;
  z-index: 9999;
  background: #29003d;
  color: #fff;
  border-radius: 13px;
  box-shadow: 0 4px 30px #7d3cff44;
  padding: 22px 20px 18px 18px;
  min-width: 220px;
  max-width: 96vw;
  transition: opacity .24s;
}
.push1-container.show {
  display: block;
  animation: push1-fade-in .21s;
}
@keyframes push1-fade-in {
  0% { opacity: 0; transform: scale(.96);}
  100% { opacity: 1; transform: scale(1);}
}
.push1-content {
  text-align: center;
}
.push1-content i {
  color: #7d3cff;
  font-size: 2.22em;
  margin-bottom: 8px;
  margin-top: 3px;
}
.push1-close {
  position: absolute;
  top: 7px;
  right: 11px;
  font-size: 1.5em;
  color: #fff;
  cursor: pointer;
  transition: color .18s;
}
.push1-close:hover { color: #ff4343; }
.push1-btn {
  padding: 7px 24px;
  background: #7d3cff;
  color: #fff;
  border: none;
  border-radius: 7px;
  margin: 0 4px;
  cursor: pointer;
  font-weight: 600;
  font-size: 1em;
  transition: background .15s;
}
.push1-btn-deny {
  background: #444;
}
.push1-btn:hover:not(.push1-btn-deny) {
  background: #a06cff;
}
.push1-btn-deny:hover {
  background: #6a3131;
}


.push1-modern-alert {
  position: fixed;
  top: 22px;
  right: 22px;
  z-index: 99999;
  min-width: 220px;
  max-width: 98vw;
  padding: 18px 30px 18px 26px;
  background: linear-gradient(90deg, #7d3cff 60%, #180022 120%);
  color: #fff;
  border-radius: 13px;
  box-shadow: 0 4px 26px #7d3cff44;
  font-family: 'Poppins', sans-serif;
  font-size: 1.09em;
  font-weight: 500;
  opacity: 0;
  pointer-events: none;
  display: flex;
  align-items: center;
  gap: 12px;
  transition: opacity .25s, transform .23s;
  transform: translateY(-20px);
}
.push1-modern-alert.show {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}
.push1-modern-alert .icon {
  font-size: 1.6em;
  flex-shrink: 0;
  color: #ffe7ff;
  filter: drop-shadow(0 0 6px #fff3);
}

      

.poll-card {
    border: 2px solid #ff5722 !important;
    padding: 20px !important;
    
}

.poll-header-approved {
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px dashed #ddd;
}

.poll-text-approved {
    font-size: 1.15em;
    font-weight: bold;
       color: inherit;
    
    margin-bottom: 8px;
}

.poll-options-list {
    margin-bottom: 15px;
}

.total-votes-approved {
    text-align: center;
    font-size: 1em;
    color: inherit;
    
    padding-top: 10px;
    border-top: 1px dashed #eee;
}

.total-votes-approved strong {
    color: #ff5722;
    color: inherit;
}


.candidate-item {
    margin-bottom: 10px;
    padding: 8px 0;
    border-radius: 6px;
    display: flex;
    align-items: center;
   
    justify-content: space-between;
}


.vote-button-circle {
   
    width: 20px; 
    height: 20px;
    min-width: 20px; 
    border-radius: 50%;
    border: 3px solid #007bff;
    background-color: transparent;
    margin-right: 15px;
    cursor: pointer;
    flex-shrink: 0;
  
    display: flex; 
    justify-content: center;
    align-items: center;
    box-sizing: border-box;
    transition: all 0.2s ease-in-out; 
}



.vote-button-circle.selected {
    background-color: #007bff !important;
    border-color: #007bff !important; 
    color: white; 
    font-size: 1.1em;
    font-weight: bold;
   
}

.candidate-details-content {
    flex-grow: 1;
}
.candidate-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
   color: inherit;
    
    margin-bottom: 5px;
    
    
}
               
        .candidate-name {
    font-size: 1.1em;
    color: inherit; 
    font-weight: bold;
       
}

.vote-count {
    background-color: #ff5722;
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.85em;
    min-width: 30px;
    text-align: center;
  
}

.progress-bar-container {
    height: 18px; 
    background-color: #e9ecef;
    border-radius: 9px;
    overflow: hidden;
    position: relative;
}

.progress-bar {
    height: 100%;
    width: 0%; 
    border-radius: 9px;
    transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1);
    position: relative;
}

.poll-options-list .candidate-item:nth-child(1) .progress-bar { background: linear-gradient(to right, #00BCD4, #03A9F4); } 
.poll-options-list .candidate-item:nth-child(2) .progress-bar { background: linear-gradient(to right, #FF9800, #FFC107); } 
.poll-options-list .candidate-item:nth-child(3) .progress-bar { background: linear-gradient(to right, #4CAF50, #8BC34A); } 
.poll-options-list .candidate-item:nth-child(4) .progress-bar { background: linear-gradient(to right, #E91E63, #F48FB1); } 
.poll-options-list .candidate-item:nth-child(5) .progress-bar { background: linear-gradient(to right, #9C27B0, #BA68C8); } 

.progress-bar::after {
    content: attr(data-percentage);
    position: absolute;
    top: 50%;
    right: 5px;
    transform: translateY(-50%);
    color: white;
    font-size: 0.85em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
    z-index: 2;
}

.progress-bar[style*="width: 0%"]::after,
.progress-bar[style*="width: 1%"]::after,
.progress-bar[style*="width: 2%"]::after,
.progress-bar[style*="width: 3%"]::after,
.progress-bar[style*="width: 4%"]::after,
.progress-bar[style*="width: 5%"]::after,
.progress-bar[style*="width: 6%"]::after,
.progress-bar[style*="width: 7%"]::after {
    right: auto;
    left: 5px;
    color: #333;
    text-shadow: none;
}


.vote-button-circle {
    width: 25px;
    height: 25px;
    border-radius: 50%;
    border: 3px solid #007bff;
    background-color: transparent;
    margin-right: 15px;
    cursor: pointer;
  
    transition: background-color 0.2s ease, transform 0.1s ease, border-color 0.2s ease; 
    flex-shrink: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white; 
    font-size: 1em; 
    font-weight: bold;
}

.vote-button-circle.voted {
    background-color: #007bff;
    border: none; 
   
}


.progress-bar {
    height: 100%;
    width: 0%; 
    border-radius: 6px;
  
    transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1); 
    position: relative;
}


.progress-bar::after {
  
    content: attr(data-percentage);
    position: absolute;
    top: 50%;
    right: 5px;
    transform: translateY(-50%);
    color: white; 
    font-size: 0.9em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7); 
    z-index: 2; 
}


.text{
font-size: 14px;
margin: 3px;
color: inherit;
    
        }
                
 .TauraronWasa{
      font-size: 3em;
    color: inherit; 
    font-weight: bold;      
             background: repeating-linear-gradient(
                45deg,
                #FF5733,
                #00A8E8 10px,
                #00A8E8 10px,
                #1B263B 20px
            );
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        I img{
            width: 50px;
            height: 50px;
            filter: drop-shadow(0 0 10px #00A8E8);
            border-radius: 50%;
            Border: 1px solid #FF5733;
        }
        
                            
       .LodingLogo {
  width: 70px;
  height: 70px;
  filter: drop-shadow(0 0 10px #ffd700);
  animation: glowEffect 2s infinite ease-in-out;
}


@keyframes glowEffect {
  0% {
    filter: drop-shadow(0 0 5px #ffd700);
  }
  50% {
    filter: drop-shadow(0 0 20px #ffea00);
  }
  100% {
    filter: drop-shadow(0 0 5px #ffd700);
  }
}



#tauraronwasa-footer {  
    width: 100%;
    margin-top: auto;    
    background-color: #1f2833;     
    color: #c5c5c5;     
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    
    border-top: 5px solid;
  
    border-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1;
    
                  
}

.footer-content {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 20px 30px 20px;
    text-align: center;
}

.footer-logo {
    font-size: 2.2em;
    color: #66fcf1; 
    margin-bottom: 5px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 2px;
}


.footer-moto {
    font-size: 1.0em;
    margin-bottom: 25px;
    color: #45a29e;
    font-style: italic; 
    font-weight: 500;
}


.footer-contact {
    margin-bottom: 30px;
}

.footer-contact > a {
    color: #66fcf1; 
    text-decoration: none;
    font-weight: bold;
    font-size: 1.1em;
    display: block;
    margin-bottom: 15px;
    transition: color 0.3s ease;
}

.footer-contact > a:hover {
    color: #fff;
    text-decoration: underline;
}

.footer-contact > a i {
    margin-right: 8px;
    font-size: 1.2em;
}

.footer-links {
    margin-top: 15px;
    display: flex; 
    justify-content: center;
}

.footer-links a {
    color: #c5c5c5;
    text-decoration: none;
    margin: 0 10px;
    font-size: 0.95em;
    transition: color 0.3s ease;
    padding: 5px 10px;    
    border: 1px solid #45a29e;
    
    border-radius: 5px;
}

.footer-links a:hover {
    color: #1f2833;
    background-color: #66fcf1; 
}

.footer-links a i {
    margin-right: 5px;
}


.footer-social-icons {
    margin-top: 30px;
    display: flex;
    justify-content: center;
    gap: 15px; 
}

.footer-social-icons a {
    color: #66fcf1; 
    font-size: 1.6em;
    width: 40px;
    height: 40px;
    line-height: 40px;
    border-radius: 50%; 
    background-color: #343a40;
    transition: background-color 0.3s ease, color 0.3s ease, transform 0.3s ease;
    text-align: center;
}

.footer-social-icons a:hover {
    color: #1f2833; 
    background-color: #66fcf1; 
    transform: scale(1.1) rotate(5deg); 
}

.footer-bottom {
    background-color: #0b0c10; 
    color: #899099;
    text-align: center;
    padding: 15px 20px;
    font-size: 0.85em;
    border-top: 1px solid #343a40;
}

@media (max-width: 600px) {
    .footer-content {
        padding-top: 20px;
    }
    .footer-logo {
        font-size: 1.8em;
    }
    .footer-links {
        flex-direction: column; 
    }
    .footer-links a {
        margin: 5px auto;
        width: fit-content;
    }
    .footer-social-icons {
        gap: 10px;
    }
}

 .TauraronWasa{
      font-size: 3em;
    color: inherit; 
    font-weight: bold;      
             background: repeating-linear-gradient(
                45deg,
                #FF5733,
                #00A8E8 10px,
                #00A8E8 10px,
                #1B263B 20px
            );
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        I img{
            width: 50px;
            height: 50px;
            filter: drop-shadow(0 0 10px #00A8E8);
            border-radius: 50%;
            Border: 1px solid #FF5733;
        }

.yarabbi {
font-size: 20px;
     color: #55eaff;
            Font-weight: bold;
    
    
}
.ya{
                border-top: 2px solid;
  border-bottom: 2px solid;
    border-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1;
}

.go{
    Font-size: 15px;    
    Text-align: center;
    padding: 0;
    margin-top: 0;
}




#history-status-btn {   
    display: inline-flex; 
    align-items: center;
    justify-content: center;
 
    padding: 12px 25px;
    margin: 15px auto;
    width: fit-content;    
  
    background-color: #ffc107; 
    color: #1f2833; 
    text-decoration: none;
    border-radius: 50px; 
    font-size: 1.1em;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: 2px solid #ff9800; 
   
    box-shadow: 0 6px 15px rgba(255, 193, 7, 0.4);
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); 
}

#history-status-btn i {
    margin-right: 10px;
    font-size: 1.3em;
}


#history-status-btn:hover {
    background-color: #ff9800; 
    color: white; 
    box-shadow: 0 8px 20px rgba(255, 152, 0, 0.6); 
    transform: translateY(-2px);
    border-color: #ff9800;
}


#history-status-btn:active {
    transform: translateY(0);
    box-shadow: 0 4px 10px rgba(255, 152, 0, 0.4);
}


  .image-container {
        display: inline-block;
        position: relative;
       
    }000

    .image-container img {       
        width: 220px;
        height: 220px;
        object-fit: cover;
        display: block;
        margin: 0 auto;
        transition: all 0.4s ease; 
    }
 .image-container .caption {
        font-size: 13px;
        font-weight: bold;
        line-height: 1.4;
        margin-top: 10px;
        color: #333;
    }
    
    .image-container .small-text {
        font-size: 10px;
        font-weight: normal;
        color: #777;
    }
     .image-style-15 img {
        border-radius: 5px; 
        transform: skewX(-10deg); 
        box-shadow: 4px 4px 0 #9e9e9e; 
        border: 3px solid #795548; 
    }

    </style>
</head>
<body>

    <div class="loading-backdrop" id="loading-backdrop">
        <span class="lds-roller">
 <div></div><div></div><div></div><div></div>
 <div></div><div></div><div></div><div></div>
              <img src="https://i.imgur.com/CgvdgMA.png" class="LodingLogo">
        </span>
   </div>
  
<header id="site1-header">
    <div class="header-content">
        <img src="https://i.imgur.com/CgvdgMA.png" alt="Logo" class="logo" id="site1-logo">
        <div class="header-icons">
            <button class="header-btn" id="bg1-btn" title="Bacgraoud na 1">
                <i class="fa-solid fa-moon"></i>
            </button>
            <button class="header-btn" id="bg2-btn" title="Bacgraoud na 2">
                <i class="fa-solid fa-sun"></i>
            </button>
            <button class="header-btn" id="bg3-btn" title="Bacgraoud na 3">
                <i class="fa-solid fa-circle-half-stroke"></i>
            </button>
            <button class="header-btn" id="user-btn" title="Shiga / Rijista">
                <i class="fa-solid fa-user-plus"></i>
            </button>
           
<button class="header-btn" id="install-btn" title="Saita TauraronWasa">
  <i class="fa-solid fa-download fa-bounce"></i>
</button>
<button class="header-btn" id="push1-bell-btn" title="Sanarwa">
  <i class="fa-solid fa-bell"></i>
</button>


<div id="push1-container" class="push1-container">
  <span class="push1-close" id="push1-close-btn">&times;</span>
  <div class="push1-content">
    <i class="fa-solid fa-bell fa-shake"></i>
    <strong>Amince da sanarwa?</strong>
    <div style="margin: 10px 0 16px 0;">
      <button id="push1-allow-btn" class="push1-btn">Kunna</button>
      <button id="push1-deny-btn" class="push1-btn push1-btn-deny">Kashe</button>
    </div>
  </div>
</div>
        </div>
    </div>
    
<div id="push1-modern-alert" class="push1-modern-alert"></div>
    

   
    <div id="register-notification" class="hidden">
        <div class="register-container">
            <button class="close-btn" id="close-register"><i class="fa-solid fa-times"></i></button>
            <p>Domin cigaba da amfani da wasu fasaloli, sai kayi rijista ko login:</p>
            <div class="register-actions">
                <a href="register.html" class="register-link">Rijista</a>
                <a href="login.html" class="login-link">Login</a>
            </div>
        </div>
    </div>
</header>



<center class="TauraronWasa">Taurar<i><img src="https://i.imgur.com/CgvdgMA.png" alt=""></i>nWasa </center>

<section id="site2-container">
    <div class="site2-menu">
        <div class="site2-menu-item" id="site2-profile" title="Profile">
            <img src="https://i.imgur.com/NXHUISp.png" alt="Profile" class="menu-img">
            <span>Teams info.</span>
        </div>
        <div class="site2-menu-item" id="site2-status" title="Status">
            <a href="statusPost.html" style="text-decoration: none; color: inherit;">
                <div class="site2-view-anim">
                    <i class="fa-solid fa-square-poll-vertical"></i>
                    <span id="view-count"></span>
                </div>
               <center> <span class="site2-viewcount-text">News Posting Status</span></center>
            </a>
        </div>
        <div class="site2-menu-item" id="site2-teams" title="TauraronWasa Teams">
            <img src="https://i.imgur.com/vQmF5sz.png" alt="Teams" class="menu-img">
            <span>About Us</span>
        </div>
    </div>
</section>


    

    <section id="site3-leagues">
        <div class="leagues-scroller">
            <div class="league-card" data-link="premier.html">
                <img src="https://i.imgur.com/WzzLtwD.png" alt="Premier League">
                <span>Premier </span>
            </div>
            <div class="league-card" data-link="laliga.html">
                <img src="https://i.imgur.com/tuYj69T.png" alt="Laliga">
                <span>Laliga </span>
            </div>
            <div class="league-card" data-link="champions.html">
                <img src="https://i.imgur.com/irD8XpZ.png" alt="Champions League">
                <span>Champions</span>
            </div>
            <div class="league-card" data-link="eropa.html">
                <img src="https://i.imgur.com/vBt3j15.png" alt="Eropa League">
                <span>Eropa </span>
            </div>
            <div class="league-card" data-link="league1.html">
                <img src="https://i.imgur.com/4mZNfEl.png" alt="Ligue 1">
                <span>Ligue 1</span>
            </div>
            <div class="league-card" data-link="siriyaa.html">
                <img src="https://i.imgur.com/2grD9G5.png" alt="Serie A">
                <span>Serie A</span>
            </div>
            <div class="league-card" data-link="bundesliga.html">
                <img src="https://i.imgur.com/LzYuOUD.png" alt="Bundesliga">
                <span>Bundesliga</span>
            </div>
          
            <div class="league-card" data-link="search.html">
                <img src="https://i.imgur.com/OtQfYC6.png" alt="All Cups">
                <span> Search All</span>
            </div>
            
            <div class="league-card" data-link="profile.html">
                <img src="https://i.imgur.com/4Duz0G5.png" alt="profile">
                <span>User Profile</span>
            </div>                         
           
            <div class="league-card" data-link="contact.html">
                <img src="https://i.imgur.com/gfh6fJW.png" alt="Contact">
                <span>Contact Us</span>
            </div>
        </div>
    </section>
  
    
    
    
    
    <div id="sarki-profile-modal" class="sarki-modal" style="display:none;">
        <div class="sarki-modal-overlay"></div>
        <div class="sarki-modal-content">
            <button class="sarki-modal-close" id="sarki-profile-modal-close" aria-label="Rufe" style="color:blue;">x</button>
            <div class="sarki-modal-img-wrapper">
                <img id="sarki-modal-profile-img" class="sarki-modal-profile-img" src="" alt="Babban hoto na Sarki">
                <img id="sarki-modal-club-img" class="sarki-modal-club-img" src="" alt="Logo na Kungiya">
                <span class="sarki-modal-username">üèÖSarkin Wannan Mako Na TauraronWasaüôè</span>
                <span class="sarki-modal-usernam2" id="sarki-modal-username"></span>
            </div>
        </div>
    </div>

    <section id="site4-sarki"></section>
    <section id="site5-kaitsayepost"></section>
    
    <div id="site5-push-container" class="site5-push-container" hidden></div>
    
    <nav id="site6-navbar" class="site6-navbar-modern">
        <button id="site6-prevDay" aria-label="Rana ta Baya" class="site6-nav-btn">
            <i class="fas fa-chevron-left"></i>
        </button>
        <span id="site6-dateDisplay" class="site6-nav-date"></span>
        <button id="site6-nextDay" aria-label="Rana ta Gaba" class="site6-nav-btn">
            <i class="fas fa-chevron-right"></i>
        </button>
    </nav>
    <section id="site6-wasanninyau">
        <div class="wasanni-scroller-wrapper">
            <button id="site6-scrollLeft" class="wasanni-scroll-btn wasanni-scroll-left" aria-label="Scroll Left">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="wasanni-scroller" id="site6-scroller"></div>
            <button id="site6-scrollRight" class="wasanni-scroll-btn wasanni-scroll-right" aria-label="Scroll Right">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </section>
    <div id="site6-loader" style="display:none;text-align:center;padding:1.5rem;">
        <i class="fa fa-spinner fa-spin fa-2x"></i>
        <p></p>
    </div>
    
    
        
 
 <section id="site7-wasaninmasuzabi" aria-label="Wasanni Masu Zafi"></section>


<center>
<a href="statusPost.html" id="history-status-btn" aria-label="View My Posts Status">
    <i class="fa-solid fa-clock-rotate-left"></i>
     News posts Status
</a>
</center>
<div class="ya">
 <center class="yarabbi">‚öΩLabarai da Dimi-dimin Su!‚öΩ
 </center>
 <center class="go"> Zaku samu sabbin labarai daga duniyar ∆ôwallon ∆ôafa </center>
  </div>
  
  
<section id="site8-posting"></section>


   
    <div id="site8-push-container" class="site8-push-container"></div>
       
     <footer id="tauraronwasa-footer">
    <div class="footer-content">
        <center class="TauraronWasa">Taurar<i><img src="https://i.imgur.com/CgvdgMA.png" alt=""></i>nWasa </center>
        <p class="footer-moto">Gidan Labarai, Nisha…ói da Wasanni na Arewa. Mu ne Tushen Farin Cikin ku!</p>
   <div class="image-container image-style-15">
  <img src="https://i.imgur.com/cWjPiby.png" alt="Haruna Lawali"
       style="width:100px; height:100px;" onclick="openImage(this.src)">
          </div>
        <div class="footer-contact">
            <a href="mailto:tauraronwasa@gmail.com" aria-label="Email Address">
                <i class="fa-solid fa-envelope"></i> tauraronwasa@gmail.com
            </a>
            
            <div class="footer-links">
                 <a href="team.html" aria-label="Game da Mu / Teams"><i class="fa-solid fa-users"></i> Game da Mu</a>
                <a href="contact.html" aria-label="Tuntu…ìa"><i class="fa-solid fa-headset"></i> Tuntu…ìa</a>
            </div>
        </div>
        
        <div class="footer-social-icons">
             <a href="#" target="_blank" aria-label="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
            
             <a href="#" target="_blank" aria-label="X (Twitter)">
                <i class="fa-brands fa-x-twitter"></i> 
            </a>
            
            <a href="#" target="_blank" aria-label="WhatsApp"><i class="fa-brands fa-whatsapp"></i></a>
            <a href="#" target="_blank" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
            <a href="#" target="_blank" aria-label="TikTok"><i class="fa-brands fa-tiktok"></i></a>
        </div>
    </div>
    <div class="footer-bottom">
        &copy; <span id="current-year"></span> TauraronWasa. Dukkan Ha∆ô∆ôo∆ôi an Adana.
    </div>
</footer>

<div id="imgModal" style="display:none; position:fixed; z-index:9999; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.85); text-align:center;">
  <span onclick="closeImage()" style="position:absolute; top:20px; right:35px; font-size:40px; font-weight:bold; color:#fff; cursor:pointer; color: red;">‚úñ</span>
  <img id="modalImg" src="" style="margin-top:60px; max-width:90%; max-height:80%; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.5);">
</div>
<script>
function openImage(src) {
  document.getElementById("imgModal").style.display = "block";
  document.getElementById("modalImg").src = src;
}
function closeImage() {
  document.getElementById("imgModal").style.display = "none";
}
</script>

<script>
    document.getElementById('current-year').textContent = new Date().getFullYear();    
    
    document.addEventListener('DOMContentLoaded', () => {
        const xIcon = document.querySelector('.footer-social-icons a[aria-label="X (Twitter)"] i');
        if (xIcon) {         
            if (window.getComputedStyle(xIcon, '::before').content === 'none' || xIcon.offsetWidth === 0) {
                 xIcon.classList.remove('fa-x-twitter');
                 xIcon.classList.add('fa-twitter');
            }
        }
    });
</script>
<script type="module">
import { app } from './firebase.js';

import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";

import { getDatabase, ref, onValue, get, child, query, orderByChild, limitToLast, endBefore, runTransaction, set } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-database.js";

const HIDE_LOADING_TIMEOUT = 1;
const OFFLINE_RETRY_DELAY = 600000;

let isAppReady = false;
let isFirebaseInitialized = false;
let isInitialDataLoaded = false;
let lastFetchedPostId = null;
let currentPlayingAudio = null;
let currentRediyoAudio = null;

const site5 = document.getElementById('site5-kaitsayepost');
const site6Section = document.getElementById('site6-wasanninyau');
const site6PrevDay = document.getElementById('site6-prevDay');
const site6NextDay = document.getElementById('site6-nextDay');
const site6DateDisplay = document.getElementById('site6-dateDisplay');
const site6Loader = document.getElementById('site6-loader');
const site6Scroller = document.getElementById('site6-scroller');
const site6ScrollLeft = document.getElementById('site6-scrollLeft');
const site6ScrollRight = document.getElementById('site6-scrollRight');
const site4 = document.getElementById('site4-sarki');

const db = getDatabase(app);
const auth = getAuth(app);

const kaitsayeRef = ref(db, "KaiTsayePost");
const KAITSAYE_KEY = "tw_kaitsaye_modern";
const sarkiRef = ref(db, "Sarki");
const SARKI_KEY = "tw_sarki";

function escapeHTML(str) {
    return String(str).replace(/[&<>"'`=\/]/g, function(s) {
        return ({
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#39;',
            '`': '&#96;',
            '=': '&#61;',
            '/': '&#47;',
        })[s];
    });
}

function sarkiFormatNum(n) {
    n = Number(n) || 100;
    if (n < 1000) return n.toString();
    if (n < 1e6) return (n / 1e3).toFixed(n % 1000 === 0 ? 0 : 1).replace(/\.0$/, '') + 'k';
    if (n < 1e9) return (n / 1e6).toFixed(n % 1e6 === 0 ? 0 : 1).replace(/\.0$/, '') + 'm';
    return (n / 1e9).toFixed(n % 1e9 === 0 ? 0 : 1).replace(/\.0$/, '') + 'b';
}

function formatCount(num) {
    if (num == null) return 0;
    if (num >= 1e6) return (num / 1e6).toFixed(1).replace(/\.0$/, "") + "m";
    if (num >= 1e3) return (num / 1e3).toFixed(1).replace(/\.0$/, "") + "k";
    return num;
}

function getYouTubeVideoId(url) {
    let videoId = null;
    const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i;
    const match = url.match(regex);
    if (match && match[1]) {
        videoId = match[1];
    }
    return videoId;
}

function stopOtherMedia(newMedia) {
    if (currentPlayingAudio && currentPlayingAudio !== newMedia && !currentPlayingAudio.paused) {
        currentPlayingAudio.pause();
    }
    currentPlayingAudio = newMedia;
    document.querySelectorAll('video').forEach(vid => {
        if (!vid.paused) vid.pause();
    });
}

function stopRediyo(newRediyo) {
    if (currentRediyoAudio && currentRediyoAudio !== newRediyo && !currentRediyoAudio.paused) {
        currentRediyoAudio.pause();
        currentRediyoAudio = null;
    }
}

function showSite5Push(msg, icon = "fa-circle-check", timeout = 2600) {
    const c = document.getElementById('site5-push-container');
    if (!c) {
        return;
    }
    c.innerHTML = `<i class="fa-solid ${icon}" style="color:#ffcb05;"></i> <span>${msg}</span>`;
    c.hidden = false;
    c.classList.add('show');
    setTimeout(() => {
        c.classList.remove('show');
        c.hidden = true;
    }, timeout);
}

function showKaitsayeLoading() {
    if (!site5) {
        console.warn("Element 'site5-kaitsayepost' ba'a samo shi ba.");
        return;
    }
    site5.innerHTML = `<div class="kaitsaye-post-container" style="min-height:100%;display:flex;justify-content:center;align-items:center;">
        <div style="text-align:center;width:100%;">
            <i class="fa-solid fa-spinner fa-spin" style="font-size:2.5rem;color: inherit;margin-bottom:0.6rem;"></i>
            <div style="font-weight:700;color: inherit; font-size:1.12rem;"></div>
        </div>
    </div>`;
}

function showKaitsayeEmptyState() {
    if (!site5) return;
    site5.innerHTML = `<div class="kaitsaye-post-container" style="min-height:100%;display:flex;justify-content:center;align-items:center;">
        <div style="text-align:center;width:100%;">
            <i class="fa-solid fa-box-open" style="font-size:2.5rem;color: inherit;margin-bottom:0.6rem;"></i>
            <div style="font-weight:700;color: inherit;font-size:1.12rem;">Babu wani sabon post a halin yanzu.</div>
        </div>
    </div>`;
}

function clearAllPostSpecificLocalStorage() {
    const keysToRemove = [];
    for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && (key.startsWith('kaitsaye-view-') || key.startsWith('site5-loved-') || key.startsWith('audio-position-'))) {
            keysToRemove.push(key);
        }
    }
    keysToRemove.forEach(key => localStorage.removeItem(key));
}

function pushNewPostNotification(p) {
    if (!p) return;
    if (!p.rediyoKaiTsayeAudioLink) {
        showSite5Push("An samu sabon post!", "fa-circle-check", 2600);
    }
}

function setupPostDataListener(p) {
    if (!p || !p.postid) return;
    const postRef = ref(db, `KaiTsayePost/${p.postid}`);
    const container = document.querySelector(`.kaitsaye-post-container[data-postid="${p.postid}"]`);
    if (!container) return;

    
    onValue(postRef, (snapshot) => {
        const postData = snapshot.val();
        if (postData) {            
            const newViews = postData.see || 0;
            const newLove = postData.love || 0;            
            const viewBadge = container.querySelector('.kaitsaye-action-btn.view .kaitsaye-action-badge');
            const loveBadge = container.querySelector('.kaitsaye-action-btn.love .kaitsaye-action-badge');            
            if (viewBadge) viewBadge.textContent = formatCount(newViews);
            if (loveBadge) loveBadge.textContent = formatCount(newLove);                      
            p.see = newViews;
            p.love = newLove;           
        }
    }, (error) => {
        console.error("KaiTsayePost listener error:", error);
    });
}


function renderAndCachePost(p) {
    if (!p || !site5) {
        showKaitsayeEmptyState();
        return;
    }

    
    if (p && (p.text || p.photoLink || p.videoLink || p.audioPostLink || p.rediyoKaiTsayeAudioLink || p.onlineLink1)) {
        site5.innerHTML = "";
        const postElement = renderKaitsayePost(p);
        site5.appendChild(postElement);
        setupPostDataListener(p); 
    } else {
        site5.innerHTML = "";
        showKaitsayeEmptyState();
    }
}

function renderKaitsayePost(p) {
    if (!p || !p.postid) return document.createElement('div');
    const posttime = p.posttime ? new Date(p.posttime).toLocaleString('ha-NG', { hour12: true }) : "";
    const topBar = `<div class="kaitsaye-top-bar">
        <img src="https://i.imgur.com/CgvdgMA.png" alt="logo" class="kaitsaye-top-bar-logo">
        <div class="kaitsaye-top-title">KaiTsaye</div>
        <div class="kaitsaye-top-bar-time"><i class="fa-regular fa-clock"></i> <span>${posttime}</span></div>
    </div>`;
    let text = "";
    if (p.text && typeof p.text === "string" && p.text.trim().length) {
        text = `<div class="kaitsaye-post-text" style="white-space: pre-wrap;">${p.text}</div>`;
    }

    let gameButtonsHtml = "";
    const daysOfWeek = ['Lahadi', 'Litinin', 'Talata', 'Laraba', 'Alhamis', 'Juma\'a', 'Asabar'];
    for (let i = 1; i <= 3; ++i) {
        const onlineLink = p[`onlineLink${i}`];
        const logo1 = p[`onlineLink1LogoLink${(i * 2) - 1}`];
        const team1 = p[`sunanKungiya${(i * 2) - 1}`];
        const logo2 = p[`onlineLink1LogoLink${(i * 2)}`];
        const team2 = p[`sunanKungiya${(i * 2)}`];
        const timeZaA_FaraWasa = p[`timeDaZaaFaraWasa${(i * 2) - 1}`];       
        if (onlineLink && (logo1 || team1 || logo2 || team2 || timeZaA_FaraWasa)) {
            let gameTimeFormatted = '';
            if (timeZaA_FaraWasa) {
                const gameDate = new Date(timeZaA_FaraWasa);
                if (!isNaN(gameDate.getTime())) {
                    const dayName = daysOfWeek[gameDate.getDay()];
                    const day = gameDate.getDate();
                    const month = gameDate.toLocaleString('ha-NG', { month: 'long' });
                    const year = gameDate.getFullYear();
                    const time = gameDate.toLocaleTimeString('ha-NG', { hour: '2-digit', minute: '2-digit', hour12: true });
                    gameTimeFormatted = `${dayName} ${day} ${month} ${year} ${time}`;
                }
            }
            gameButtonsHtml += `<button class="kaitsaye-game-match-btn" onclick="window.open('${onlineLink}','_blank')">
                <div class="team-info">
                    ${logo1 ? `<img src="${logo1}" alt="Logo Team 1" class="team-logo">` : ''}
                    <span>${team1 || 'Kungiya 1'}</span>
                </div>
                <span class="vs-text">VS</span>
                <div class="team-info">
                    ${logo2 ? `<img src="${logo2}" alt="Logo Team 2" class="team-logo">` : ''}
                    <span>${team2 || 'Kungiya 2'}</span>
                </div>
                <div class="game-time-display">${gameTimeFormatted || ''}</div>
            </button>`;
        }
    }

    let gameLinksSection = "";
    if (gameButtonsHtml) {
        gameLinksSection = `<div class="kaitsaye-game-matches">${gameButtonsHtml}</div>`;
    }
    let media = "";
    let mediaLink = p.audioPostLink || p.rediyoKaiTsayeAudioLink || p.videoLink || p.photoLink;
    if (mediaLink) {
        if ((p.audioPostLink || p.rediyoKaiTsayeAudioLink) && p.photoLink) {
            let audioHtml = "";
            let audioClass = "";
            let audioData = "";
            let isRediyo = !!p.rediyoKaiTsayeAudioLink;          
            if (isRediyo) {
                audioHtml = `<div class="rediyo-kai-tsaye-controls center-overlay">
                    <button class="rediyo-kai-tsaye-button" title="Kunna Rediyo">
                        <i class="fa-solid fa-play"></i>
                    </button>
                </div>`;
                audioClass = "rediyo-kai-tsaye-player has-image";
                audioData = `data-audio="${p.rediyoKaiTsayeAudioLink}" data-is-rediyo="true"`;
            } else {
                audioHtml = `<div class="kaitsaye-audio-player-controls">
                    <button class="audio-play-btn" title="Kunne"><i class="fa-solid fa-play"></i></button>
                    <div class="audio-progress-container">
                        <div class="audio-progress-bar"></div>
                        <input type="range" class="audio-seek-slider" value="0" min="0" max="100" step="0.1">
                    </div>
                    <span class="audio-time">0:00</span>
                </div>`;
                audioClass = "kaitsaye-audio-player-with-image";
                audioData = `data-audio="${p.audioPostLink}"`;
            }
            media = `<div class="${audioClass}" ${audioData} data-postid="${p.postid}">
                <img src="${p.photoLink}" alt="Media Image" class="kaitsaye-media-image">
                <div class="kaitsaye-media-overlay">${audioHtml}</div>
            </div>`;
        } else if (p.rediyoKaiTsayeAudioLink) {
            media = `<div class="rediyo-kai-tsaye-player" data-audio="${p.rediyoKaiTsayeAudioLink}" data-postid="${p.postid}" data-is-rediyo="true">
                <div class="rediyo-kai-tsaye-controls">
                    <button class="rediyo-kai-tsaye-button" title="Kunna Rediyo">
                        <i class="fa-solid fa-play"></i>
                    </button>
                    <div class="rediyo-kai-tsaye-title">Kai Tsaye Rediyo</div>
                </div>
            </div>`;
        } else if (p.audioPostLink) {
            media = `<div class="kaitsaye-audio-player-box" data-audio="${p.audioPostLink}" data-postid="${p.postid}">
                <div class="kaitsaye-audio-player-controls">
                    <button class="audio-play-btn" title="Kunne"><i class="fa-solid fa-play"></i></button>
                    <div class="audio-progress-container">
                        <div class="audio-progress-bar"></div>
                        <input type="range" class="audio-seek-slider" value="0" min="0" max="100" step="0.1">
                    </div>
                    <span class="audio-time">0:00</span>
                </div>
            </div>`;

        } else if (p.videoLink) {
            let videoId = getYouTubeVideoId(p.videoLink);
            let videoSrc = videoId ? `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg` : (p.photoLink || '');           
            media = `<div class="kaitsaye-video-container" data-postid="${p.postid}" data-video-link="${p.videoLink}" data-youtube-id="${videoId || ''}">
                <img src="${videoSrc}" alt="Video Thumbnail" class="video-thumbnail">
                <div class="video-overlay">
                    <i class="fa-solid fa-play video-play-btn" title="Kunna bidiyo"></i>
                    <button class="video-fullscreen-btn" data-videourl="${p.videoLink}" title="Cikakken allo"><i class="fa-regular fa-square"></i></button>
                </div>
            </div>`;
        } else if (p.photoLink) {
            media = `<img src="${p.photoLink}" alt="post-image" class="site5-kaitsaye-image">`;
        }
    }

   
    let mediaBox = "";
    if (media) {
        mediaBox = `<div class="kaitsaye-post-media-box">${media}</div>`;
    }

    
    const postViews = p.see || 0; 
    const postLove = p.love || 0;
    const postComments = p.totalComment || 0;   
    const actionsBar = `<div class="kaitsaye-actions-bar">
        <button class="kaitsaye-action-btn view" title="See"><i class="fa-regular fa-eye"></i> <span class="kaitsaye-action-badge">${formatCount(postViews)}</span></button>
        <button class="kaitsaye-action-btn comment" title="Comment"><i class="fa-regular fa-comment"></i> <span class="kaitsaye-action-badge">${formatCount(postComments)}</span></button>
        <button class="kaitsaye-action-btn love${localStorage.getItem(`site5-loved-${p.postid}`) === "true" ? " active" : ""}" title="Like/Love"><i class="fa-solid fa-heart"></i> <span class="kaitsaye-action-badge">${formatCount(postLove)}</span></button>
    </div>`;

    let contentArr = [];
    if (text) contentArr.push(text);
    if (gameLinksSection) contentArr.push(gameLinksSection);
    if (mediaBox) contentArr.push(mediaBox);
    const c = document.createElement('div');
    c.className = "kaitsaye-post-container";
    c.setAttribute('data-postid', p.postid);
    c.innerHTML = `${topBar}<div class="kaitsaye-content">${contentArr.join("")}</div>${actionsBar}`;   
    setTimeout(() => {
        setupRediyoPlayer(c, p.rediyoKaiTsayeAudioLink, p.postid);
        setupAudioPlayer(c, p.audioPostLink, p.postid);
        setupKaitsayeActions(c, p);
        setupKaitsayeIntersection(c, p); 
    }, 40);    
    return c;
}


function setupKaitsayeActions(container, p) {
    if (!p || !p.postid) return console.error("Missing postid for KaiTsayeActions!");

    const loveBtn = container.querySelector('.kaitsaye-action-btn.love');
    const loveBadge = loveBtn ? loveBtn.querySelector('.kaitsaye-action-badge') : null;
    const LOCAL_LOVED_KEY_PREFIX = `site5-loved-`;
    const loveKey = `${LOCAL_LOVED_KEY_PREFIX}${p.postid}`;
    const hasLoved = localStorage.getItem(loveKey) === "true";

    if (hasLoved && loveBtn) loveBtn.classList.add('active');

   
    if (loveBtn) {
        loveBtn.onclick = async function () {
            if (localStorage.getItem(loveKey) === "true") return;
            loveBtn.classList.add("active");
            localStorage.setItem(loveKey, "true");

            try {
                const loveRef = ref(db, `KaiTsayePost/${p.postid}/love`);
                const snapshot = await get(loveRef);
                const current = snapshot.exists() ? snapshot.val() : 0;
               
                await set(loveRef, current + 1);
              
                if (loveBadge) loveBadge.textContent = formatCount(current + 1);
                showSite5Push("Mun Gode da LikeüòÄ!", "fa-heart", 1800);
            } catch (err) {              
                console.warn("‚ö†Ô∏è Ba a iya rubuta love, amma user ya ga success:", err);
            }
        };
    }

  
    const commentBtn = container.querySelector(".kaitsaye-action-btn.comment");
    if (commentBtn) {
        commentBtn.onclick = function () {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    window.location.href = `comment.html?postId=${p.postid}`;
                } else {
                    showSite5Push("Dole ka yi rigista ko login domin yin comment!", "fa-user-lock");
                }
            });
        };
    }

   
    const dlBtn = container.querySelector(".kaitsaye-action-btn.download");
    if (dlBtn) {
        dlBtn.onclick = async function () {
            let url = p.photoLink || p.videoLink || p.audioPostLink;
            if (!url) return showSite5Push("Babu abin da za a sauke!", "fa-xmark");
            try {
                window.open(url, "_blank");
                showSite5Push("Yana saukewa...", "fa-arrow-down");
            } catch (err) {
                console.error("Error downloading file:", err);
                showSite5Push("An sami matsala wajen sauke file.", "fa-xmark");
            }
        };
    }
}



function setupKaitsayeIntersection(container, p) {
    if (!p || !p.postid) return console.error("Missing postid for KaiTsayeIntersection!");

    const viewBtn = container.querySelector(".kaitsaye-action-btn.view");
    const viewBadge = viewBtn ? viewBtn.querySelector(".kaitsaye-action-badge") : null;
    const viewKey = `kaitsaye-view-${p.postid}`;
    const viewLockKey = `kaitsaye-view-lock-${p.postid}`;

    if (!viewBtn || localStorage.getItem(viewKey) === "true" || localStorage.getItem(viewLockKey) === "true") return;

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(async (entry) => {
            if (entry.isIntersecting) {
                observer.unobserve(container);
                localStorage.setItem(viewLockKey, "true");
                localStorage.setItem(viewKey, "true"); 

                try {
                    const viewRef = ref(db, `KaiTsayePost/${p.postid}/see`);
                    const snapshot = await get(viewRef);
                    const current = snapshot.exists() ? snapshot.val() : 0;

                    await set(viewRef, current + 1);

                    localStorage.removeItem(viewLockKey);
                    if (viewBadge) viewBadge.textContent = formatCount(current + 1);
                } catch (err) {                   
                    localStorage.removeItem(viewLockKey);
                    console.warn("‚ö†Ô∏è Ba a iya rubuta see, amma user bai san ba:", err);
                }
            }
        });
    }, { threshold: 0.5 });

    observer.observe(container);
}




function setupRediyoPlayer(container, audioLink, postId) {
    if (!audioLink) return;
    const rediyoContainer = container.querySelector('.rediyo-kai-tsaye-player');
    const playBtn = rediyoContainer ? rediyoContainer.querySelector('.rediyo-kai-tsaye-button') : null;    
    if (!rediyoContainer || !playBtn) return;    
    let rediyoAudio = null;
    if (currentRediyoAudio && currentRediyoAudio.src === audioLink) {
           rediyoAudio = currentRediyoAudio;
           if (!rediyoAudio.paused) {
               playBtn.innerHTML = '<i class="fa-solid fa-stop"></i>';
               const titleEl = rediyoContainer.querySelector('.rediyo-kai-tsaye-title');
               if (titleEl) titleEl.textContent = 'Yana Kunne...';
           }
    }

    
    playBtn.onclick = () => {
        if (!rediyoAudio) {
            rediyoAudio = new Audio(audioLink);
            rediyoAudio.preload = 'none';
            rediyoAudio.loop = false;
            rediyoAudio.onplay = () => {
                playBtn.innerHTML = '<i class="fa-solid fa-stop"></i>';
                const titleEl = rediyoContainer.querySelector('.rediyo-kai-tsaye-title');
                if (titleEl) titleEl.textContent = 'Yana Kunne...';
                currentRediyoAudio = rediyoAudio;
                stopOtherMedia(rediyoAudio);
            };
            rediyoAudio.onpause = () => {
                playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
                const titleEl = rediyoContainer.querySelector('.rediyo-kai-tsaye-title');
                if (titleEl) titleEl.textContent = 'Kai Tsaye Rediyo';
            };
            rediyoAudio.onended = () => {
                playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
                const titleEl = rediyoContainer.querySelector('.rediyo-kai-tsaye-title');
                if (titleEl) titleEl.textContent = 'An Gama';
                rediyoAudio = null;
                currentRediyoAudio = null;
            };
        }
        if (rediyoAudio.paused) {
            rediyoAudio.play().catch(e => {
                console.error("Rediyo Play Error:", e);
            });
        } else {
            rediyoAudio.pause();
            currentRediyoAudio = null;
        }
    };
}

function setupAudioPlayer(container, audioLink, postId) {
    if (!audioLink) return;
    const audioBox = container.querySelector('.kaitsaye-audio-player-box') || container.querySelector('.kaitsaye-audio-player-with-image');
    if (!audioBox) return;
    const playBtn = audioBox.querySelector('.audio-play-btn');
    const timeEl = audioBox.querySelector('.audio-time');
    const progressBar = audioBox.querySelector('.audio-progress-bar');
    const seekSlider = audioBox.querySelector('.audio-seek-slider');

    
    let postAudio = null;
    let isSeeking = false;
    let positionKey = `audio-position-${postId}`;
    let savedPosition = parseFloat(localStorage.getItem(positionKey)) || 0;    
    if (savedPosition > 0 && timeEl) {
        timeEl.textContent = formatTime(savedPosition) + " / 0:00";
    }
    function formatTime(t) {
        t = Math.floor(t);
        const hours = Math.floor(t / 3600);
        const minutes = Math.floor((t % 3600) / 60);
        const seconds = t % 60;        
        const parts = [];
        if (hours > 0) parts.push(hours.toString().padStart(2, '0'));
        parts.push(minutes.toString().padStart(2, '0'));
        parts.push(seconds.toString().padStart(2, '0'));        
        return parts.join(':');
    }

    
    function loadAudio() {
        if (postAudio) return;      
        postAudio = new Audio(audioLink);
        postAudio.preload = 'metadata';
        postAudio.loop = false;        
        postAudio.onloadedmetadata = () => {
            const durationText = formatTime(postAudio.duration);           
            if (savedPosition > 0 && savedPosition < postAudio.duration) {
                postAudio.currentTime = savedPosition;
                const progress = (postAudio.currentTime / postAudio.duration) * 100;
                progressBar.style.width = `${progress}%`;
                seekSlider.value = progress;
            } else {
                postAudio.currentTime = 0;
            }            
            timeEl.textContent = formatTime(postAudio.currentTime) + " / " + durationText;
            seekSlider.max = 100;
        };
        
        postAudio.ontimeupdate = () => {
            if (!isSeeking && postAudio.duration) {
                const progress = (postAudio.currentTime / postAudio.duration) * 100;
                progressBar.style.width = `${progress}%`;
                seekSlider.value = progress;
                timeEl.textContent = formatTime(postAudio.currentTime) + " / " + formatTime(postAudio.duration);
                localStorage.setItem(positionKey, postAudio.currentTime.toFixed(2));
            }
        };        
        postAudio.onplay = () => {
            playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
            stopOtherMedia(postAudio);
            stopRediyo(postAudio);
        };        
        postAudio.onpause = () => {
            playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
        };       
        postAudio.onended = () => {
            playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
            postAudio.currentTime = 0;
            localStorage.removeItem(positionKey);
            postAudio.pause();
            postAudio = null;
            timeEl.textContent = "0:00";
            progressBar.style.width = `0%`;
            seekSlider.value = 0;
        };

        
        postAudio.onerror = (e) => {
            console.error("Audio Load Error:", e);
            playBtn.innerHTML = '<i class="fa-solid fa-triangle-exclamation"></i>';
            showSite5Push("Kuskuren loda sauti!", "fa-xmark", 3000);
        };       
        postAudio.load();
    }

    
    playBtn.onclick = () => {
        loadAudio();
        if (!postAudio) return;      
        if (postAudio.paused) {
            postAudio.play().catch(e => {
                console.error("Audio Play Error:", e);
            });
        } else {
            postAudio.pause();
        }
    };

    
    seekSlider.onmousedown = () => {
        isSeeking = true;
        loadAudio();
    };    
    seekSlider.onmouseup = () => { isSeeking = false; };    
    seekSlider.onchange = () => {
        if (!postAudio) return;
        if (postAudio.duration) {
            postAudio.currentTime = (parseFloat(seekSlider.value) / 100) * postAudio.duration;
        }
    };    
    seekSlider.oninput = () => {
        if (!postAudio || !postAudio.duration) {
            const progress = parseFloat(seekSlider.value);
            progressBar.style.width = `${progress}%`;
            timeEl.textContent = formatTime((progress / 100) * (postAudio ? postAudio.duration : 0)) + " / " + formatTime(postAudio ? postAudio.duration : 0);
        } else {
            const progress = parseFloat(seekSlider.value);
            progressBar.style.width = `${progress}%`;
            const newTime = (progress / 100) * postAudio.duration;
            timeEl.textContent = formatTime(newTime) + " / " + formatTime(postAudio.duration);
        }
    };
}


function hideLoadingScreen() {
    if (isAppReady) return;      
    const loadingBackdrop = document.getElementById('loading-backdrop');   
        
    setTimeout(() => {
        if (loadingBackdrop) {
            loadingBackdrop.classList.add('hidden');
        } else {
             console.warn("Kuskure: Loading Screen (ID: loading-backdrop) ba'a samo shi ba.");
            
        }
        isAppReady = true;
    }, HIDE_LOADING_TIMEOUT);
}

function initializeApp() {
    if (isFirebaseInitialized) {
        initializeKaitsayePostListener();
        initializeSarkiFeature();
    }
}


function setupFirebaseAndInit() {
    const loadingBackdrop = document.getElementById('loading-backdrop');
    if (loadingBackdrop) {
        loadingBackdrop.classList.remove('hidden');
    }
    
    try {
        if (!navigator.onLine) {
            console.log("Offline mode: Retrying Firebase initialization in 1 minute.");
            setTimeout(setupFirebaseAndInit, OFFLINE_RETRY_DELAY);
            
            if (!isInitialDataLoaded) {
                hideLoadingScreen();
                isInitialDataLoaded = true;
            }
            return;
        }
        
        if (!isFirebaseInitialized) {
            isFirebaseInitialized = true;
            initializeKaitsayePostListener(true); 
            initializeSarkiFeature(); 
        }

        onAuthStateChanged(auth, (user) => {
             if (user) {
                
             }
        });
        
    } catch (error) {
        console.error("Firebase init error:", error);
        console.log("Falling back to Offline mode: Retrying in 1 minute.");
        
        setTimeout(setupFirebaseAndInit, OFFLINE_RETRY_DELAY);
        
        if (!isInitialDataLoaded) {
            hideLoadingScreen();
            isInitialDataLoaded = true;
        }
    }
}

function initializeKaitsayePostListener(isInitialCall = false) {
    showKaitsayeLoading();

    if (!kaitsayeRef) {
        console.error("kaitsayeRef ba'a ayyana shi ba!");
        if (isInitialCall && !isInitialDataLoaded) {
             hideLoadingScreen();
             isInitialDataLoaded = true;
        }
        return;
    }
    
    onValue(kaitsayeRef, (snap) => {
        let postFromFirebase = null;
        if (snap.exists()) {
            postFromFirebase = snap.val();
        }
              
        if (!isInitialDataLoaded) {
            hideLoadingScreen();
            isInitialDataLoaded = true;
        }

        if (!postFromFirebase || !postFromFirebase.postid ||
            (!postFromFirebase.text && !postFromFirebase.photoLink && !postFromFirebase.videoLink &&
             !postFromFirebase.audioPostLink && !postFromFirebase.rediyoKaiTsayeAudioLink && !postFromFirebase.onlineLink1)) {
            
            site5.innerHTML = "";
            clearAllPostSpecificLocalStorage();
            lastFetchedPostId = null;
            showKaitsayeEmptyState();
            return;
        }

        const currentPostId = postFromFirebase.postid;
        if (currentPostId !== lastFetchedPostId) {
            if (lastFetchedPostId !== null) {
                const oldViewKey = `kaitsaye-view-${lastFetchedPostId}`;
                const oldLovedKey = `site5-loved-${lastFetchedPostId}`;
                const oldAudioKey = `audio-position-${lastFetchedPostId}`;
                localStorage.removeItem(oldViewKey);
                localStorage.removeItem(oldLovedKey);
                localStorage.removeItem(oldAudioKey);
            }
            if (lastFetchedPostId !== null) {
                pushNewPostNotification(postFromFirebase);
            }
            lastFetchedPostId = currentPostId;
        }

        postFromFirebase.see = postFromFirebase.see || 0;
        postFromFirebase.love = postFromFirebase.love || 0;
        postFromFirebase.commentCount = postFromFirebase.totalComment || 0;
        renderAndCachePost(postFromFirebase);
    }, (error) => {
        console.error("Kuskure wajen loda posts:", error);
        if (!isInitialDataLoaded) {
            hideLoadingScreen();
            isInitialDataLoaded = true;
        }
    });
}



function setupVideoPlayers(container) {
    const videoContainer = container.querySelector('.kaitsaye-video-container');
    if (!videoContainer) return;
    const videoId = videoContainer.dataset.youtubeId;
    const nativeVideo = videoContainer.querySelector('video');
    const thumbnail = videoContainer.querySelector('.video-thumbnail');
    const playBtn = videoContainer.querySelector('.video-play-btn');
    const fullscreenBtn = videoContainer.querySelector('.video-fullscreen-btn');
    const videoOverlay = videoContainer.querySelector('.video-overlay');
    
    if (videoId) {
        const loadAndPlayYouTube = () => {
            loadYouTubeIframe(videoContainer, videoId);
        };
        if (playBtn) {
            playBtn.onclick = loadAndPlayYouTube;
        }
        if (thumbnail) {
            thumbnail.onclick = loadAndPlayYouTube;
        }
        if (fullscreenBtn) {
            fullscreenBtn.onclick = () => {
                const videoSrc = `https://www.youtube.com/embed/${videoId}?autoplay=1&fs=1&modestbranding=1&playsinline=1&color=white`;
                handleKaitsayeVideoFullscreen(videoSrc, true);
            };
        }
    } else if (nativeVideo) {
        setupVideoAutoPlay(container);
        const toggleNativeVideoPlay = () => {
            handleKaitsayeVideoPlay(nativeVideo, playBtn);
        };
        if (playBtn) {
            playBtn.onclick = toggleNativeVideoPlay;
        }
        if (fullscreenBtn) {
            fullscreenBtn.onclick = () => {
                handleKaitsayeVideoFullscreen(nativeVideo.src, false);
            };
        }
        nativeVideo.onclick = toggleNativeVideoPlay;
        nativeVideo.onplay = () => {
            if (playBtn) playBtn.classList.add('playing');
            if (videoOverlay) videoOverlay.style.display = 'none';
        };
        nativeVideo.onpause = () => {
            if (playBtn) playBtn.classList.remove('playing');
            if (videoOverlay) videoOverlay.style.display = 'flex';
        };
    }
}
function loadYouTubeIframe(videoContainer, videoId) {
    if (videoContainer.querySelector('iframe.site5-kaitsaye-video')) {
        return;
    }
    const thumbnail = videoContainer.querySelector('.video-thumbnail');
    const videoOverlay = videoContainer.querySelector('.video-overlay');
    if (thumbnail) thumbnail.style.display = 'none';
    if (videoOverlay) videoOverlay.style.display = 'none';
    const iframe = document.createElement('iframe');
    iframe.className = 'site5-kaitsaye-video';
    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&fs=1&modestbranding=1&playsinline=1&color=white`;
    iframe.setAttribute('frameborder', '0');
    iframe.setAttribute('allowfullscreen', 'true');
    iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen');
    while (videoContainer.firstChild) {
        videoContainer.removeChild(videoContainer.firstChild);
    }
    videoContainer.appendChild(iframe);
}
function handleKaitsayeVideoPlay(videoElement, playBtn) {
    if (videoElement.paused) {
        videoElement.play().catch(e => console.error("Video play error:", e));
    } else {
        videoElement.pause();
    }
}
function handleKaitsayeVideoFullscreen(videoSrc, isYouTube) {
    if (!kaitsayeVideoFullscreenViewer) {
        kaitsayeVideoFullscreenViewer = document.createElement('div');
        kaitsayeVideoFullscreenViewer.className = 'kaitsaye-video-fullscreen-viewer';
        document.body.appendChild(kaitsayeVideoFullscreenViewer);
        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement) {
                kaitsayeVideoFullscreenViewer.classList.remove('active');
                kaitsayeVideoFullscreenViewer.innerHTML = '';
                document.body.style.overflow = '';
            }
        });
    }
    let mediaElement;
    if (isYouTube) {
        const iframe = document.createElement('iframe');
        iframe.className = 'kaitsaye-fullscreen-video-frame';
        iframe.src = videoSrc;
        iframe.setAttribute('frameborder', '0');
        iframe.setAttribute('allowfullscreen', 'true');
        iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen');
        mediaElement = iframe;
    } else {
        const video = document.createElement('video');
        video.className = 'kaitsaye-fullscreen-video-frame';
        video.src = videoSrc;
        video.setAttribute('controls', 'true');
        video.setAttribute('playsinline', 'true');
        mediaElement = video;
    }
    const closeBtn = document.createElement('button');
    closeBtn.className = 'kaitsaye-video-fullscreen-close-btn';
    closeBtn.innerHTML = '<i class="fa-solid fa-xmark"></i>';
    closeBtn.onclick = function() {
        if (document.fullscreenElement) {
            document.exitFullscreen();
        } else {
            kaitsayeVideoFullscreenViewer.classList.remove('active');
            document.body.style.overflow = '';
            kaitsayeVideoFullscreenViewer.innerHTML = '';
        }
    };
    kaitsayeVideoFullscreenViewer.innerHTML = ''; kaitsayeVideoFullscreenViewer.appendChild(closeBtn); kaitsayeVideoFullscreenViewer.appendChild(mediaElement); kaitsayeVideoFullscreenViewer.classList.add('active');
    document.body.style.overflow = 'hidden';
    
    if (kaitsayeVideoFullscreenViewer.requestFullscreen) {
        kaitsayeVideoFullscreenViewer.requestFullscreen().catch(err => {
            console.log(`Error attempting to enable fullscreen: ${err.message} (${err.name})`);
        });
    }
    if (!isYouTube) {
        mediaElement.play().catch(e => console.error("Fullscreen video play error:", e));
    }
}
function setupVideoAutoPlay(container) {
    const videoElement = container.querySelector('.site5-kaitsaye-video');
    if (!videoElement || videoElement.tagName !== 'VIDEO') return;
    videoElement.preload = "auto";
    videoElement.muted = true;
    videoElement.playsInline = true;	
    const videoObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                videoElement.play().catch(e => console.error("Video autoplay failed:", e));
            } else {
                videoElement.pause();
            }
        });
    }, {
        threshold: 0.6
    });
    videoObserver.observe(videoElement);
}

function updateMediaSession(audioElement, title, postId) {
    if ('mediaSession' in navigator) {
        const metadataTitle = title;
        let artworkSrc = 'https://i.imgur.com/CgvdgMA.png';
        const postElement = document.querySelector(`.kaitsaye-post-container[data-postid="${postId}"]`);	
        if (postElement) {
            const imageElement = postElement.querySelector('.kaitsaye-media-image');
            if (imageElement) {
                artworkSrc = imageElement.src;
            }
        }
        navigator.mediaSession.metadata = new MediaMetadata({
            title: metadataTitle,
            artist: 'Kai Tsaye',
            album: 'Live Stream',
            artwork: [
                { src: artworkSrc, sizes: '96x96', type: 'image/png' },
                { src: artworkSrc, sizes: '128x128', type: 'image/png' },
                { src: artworkSrc, sizes: '192x192', type: 'image/png' },
                { src: artworkSrc, sizes: '256x256', type: 'image/png' },
                { src: artworkSrc, sizes: '384x384', type: 'image/png' },
                { src: artworkSrc, sizes: '512x512', type: 'image/png' },
            ]
        });
        navigator.mediaSession.playbackState = 'playing';
        if (!mediaSessionInitialized) {
            navigator.mediaSession.setActionHandler('play', () => {
                if (currentRediyoAudio && currentRediyoAudio.paused) {
                    currentRediyoAudio.play();
                } else if (currentPlayingAudio && currentPlayingAudio.paused) {
                    currentPlayingAudio.play();
                }
                const activePlayer = currentRediyoAudio || currentPlayingAudio;
                if (activePlayer) {
                    const btn = document.querySelector(`[data-postid="${activePlayer.dataset.postid}"] .fa-play`);
                    if (btn) btn.classList.replace('fa-play', 'fa-pause');
                }
                navigator.mediaSession.playbackState = 'playing';
            });
            navigator.mediaSession.setActionHandler('pause', () => {
                if (currentRediyoAudio && !currentRediyoAudio.paused) {
                    currentRediyoAudio.pause();
                } else if (currentPlayingAudio && !currentPlayingAudio.paused) {
                    currentPlayingAudio.pause();
                }
                const activePlayer = currentRediyoAudio || currentPlayingAudio;
                if (activePlayer) {
                    const btn = document.querySelector(`[data-postid="${activePlayer.dataset.postid}"] .fa-pause`);
                    if (btn) btn.classList.replace('fa-pause', 'fa-play');
                }
                navigator.mediaSession.playbackState = 'paused';
            });
            navigator.mediaSession.setActionHandler('stop', () => {
                if (currentRediyoAudio && !currentRediyoAudio.paused) {
                    currentRediyoAudio.pause();
                    currentRediyoAudio.currentTime = 0;
                    currentRediyoAudio = null;
                } else if (currentPlayingAudio && !currentPlayingAudio.paused) {
                    currentPlayingAudio.pause();
                    currentPlayingAudio.currentTime = 0;
                    currentPlayingAudio = null;
                }
                const activePlayer = currentRediyoAudio || currentPlayingAudio;
                if (activePlayer) {
                    const btn = document.querySelector(`[data-postid="${activePlayer.dataset.postid}"] .fa-pause`);
                    if (btn) btn.classList.replace('fa-pause', 'fa-play');
                }
                if ('mediaSession' in navigator) {
                    navigator.mediaSession.metadata = null;	navigator.mediaSession.playbackState = 'none';
                }
            });
            mediaSessionInitialized = true;
        }
    }
}

function loadKaitsayeLocal() {
    showKaitsayeLoading();
    initializeKaitsayePostListener(); 
}




function loadFromLocalStorage(key, renderFunc, targetEl) {
    try {
        const data = JSON.parse(localStorage.getItem(key));
        if (data) {
            const content = renderFunc(data);
            if (content) targetEl.appendChild(content);
        }
    } catch (e) {
        localStorage.removeItem(key);
    }
}
function saveAndRender(key, data, renderFunc, targetEl) {
    localStorage.setItem(key, JSON.stringify(data));
    targetEl.innerHTML = "";
    const content = renderFunc(data);
    if (content) targetEl.appendChild(content);
}

function initializeSarkiFeature() {
    loadFromLocalStorage(SARKI_KEY, renderSarki, site4);
    
    onValue(sarkiRef, (snap) => {
        if (!snap.exists()) {
            site4.innerHTML = "";
            localStorage.removeItem(SARKI_KEY);
            return;
        }
        const data = snap.val();
        if (!data.isActive) {
            site4.innerHTML = "";
            return;
        }
        saveAndRender(SARKI_KEY, data, renderSarki, site4);
    });
}

function renderSarki(data) {
    const d = data;
    if (!d) return null;
    
    let fullname = d.fullName || "Sarki";
    let tabTitle = `
    <div class="sarki-tab-container">
        <div class="sarki-tab-title tab1">
            üî• Sarkin Wannan Mako <span class="sarki-tab-name">${escapeHTML(fullname)}</span>
        </div>
    </div>
    `;
    
    let hasBG = !!d.banaimageSarkiLink && d.banaimageSarkiLink !== "";
    let bg = hasBG ?
        `<img src="${d.banaimageSarkiLink}" class="sarki-bg" alt="sarki-bg" onerror="this.style.display='none'">` :
        `<div class="sarki-bg-fallback"><span>
            <img src="https://i.imgur.com/wFVp0uj.png" class="sarkiIm">
        </span></div>`;
    
    let scoreRow = `
        <div class="sarki-score-row">
            <p> <img src="${d.team1Logo}" class="sarki-score-logo" alt="game1logo">
            <span class="sarki-score-team">${d.team1Name || ""}</span></p><p>
            <span>VS</span></p><p>
            <img src="${d.team2Logo}" class="sarki-score-logo" alt="game2logo">
            <span class="sarki-score-team">${d.team2Name || ""}</span><p>
        </div>
    `;
    
    const COMMENT_CHAR_LIMIT = 72;
    let commentHTML = "";
    if (d.commentText && d.commentText.length > 0) {
        let fullText = escapeHTML(d.commentText);
        let displayableText = fullText;
        let readMoreBtn = "";
        if (fullText.length > COMMENT_CHAR_LIMIT) {
            displayableText = fullText.substring(0, COMMENT_CHAR_LIMIT) + '...';
            readMoreBtn = `<span class="read-more-btn">Kara Karantawa</span>`;
        }
        commentHTML = `
        <div class="sarki-comment">
            <p class="comment-text">${displayableText}</p>
            ${readMoreBtn}
            <p class="full-comment-text" style="display:none;">${fullText}</p>
        </div>
        `;
    }
    
    let timeTxt = "";
    if (d.commentTime) {
        let t = new Date(d.commentTime);
        if (!isNaN(t.getTime())) {
            let dstr = `${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours()%12||12}:${t.getMinutes().toString().padStart(2,"0")} ${t.getHours()<12?"AM":"PM"}`;
            timeTxt = dstr;
        }
    }
    
    let audioRow = "";
    if (d.audioLink) {
        audioRow = `
        <div class="sarki-audio-row" data-sarki-audio-link="${d.audioLink}">
            <img src="${d.profileLogo||'./profile.png'}" class="sarki-audio-profile" alt="profile">
            <button class="sarki-audio-play-btn"><i class="fa-solid fa-play"></i></button>
            <span class="sarki-audio-status">Kunna Sauti</span>
            <img src="${d.teamLogo||'./club.png'}" class="sarki-audio-clublogo" alt="club">
        </div>
        `;
    }
        
    let loved = localStorage.getItem("sarki-loved");
    let loveCountVal = Number(d.sarkiLove);
    if (!loveCountVal || loveCountVal < 100) loveCountVal = 100;
    let profileImage = d.profileLogo || "./profile.png";
    let teamLogo = d.teamLogo || "./club.png";
    
    let c = document.createElement('div');
    c.style.position = "relative";
    c.innerHTML = `
        ${tabTitle}
        <div class="sarki-container">
            ${bg}
            <div class="sarki-overlay">
                <div class="sarki-top">
                    <div class="sarki-info">
                        <div class="sarki-fullname">${escapeHTML(fullname)}</div>
                        <div class="sarki-congrats">${d.congratsMessage || "Murna da nasara!"}</div>
                        ${scoreRow}
                        ${commentHTML}
                        ${audioRow}
                        <div class="sarki-time">Lokacin Nasara: ${timeTxt || ""}</div>
                    </div>
                    <div class="sarki-profile">
                        <img src="${profileImage}" class="sarki-profile-img" alt="Hoto na Sarki" id="sarki-profile-img">
                        <img src="${teamLogo}" class="sarki-club-img" alt="Logo na Kungiya">
                        <div class="sarki-user-info">
                            <img src="${profileImage}" class="sarki-user-profile-logo" alt="logo"/>
                            <span class="sarki-username">${escapeHTML(fullname)}</span>
                        </div>
                    </div>
                </div>
                <div class="sarki-bottom">
                    <button class="sarki-love-btn${loved ? " loved" : ""}" id="sarki-love-btn" ${loved ? "disabled" : ""} title="So">
                        <i class="fa-solid fa-heart"></i>
                    </button>
                    <span class="sarki-love-count" id="sarki-love-count">${sarkiFormatNum(loveCountVal)}</span>
                </div>
            </div>
        </div>
    `;
    const readMoreBtn = c.querySelector('.read-more-btn');
    if (readMoreBtn) {
        const commentTextEl = c.querySelector('.comment-text');
        const fullCommentTextEl = c.querySelector('.full-comment-text');
        readMoreBtn.onclick = () => {
            commentTextEl.textContent = fullCommentTextEl.textContent;
            readMoreBtn.style.display = 'none';
        };
    }
    
    let btn = c.querySelector('#sarki-love-btn');
    let likeLock = false;
    if (btn && !loved) {
        btn.onclick = () => {
            if (likeLock) return;
            likeLock = true;
            let loveRef = ref(db, "Sarki/sarkiLove");
            
            get(loveRef).then(snap => {
                let val = snap.exists() ? Number(snap.val()) : 100;
                if (!val || val < 100) val = 100;
                let newLoveCount = val + 1;
                
                let el = c.querySelector('#sarki-love-count');
                if (el) el.textContent = sarkiFormatNum(newLoveCount);
                
                return set(loveRef, newLoveCount).then(() => {
                    localStorage.setItem("sarki-loved", "1");
                    btn.classList.add("loved");
                    btn.disabled = true;
                });
            }).catch(error => {
                console.error("Error updating sarki love:", error);
                
                let el = c.querySelector('#sarki-love-count');
                if (el) el.textContent = sarkiFormatNum(loveCountVal);
            }).finally(() => {
                likeLock = false;
            });
        };
    }
    
    onValue(ref(db, "Sarki/sarkiLove"), (snap) => {
        let el = c.querySelector('#sarki-love-count');
        if (snap.exists() && el) {
            let v = Number(snap.val());
            if (!v || v < 100) v = 100;
            el.textContent = sarkiFormatNum(v);
        }
    });
    const imgBtn = c.querySelector('#sarki-profile-img');
    if (imgBtn) {
        imgBtn.onclick = function() {
            showSarkiProfileModal(profileImage, teamLogo, fullname);
        };
    }
    
    const audioRowEl = c.querySelector('.sarki-audio-row');
    if (audioRowEl) {
        const audioLink = audioRowEl.getAttribute('data-sarki-audio-link');
        const playBtn = audioRowEl.querySelector('.sarki-audio-play-btn');
        const statusEl = audioRowEl.querySelector('.sarki-audio-status');
        let sarkiAudio = null;
        playBtn.onclick = () => {
            if (!sarkiAudio) {
                sarkiAudio = new Audio(audioLink);
                sarkiAudio.preload = 'metadata';
                sarkiAudio.onplay = () => {
                    playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
                    statusEl.textContent = 'Yana Kunne...';
                    stopOtherMedia(sarkiAudio);
                };
                sarkiAudio.onpause = () => {
                    playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
                    statusEl.textContent = 'Dakatarwa';
                };
                sarkiAudio.onended = () => {
                    playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
                    statusEl.textContent = 'An Gama';
                    
                    sarkiAudio = null;
                };
            }
            
            if (sarkiAudio.paused) {
                sarkiAudio.play().catch(e => {
                    console.error("Sarki Audio Play Error:", e);
                    statusEl.textContent = 'Gagara Kunna';
                    playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
                });
            } else {
                sarkiAudio.pause();
            }
        };
    }    
    return c;
}

function showSarkiProfileModal(profileImg, clubLogo, sarkiName) {
    const modal = document.getElementById('sarki-profile-modal');
    const img = document.getElementById('sarki-modal-profile-img');
    const club = document.getElementById('sarki-modal-club-img');
    const userNameEl = modal.querySelector('#sarki-modal-username');
    if (!modal || !img || !club || !userNameEl) return;
    img.src = profileImg || "";
    club.src = clubLogo || "";
    userNameEl.textContent = sarkiName || 'Sarki';
    modal.classList.add('show');
    modal.style.display = "flex";
}

function hideSarkiProfileModal() {
    const modal = document.getElementById('sarki-profile-modal');
    if (modal) {
        modal.classList.remove('show');
        modal.style.display = "none";
    }
}

document.getElementById('sarki-profile-modal-close').onclick = hideSarkiProfileModal;

document.querySelector('#sarki-profile-modal .sarki-modal-overlay').onclick = hideSarkiProfileModal;

setupFirebaseAndInit();


let kaitsayeVideoFullscreenViewer = null;
let mediaSessionInitialized = false;
let site6AllGames = {};
let site6DayKeys = [];
let site6DayIndex = 0;
let site6IsFirebaseLoaded = false;
let site6LiveIntervalId = null;
let site6HourlyCheckIntervalId = null;
let site6TimeCounterIntervalId = null;
let site6FirebaseInitialLoadDone = false;
let site6LastLoadTime = 0;
let site6IsProcessingHourlyRequest = false;
let site6IsLiveApiRequesting = false;

const CARD_PER_CHUNK = 2;
const ONE_MINUTE = 60000;
const ONE_HOUR = 3600000;

const MAX_MATCH_TIME_SECONDS = 120 * 60; 
const LABARI_KEY = "site6_labariGame";
const REQUEST_API_URL = "https://tauraronwasaadmin.pages.dev/api/site6";
const REQUEST_KEY = "@haruna66";
const DAY_TEXT_MAP = {
    'day_0': 'Jiya',
    'day_1': 'Yau',
    'day_2': 'Gobe',
    'day_3': 'Jibi',
    'day_4': 'Gata',
    'day_5': '‚û°Ô∏è'
};
let FIREBASE_FIXTURES_REF = null;
let FIREBASE_META_REF = null;



function site6UpdateScrollButtons() {
    if (!site6Scroller || !site6ScrollLeft || !site6ScrollRight) return;
    const { scrollLeft, scrollWidth, clientWidth } = site6Scroller;
    
    site6ScrollLeft.style.opacity = scrollLeft > 10 ? '1' : '0';
    site6ScrollLeft.style.pointerEvents = scrollLeft > 10 ? 'auto' : 'none';
    
    const isEnd = scrollWidth - scrollLeft - clientWidth < 10;
    site6ScrollRight.style.opacity = isEnd ? '0' : '1';
    site6ScrollRight.style.pointerEvents = isEnd ? 'none' : 'auto';
}
function site6Scroll(direction) {
    if (site6Scroller) {
        const chunkWidth = site6Scroller.querySelector('.wasanni-card-chunk')?.clientWidth || site6Scroller.clientWidth;
        site6Scroller.scrollBy({
            left: direction * chunkWidth,
            behavior: 'smooth'
        });
        setTimeout(site6UpdateScrollButtons, 350);
    }
}
function site6GetTodayKey() {
    const now = new Date();	
    const todayStr = new Date(now.getTime() - (now.getTimezoneOffset() * 60000)).toISOString().split("T")[0];
    
    for (const key of site6DayKeys) {
        const dayData = site6AllGames[key];
        if (dayData && dayData.date === todayStr) {
            return key;
        }
    }
 
    return 'day_1';
}
function site6FormatDateDisplay(dateKey, dateStr) {
    const dayText = DAY_TEXT_MAP[dateKey] || '';
    const date = new Date(dateStr + 'T00:00:00');
    const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
    const formattedDate = new Intl.DateTimeFormat('ha-NG', options).format(date);
    if (dayText) {
        return `${dayText} (${formattedDate})`;
    }
    return formattedDate;
}
function site6ParseUTCDate(timestamp) {
    const parts = timestamp.replace('Z', '').split('T');
    if (parts.length !== 2) return null;
    const dateParts = parts[0].split('-').map(Number);
    const timeParts = parts[1].split(':').map(Number);
    if (dateParts.length < 3 || timeParts.length < 3) return null;
    const date = new Date();
    date.setUTCFullYear(dateParts[0], dateParts[1] - 1, dateParts[2]);
    date.setUTCHours(timeParts[0], timeParts[1], timeParts[2], 0);
    return date;
}
function site6FormatGameTime(timestamp) {
    const date = site6ParseUTCDate(timestamp);
    if (!date || isNaN(date.getTime())) {
        return "Lokaci Kuskure";
    }
    const hourOptions = { hour: 'numeric', minute: 'numeric', hour12: true };
    const hourTime = new Intl.DateTimeFormat('ha-NG', hourOptions).format(date);
    return hourTime;
}
function site6ShowLoader(show) {
    if (site6Loader) site6Loader.style.display = show ? "block" : "none";
    if (site6Section) site6Section.style.display = show ? "none" : "block";
}
function site6UpdateDayDisplay(dateKey, dateStr) {
    if (site6DateDisplay) {
        site6DateDisplay.textContent = site6FormatDateDisplay(dateKey, dateStr);
    }
}
function site6GetNoMatchMessage(dateKey) {
    const dayText = DAY_TEXT_MAP[dateKey] || 'Wannan Rana';
    if (dateKey === 'day_0') {
        return `**Babu wani babban wasa da aka buga ${dayText}.**`;
    } else if (dateKey === 'day_1') {
        return `**Babu wani babban wasa da za a buga ${dayText}.**`;
    } else {
        return `**Babu wani babban wasa da za a buga a ${dayText}.**`;
    }
}
function site6ChangeDay(direction) {
    const newIndex = site6DayIndex + direction;
    if (newIndex >= 0 && newIndex < site6DayKeys.length) {
        site6DayIndex = newIndex;
        site6RenderGames();
    }
}



function site6GetLiveMatchTime(match) {
    if (match.status === 'PAUSED') return 'Stop';
    
    let totalSeconds = 0;
  
    let elapsedMinutesFromApi = match.score?.halfTime?.elapsed || match.score?.fullTime?.elapsed || match.score?.extraTime?.elapsed;
    
    if (elapsedMinutesFromApi !== undefined && elapsedMinutesFromApi !== null) {
        totalSeconds = elapsedMinutesFromApi * 60;
    } else {
        
        const startDate = site6ParseUTCDate(match.utcDate);
        if (!startDate) return "Live";
        
        const diffInMilliseconds = new Date() - startDate;
        totalSeconds = Math.floor(diffInMilliseconds / 1000);
    }
    
    if (totalSeconds < 0) totalSeconds = 0;    
   
    if (totalSeconds > MAX_MATCH_TIME_SECONDS) { 
       
        totalSeconds = MAX_MATCH_TIME_SECONDS; 
    }
  
    match.liveTime_initialSeconds = totalSeconds; 
    match.liveTime_lastUpdated = new Date().getTime(); 
    
    const minutes = Math.floor(totalSeconds / 60);
    const seconds = totalSeconds % 60;
    
    const paddedMinutes = (minutes < 10 && minutes >= 0) ? minutes.toString().padStart(2, '0') : minutes.toString();
    const paddedSeconds = seconds.toString().padStart(2, '0');
    
    return `${paddedMinutes}:${paddedSeconds}`;
}


function site6UpdateGameCard(newGame) {
    const cardElement = document.getElementById(`match-${newGame.id}`);
    if (!cardElement) return;
    const status = newGame.status;
    const isLive = ["IN_PLAY", "PAUSED"].includes(status);
    const scoreSpan = cardElement.querySelector('.wasanni-vs');
    if (scoreSpan) {
        let scoreToDisplay = 'VS';
        if (status === 'FINISHED' && newGame.score?.fullTime) {
            const home = newGame.score.fullTime.home ?? '';
            const away = newGame.score.fullTime.away ?? '';
            scoreToDisplay = `${home} - ${away}`;
        } else if (isLive) {
            const home = newGame.score?.halfTime?.home ?? newGame.score?.fullTime?.home ?? 0;
            const away = newGame.score?.halfTime?.away ?? newGame.score?.fullTime?.away ?? 0;
            scoreToDisplay = `${home} - ${away}`;
        }
        scoreSpan.textContent = scoreToDisplay;
    }
    const timeDiv = cardElement.querySelector('.wasanni-time');
    const statusDiv = cardElement.querySelector('.wasanni-status');
    if (timeDiv && statusDiv) {
        const liveTime = site6GetLiveMatchTime(newGame);
        timeDiv.innerHTML = isLive 
            ? `<span class="site6-live-dot"></span> <span class="site6-live-time-counter">${liveTime}</span>`
            : site6FormatGameTime(newGame.utcDate);
            
        statusDiv.textContent = isLive ? `Live` : newGame.status === 'FINISHED' ? 'An Gama' : "Za'a Buga";
        
        cardElement.className = "wasanni-card" + 
            (newGame.status === 'FINISHED' ? " site6-finished" : "") +
            (isLive ? " site6-live" : "");
    }
    
  
    if (newGame.status === 'FINISHED' || isLive || newGame.status === 'TIMED' || newGame.status === 'SCHEDULED') {
        localStorage.setItem(LABARI_KEY + newGame.id, JSON.stringify({
            matchId: newGame.id,
            homeTeam: newGame.homeTeam?.name,
            awayTeam: newGame.awayTeam?.name,
            homeCrest: newGame.homeTeam?.crest,
            awayCrest: newGame.awayTeam?.crest,
            utcDate: newGame.utcDate,
            status: newGame.status,
            score: newGame.score || null 
        }));
    }
}
function site6StopLiveTimeCounters() {
    if (site6TimeCounterIntervalId) {
        clearInterval(site6TimeCounterIntervalId);
        site6TimeCounterIntervalId = null;
    }
}

function site6StartLiveTimeCounters() {
    if (site6TimeCounterIntervalId) return;    
       
    site6TimeCounterIntervalId = setInterval(() => {
        
        const liveGames = site6AllGames[site6DayKeys[site6DayIndex]]?.matches.filter(g => g.status === 'IN_PLAY');
        
        if (liveGames && liveGames.length > 0) {
            liveGames.forEach(g => {
                const cardElement = document.getElementById(`match-${g.id}`);
                if (!cardElement) return;
                
                const timeCounterSpan = cardElement.querySelector('.site6-live-time-counter');
                if (timeCounterSpan) {
                    
                    const lastUpdated = g.liveTime_lastUpdated;
                    const initialSeconds = g.liveTime_initialSeconds; 
                    
                    if (initialSeconds === undefined || lastUpdated === undefined) {
                        site6GetLiveMatchTime(g);
                        return; 
                    }

                    const timeSinceLastUpdate = new Date().getTime() - lastUpdated;
                    const secondsToAdd = Math.floor(timeSinceLastUpdate / 1000);
                    let currentTotalSeconds = initialSeconds + secondsToAdd;
                                       
                    if (currentTotalSeconds > MAX_MATCH_TIME_SECONDS) {
                         currentTotalSeconds = MAX_MATCH_TIME_SECONDS;
                    }
                  
                    
                    if (currentTotalSeconds >= 0) {
                        const minutes = Math.floor(currentTotalSeconds / 60);
                        
                        const minutesStr = (minutes < 10 && minutes >= 0) ? minutes.toString().padStart(2, '0') : minutes.toString();
                        
                        const seconds = (currentTotalSeconds % 60).toString().padStart(2, '0');
                        timeCounterSpan.textContent = `${minutesStr}:${seconds}`;
                    }
                }
            });
        }
    }, 1000);
}


function site6CreateGameCard(game) {
    const c = document.createElement('div');
    c.id = `match-${game.id}`;
    
    const status = game.status;
    const isLive = ["IN_PLAY", "PAUSED"].includes(status);
    const isFinished = ["FINISHED"].includes(status);
    const isScheduled = ["SCHEDULED", "TIMED"].includes(status);
    
    let cardClass = "wasanni-card";
    if (isFinished) cardClass += " site6-finished";
    else if (isLive) cardClass += " site6-live";
    c.className = cardClass;
    
    let scoreDisplay = 'VS';
    let liveTime = '';
    let statusText = "Za'a Buga";
    let currentHomeScore = game.score?.fullTime?.home;
    let currentAwayScore = game.score?.fullTime?.away;
    let displayTime = site6FormatGameTime(game.utcDate);
    if (isFinished) {
        scoreDisplay = `${currentHomeScore ?? ''} - ${currentAwayScore ?? ''}`;
        statusText = "An Gama";
    } else if (isLive) {
        let liveHome = game.score?.halfTime?.home ?? currentHomeScore;
        let liveAway = game.score?.halfTime?.away ?? currentAwayScore;
        liveHome = liveHome !== undefined && liveHome !== null ? liveHome : '0';
        liveAway = liveAway !== undefined && liveAway !== null ? liveAway : '0';
        scoreDisplay = `${liveHome} - ${liveAway}`;
        liveTime = site6GetLiveMatchTime(game);
        statusText = isLive && game.status === 'PAUSED' ? 'Pause' : 'Live';
    } else if (isScheduled) {
        scoreDisplay = 'VS';
        statusText = "Za'a Buga";
    }
    c.innerHTML = `
        <div class="wasanni-teams">
            <div class="wasanni-team">
                <img class="wasanni-team-logo" src="${game.homeTeam.crest || 'placeholder.png'}" alt="${game.homeTeam.name}">
                <span class="wasanni-team-name">${game.homeTeam.name}</span>
            </div>
            <span class="wasanni-vs">${scoreDisplay}</span>
            <div class="wasanni-team">
                <img class="wasanni-team-logo" src="${game.awayTeam.crest || 'placeholder.png'}" alt="${game.awayTeam.name}">
                <span class="wasanni-team-name">${game.awayTeam.name}</span>
            </div>
        </div>
        <div class="wasanni-info">
            <div class="wasanni-time" style="font-size: 1.1em; font-weight: bold; color: #ffeb3b;">
                ${isLive ? `<span class="site6-live-dot"></span> <span class="site6-live-time-counter">${liveTime}</span>` : displayTime}
            </div>
            <div class="wasanni-league">${game.competition.name || 'Unknown League'}</div>
            <div class="wasanni-status">${statusText}</div>
        </div>
    `;
    c.onclick = () => {
        const matchDataForLabari = {
            matchId: game.id,
            homeTeam: game.homeTeam.name,
            awayTeam: game.awayTeam.name,
            utcDate: game.utcDate,
            homeCrest: game.homeTeam.crest || 'placeholder.png', 
            awayCrest: game.awayTeam.crest || 'placeholder.png',
            status: game.status, 
            score: game.score 
        };
        
        localStorage.setItem(LABARI_KEY + game.id, JSON.stringify(matchDataForLabari)); 
        localStorage.setItem(LABARI_KEY, JSON.stringify(matchDataForLabari));
        
        window.location.href = `labarinWasa.html?id=${game.id}`;
    };
    return c;
}

function site6RenderGames(newData = null) {
    const dateKey = site6DayKeys[site6DayIndex];
    const dayData = newData ? newData[dateKey] : site6AllGames[dateKey];
    const games = (dayData && dayData.matches) ? dayData.matches : [];
    
    site6UpdateDayDisplay(dateKey, dayData ? dayData.date : '');
    if (games.length === 0) {
        site6Scroller.innerHTML = `<div class="wasanni-babuwasa-msg">${site6GetNoMatchMessage(dateKey)}</div>`;
        site6ScrollLeft.style.display = 'none';
        site6ScrollRight.style.display = 'none';
        site6StopLiveTimeCounters();
        return;
    }
    const liveGames = games.filter(g => ["IN_PLAY", "PAUSED"].includes(g.status));
    const upcomingGames = games.filter(g => ["SCHEDULED", "TIMED"].includes(g.status));
    const finishedGames = games.filter(g => ["FINISHED"].includes(g.status));
    const sortedGames = [...liveGames, ...upcomingGames, ...finishedGames];
    
    const isCurrentDayRendered = site6DayKeys[site6DayIndex] === site6GetTodayKey();
    const isPartialUpdate = newData && isCurrentDayRendered && liveGames.length > 0;
    if (isPartialUpdate) {       
        liveGames.forEach(g => {
            const existingGame = site6AllGames[dateKey].matches.find(match => match.id === g.id);
            if (existingGame) {
                Object.assign(existingGame, g); 
                site6UpdateGameCard(existingGame);
            }
        });
        site6AllGames[dateKey].matches = sortedGames;
    } else {       
        site6Scroller.innerHTML = ''; 
        for (let i = 0; i < sortedGames.length; i += CARD_PER_CHUNK) {
            const chunk = document.createElement('div');
            chunk.className = 'wasanni-card-chunk';
            
            for (let j = 0; j < CARD_PER_CHUNK && (i + j) < sortedGames.length; j++) {
                const gameToRender = sortedGames[i + j];
               
                gameToRender.liveTime_initialSeconds = undefined; 
                gameToRender.liveTime_lastUpdated = undefined;
                chunk.appendChild(site6CreateGameCard(gameToRender));
            }
            
            site6Scroller.appendChild(chunk);
        }
    }
    
    site6ScrollLeft.style.display = 'flex';
    site6ScrollRight.style.display = 'flex';
    site6UpdateScrollButtons();
    site6ManageLiveUpdates();
    
    site6ShowLoader(false);
}
async function site6CheckLastLoadTime() {
    const now = Date.now();
    const timeElapsed = now - site6LastLoadTime;     
    if (timeElapsed >= ONE_HOUR) {
        // site6ShowLoader(true); 
        const success = await site6AttemptFetch(3, true); 
        if (success) {
            return true; 
        } else {
            // site6ShowLoader(false);
            // site6Scroller.innerHTML = `<div class="wasanni-babuwasa-msg" style="color: red;">‚ö†Ô∏è Kuskure: Ba'a sami damar sabunta data ba.</div>`;
            return false;
        }
    }
    
    if (site6FirebaseInitialLoadDone) {
        site6ShowLoader(false);
        site6RenderGames();
    }
    return true;
}
async function site6AttemptFetch(retries = 1, isHourly = false) {
    if (!site6IsFirebaseLoaded) return false;
    if (isHourly && site6IsProcessingHourlyRequest) return false;
    if (!isHourly && site6IsLiveApiRequesting) return false;
    if (isHourly) site6IsProcessingHourlyRequest = true;
    else site6IsLiveApiRequesting = true;
    
    try {
        for (let i = 0; i < retries; i++) {
            try {
                const response = await fetch(`${REQUEST_API_URL}?key=${REQUEST_KEY}`);
                if (response.status === 200) {
                    await response.json(); 
                    return true;
                } else {
                    throw new Error(`HTTP Error: ${response.status}`);
                }
            } catch (error) {
                console.error(`Fetch attempt ${i + 1} failed:`, error);
                if (i < retries - 1) {
                    await new Promise(resolve => setTimeout(resolve, 2000 * (i + 1)));
                }
            }
        }
        return false;
    } finally {
        if (isHourly) site6IsProcessingHourlyRequest = false;
        else site6IsLiveApiRequesting = false;
    }
}
function site6CheckAndFetchHourly() {
    if (document.hidden) return;
    site6CheckLastLoadTime();
}

function site6StartLiveUpdate() {
    if (site6LiveIntervalId) return;
    site6LiveIntervalId = setInterval(() => {
        if (document.hidden) return; 
        site6AttemptFetch(1, false);        
    }, ONE_MINUTE); 
}

function site6StopLiveUpdate() {
    if (site6LiveIntervalId) {
        clearInterval(site6LiveIntervalId);
        site6LiveIntervalId = null;
    }
}
function site6StartHourlyCheck() {
    if (site6HourlyCheckIntervalId) return;  
    site6HourlyCheckIntervalId = setInterval(site6CheckAndFetchHourly, 300000); 
}
function site6ManageLiveUpdates() {
    const allGames = Object.values(site6AllGames).map(d => d.matches).flat();
        
    
    const isLiveOrUpcoming = allGames.some(g => {
        const matchDate = site6ParseUTCDate(g.utcDate);
        if (!matchDate) return false;
        const now = Date.now();
        const matchTime = matchDate.getTime();
        const timeToMatch = matchTime - now;
        
        
        return ["IN_PLAY", "PAUSED"].includes(g.status) || (g.status === 'TIMED' && timeToMatch > 0 && timeToMatch <= 900000);
    });

    if (isLiveOrUpcoming) {
        site6StartLiveUpdate();
        site6StartLiveTimeCounters(); 
    } else {
        site6StopLiveUpdate();
        site6StopLiveTimeCounters();
    }
}
function site6HandleDataRender(data) {
    const newData = data || {};
    site6IsFirebaseLoaded = true;
    if (!site6FirebaseInitialLoadDone) {       
        site6FirebaseInitialLoadDone = true;
        site6AllGames = newData.fixtures || {};
        site6DayKeys = Object.keys(site6AllGames).sort();
        if (site6DayKeys.length === 0) {
            site6ShowLoader(false);
            site6Scroller.innerHTML = `<div class="wasanni-babuwasa-msg">Akwai Matsalar Network A Hallin Yanzu Ku Jira Kadan...</div>`;
            return;
        }
        const todayKey = site6GetTodayKey();
        let initialIndex = site6DayKeys.indexOf(todayKey);
        if (initialIndex === -1 && site6DayKeys.includes('day_1')) initialIndex = site6DayKeys.indexOf('day_1');
        if (initialIndex === -1) initialIndex = 0;
        
        site6DayIndex = initialIndex;
        site6CheckLastLoadTime();
    } else {       
        const oldDayKey = site6DayKeys[site6DayIndex];
        const oldDayData = site6AllGames[oldDayKey];
        
        site6AllGames = newData.fixtures || {};
        site6DayKeys = Object.keys(site6AllGames).sort();
        
        const hasLiveGames = Object.values(site6AllGames).map(d => d.matches).flat().some(g => ["IN_PLAY", "PAUSED"].includes(g.status));
        if (hasLiveGames) {
            
            site6RenderGames(site6AllGames);
        } else {
            
            site6RenderGames();
        }
        site6ShowLoader(false);
    }
}
function site6HandleMetadata(metaData) {
    const metaObj = metaData || {};
    site6LastLoadTime = metaObj.lastLoadTime || 0;
    site6StartHourlyCheck();
}
function site6HandleVisibilityChange() {
    if (document.hidden) {      
        site6StopLiveUpdate();
        site6StopLiveTimeCounters();
        if (site6HourlyCheckIntervalId) {
            clearInterval(site6HourlyCheckIntervalId);
            site6HourlyCheckIntervalId = null;
        }
    } else {         
        site6StartHourlyCheck();
        site6CheckAndFetchHourly();
        site6ManageLiveUpdates();
    }
}
function site6Init() {
    site6ShowLoader(true);     
    if (typeof getDatabase === 'function' && typeof ref === 'function' && typeof onValue === 'function') {
        const database = getDatabase();
        FIREBASE_FIXTURES_REF = ref(database, '/fixtures');
        FIREBASE_META_REF = ref(database, '/metadata');
    }
    if (!FIREBASE_FIXTURES_REF || !FIREBASE_META_REF) {
        site6ShowLoader(false);
        site6Scroller.innerHTML = `<p style="text-align:center; color: red;">Kuskure: Ba a loda/saita **Firebase SDK** da kyau ba. Da fatan za a duba **HTML Scripts** dinku.</p>`;
        return;
    }
  
    onValue(FIREBASE_META_REF, (snapshot) => {
        site6HandleMetadata(snapshot.val());
    }, (error) => {
        console.error("‚ùå Firebase metadata read failed:", error);
    });
  
    onValue(FIREBASE_FIXTURES_REF, (snapshot) => {
        site6HandleDataRender({fixtures: snapshot.val()}); 
    }, (error) => {
        console.error("‚ùå Firebase fixtures read failed:", error);
        if (!site6FirebaseInitialLoadDone) {
             site6ShowLoader(false);
             site6Scroller.innerHTML = `<div class="wasanni-babuwasa-msg">Network Error </div>`;
        }
    });
}


if (site6PrevDay) site6PrevDay.onclick = () => site6ChangeDay(-1);
if (site6NextDay) site6NextDay.onclick = () => site6ChangeDay(1);
if (site6ScrollLeft) site6ScrollLeft.onclick = () => site6Scroll(-1);
if (site6ScrollRight) site6ScrollRight.onclick = () => site6Scroll(1);
if (site6Scroller) site6Scroller.addEventListener('scroll', site6UpdateScrollButtons);
document.addEventListener("visibilitychange", site6HandleVisibilityChange);

window.addEventListener("DOMContentLoaded", () => {
    loadKaitsayeLocal(); 
    site6Init();
});

window.site5UploadBtnClick = function() {
    showSite5Push("Kai Tsaye A Yau... ka jira.", "fa-spinner");
};



// üö¶‚úîÔ∏èSite 7 JS ya fara daga nan
const site7Container = document.getElementById('site7-wasaninmasuzabi');
const wasaniZabiRef = ref(db, "wasaniMasuZabi");
let aite7_userid = null;
let currentPostsCache = [];

function aite7_numFormat(num) {
    num = Number(num) || 0;
    if (num >= 1e9) return (num / 1e9).toFixed(1).replace(/\.0$/, '') + 'b';
    if (num >= 1e6) return (num / 1e6).toFixed(1).replace(/\.0$/, '') + 'm';
    if (num >= 1e3) return (num / 1e3).toFixed(1).replace(/\.0$/, '') + 'k';
    return num;
}

function aite7_setUserId(userId) {
    aite7_userid = userId;
}

function aite7_audioPlayer(audioUrl, postId) {
    const wrap = document.createElement('div');
    wrap.className = "aite7-audio-player-wrap";
    const audio = document.createElement('audio');
    audio.src = audioUrl;
    audio.preload = "metadata";
    audio.style.display = "none";
    let lastTime = 0;
    const btn = document.createElement('button');
    btn.className = "aite7-audio-btn";
    btn.innerHTML = `<i class="fa-solid fa-play"></i>`;
    btn.onclick = () => {
        if (audio.paused) {
            audio.currentTime = lastTime;
            audio.play();
        } else {
            audio.pause();
        }
    };
    const progress = document.createElement('input');
    progress.type = "range";
    progress.className = "aite7-audio-progress";
    progress.value = 0;
    progress.min = 0;
    progress.max = 100;
    progress.step = 0.1;
    const timeLabel = document.createElement('span');
    timeLabel.className = "aite7-audio-time";
    timeLabel.textContent = "00:00";
    audio.onloadedmetadata = () => {
        progress.max = 100;
        progress.value = audio.currentTime / audio.duration * 100 || 0;
        timeLabel.textContent = aite7_timeFmt(audio.currentTime, audio.duration);
    };
    audio.ontimeupdate = () => {
        progress.value = audio.currentTime / audio.duration * 100 || 0;
        timeLabel.textContent = aite7_timeFmt(audio.currentTime, audio.duration);
    };
    progress.oninput = e => {
        if (audio.duration) {
            audio.currentTime = e.target.value / 100 * audio.duration;
        }
    };
    audio.onplay = () => {
        btn.innerHTML = `<i class="fa-solid fa-pause"></i>`;
    };
    audio.onpause = () => {
        btn.innerHTML = `<i class="fa-solid fa-play"></i>`;
        lastTime = audio.currentTime;
    };
    audio.onended = () => {
        btn.innerHTML = `<i class="fa-solid fa-play"></i>`;
        lastTime = 0;
        audio.currentTime = 0;
    };
    wrap.append(btn, progress, timeLabel, audio);
    return wrap;
}

function aite7_timeFmt(current, duration) {
    const c = Math.floor(current || 0),
        d = Math.floor(duration || 0);
    const fm = (v) => v < 10 ? '0' + v : v;
    return `${fm(Math.floor(c / 60))}:${fm(c % 60)}` + (duration ? ` / ${fm(Math.floor(d / 60))}:${fm(d % 60)}` : '');
}

function aite7_downloadFile(url, name) {
    const link = document.createElement('a');
    link.href = url;
    link.download = name || "file";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    aite7_pushNotify("An sauke fayil …óin zuwa gallery naka!");
}

function aite7_pushNotify(msg) {
    let bar = document.getElementById('aite7-notify-bar');
    if (!bar) {
        bar = document.createElement('div');
        bar.id = "aite7-notify-bar";
        bar.style.cssText = `
            position: fixed; top: 16px; left: 50%; transform: translateX(-50%);
            background: #2d90ff; color: #fff; padding: 0.7rem 2rem; border-radius: 22px;
            font-size: 1.07rem; z-index: 20012; box-shadow: 0 2px 11px #2d90ff44;
            transition: opacity 0.3s ease-out; opacity: 0;
        `;
        document.body.appendChild(bar);
    }
    bar.textContent = msg;
    bar.style.opacity = "1";
    setTimeout(() => {
        bar.style.opacity = "0";
    }, 3000);
}

function aite7_incrementSee(post) {
    if (!post || !post.postCode) return;
    const viewKey = `aite7_view_${post.postCode}_${aite7_userid || 'guest'}`;
    if (!sessionStorage.getItem(viewKey)) {
        const postRef = ref(db, `wasaniMasuZabi/${post.postCode}/see`);
        runTransaction(postRef, (currentSee) => {
            return (Number(currentSee) || 0) + 1;
        });
        sessionStorage.setItem(viewKey, "1");
        const seeCountElement = document.querySelector(`.aite7-card[data-post="${post.postCode}"] .aite7-meta-info .aite7-count[data-current-count="${post.see || 0}"]`);
        if (seeCountElement) {
            let currentCount = Number(seeCountElement.dataset.currentCount) || 0;
            currentCount++;
            seeCountElement.textContent = aite7_numFormat(currentCount);
            seeCountElement.dataset.currentCount = currentCount;
        }
    }
}

function aite7_likePost(post, btn, icon, countLabel) {
    const key = "aite7_like_" + post.postCode + (aite7_userid || 'guest');
    if (localStorage.getItem(key)) {
        return;
    }
    localStorage.setItem(key, "1");
    btn.classList.add("liked");
    icon.classList.add("liked");
    const postRef = ref(db, `wasaniMasuZabi/${post.postCode}/like`);
    runTransaction(postRef, (currentLike) => {
        return (Number(currentLike) || 0) + 1;
    });
    let currentCount = Number(countLabel.dataset.currentCount) || 0;
    currentCount++;
    countLabel.textContent = aite7_numFormat(currentCount);
    countLabel.dataset.currentCount = currentCount;
    aite7_pushNotify("Mun Gode da LikeüòÄ!", "fa-heart",);
}

function aite7_scrollBy(scroller, dir = 1) {
    scroller.scrollBy({
        left: dir * 350,
        behavior: "smooth"
    });
}

function aite7_viewImage(imageUrl, postId) {
    const modal = document.createElement('div');
    modal.className = "aite7-image-modal";
    modal.onclick = (e) => {
        if (e.target === modal) modal.remove();
    };
    const img = document.createElement('img');
    img.src = imageUrl;
    img.alt = "Post Image";
    const closeBtn = document.createElement('button');
    closeBtn.className = "aite7-modal-close-btn";
    closeBtn.innerHTML = `<i class="fa-solid fa-times-circle"></i>`;
    closeBtn.onclick = () => modal.remove();
    const downloadBtn = document.createElement('button');
    downloadBtn.className = "aite7-modal-download-btn";
    downloadBtn.innerHTML = `<i class="fa-solid fa-download"></i> Download`;
    downloadBtn.onclick = () => aite7_downloadFile(imageUrl, `image_${postId}.jpg`);
    modal.append(img, closeBtn, downloadBtn);
    document.body.appendChild(modal);
}

function aite7_handleLoginRequired(post) {
    onAuthStateChanged(auth, (user) => {
        if (user) {
            window.location.href = `wanniComent.html?postCode=${post.postCode}`;
        } else {
            aite7_pushNotify("Dole ka yi rigista ko login domin shiga wannan shafin!", "fa-user-lock");
        }
    });
}

function aite7_render(posts) {
    site7Container.innerHTML = "";
    if (!posts || !posts.length) {
        site7Container.style.display = "none";
        return;
    }
    site7Container.style.display = "block";

    const titleBar = document.createElement('div');
    titleBar.className = "aite7-title-bar";
    titleBar.innerHTML = `<span>üí†</span><span>‚öΩWasanni Masu Zafi‚öΩ</span><span>üí†</span>`;
    site7Container.appendChild(titleBar);

    const scrollerWrap = document.createElement('div');
    scrollerWrap.className = "aite7-scroller-container";
    site7Container.appendChild(scrollerWrap);

    const scroller = document.createElement('div');
    scroller.className = "aite7-scroller";
    scrollerWrap.appendChild(scroller);

    const leftBtn = document.createElement('button');
    leftBtn.className = "aite7-scroll-btn aite7-left";
    leftBtn.innerHTML = `<i class="fa-solid fa-angle-left"></i>`;
    leftBtn.onclick = () => aite7_scrollBy(scroller, -1);
    scrollerWrap.appendChild(leftBtn);
    const rightBtn = document.createElement('button');
    rightBtn.className = "aite7-scroll-btn aite7-right";
    rightBtn.innerHTML = `<i class="fa-solid fa-angle-right"></i>`;
    rightBtn.onclick = () => aite7_scrollBy(scroller, 1);
    scrollerWrap.appendChild(rightBtn);

    function updateScrollBtns() {
        leftBtn.hidden = (scroller.scrollLeft < 10);
        rightBtn.hidden = (scroller.scrollLeft + scroller.offsetWidth + 10 >= scroller.scrollWidth);
    }
    scroller.addEventListener('scroll', updateScrollBtns);
    setTimeout(updateScrollBtns, 500);

    posts.forEach((post) => {
        if (!post || !post.postCode) return;
        const card = document.createElement('div');
        card.className = "aite7-card";
        card.setAttribute("data-post", post.postCode);

        const teamsDiv = document.createElement('div');
        teamsDiv.className = "aite7-teams";

        const homeTeamCol = document.createElement('div');
        homeTeamCol.className = "aite7-team-col";
        const team1Logo = document.createElement('img');
        team1Logo.className = "aite7-game-logo";
        team1Logo.src = post.game1logo || "";
        team1Logo.alt = "Home Team Logo";
        homeTeamCol.appendChild(team1Logo);
        const team1Name = document.createElement('span');
        team1Name.className = "aite7-game-name";
        team1Name.textContent = post.game1Name || "";
        homeTeamCol.appendChild(team1Name);
        teamsDiv.appendChild(homeTeamCol);

        const vsSpan = document.createElement('span');
        vsSpan.className = "aite7-vs-label";
       
        const result = post.result || {};
        const homeVal = Number(result.homeTeam);
        const awayVal = Number(result.awayTeam);        
       
        if ((!isNaN(homeVal) && homeVal >= 0) && (!isNaN(awayVal) && awayVal >= 0)) {
            vsSpan.textContent = `${homeVal}-${awayVal}`;
            vsSpan.style.color = "#38c172";
            vsSpan.style.fontWeight = "bold";
        } else {
            vsSpan.textContent = "VS";
        }

        teamsDiv.appendChild(vsSpan);

        const awayTeamCol = document.createElement('div');
        awayTeamCol.className = "aite7-team-col";
        const team2Logo = document.createElement('img');
        team2Logo.className = "aite7-game-logo";
        team2Logo.src = post.game2logo || "";
        team2Logo.alt = "Away Team Logo";
        awayTeamCol.appendChild(team2Logo);
        const team2Name = document.createElement('span');
        team2Name.className = "aite7-game-name";
        team2Name.textContent = post.game2Name || "";
        awayTeamCol.appendChild(team2Name);
        teamsDiv.appendChild(awayTeamCol);
        card.appendChild(teamsDiv);

        const matchTimeDiv = document.createElement('div');
        matchTimeDiv.className = "aite7-game-time";
        matchTimeDiv.textContent = post.payGameTime || "";
        card.appendChild(matchTimeDiv);

        const scoreBarDiv = document.createElement('div');
        scoreBarDiv.className = "aite7-score-bar";

        const homeVoteBox = document.createElement('div');
        homeVoteBox.className = "aite7-vote-box";
        homeVoteBox.dataset.side = "home";
        const homeTeamSpan = document.createElement('span');
        homeTeamSpan.innerHTML = `<i class="fa-solid fa-user-ninja aite7-team-icon"></i> <span class="aite7-box-count" data-current-count="${post.game1box || 0}">${aite7_numFormat(post.game1box || 0)}</span>`;
        homeVoteBox.appendChild(homeTeamSpan);
        const homeIndicator = document.createElement('span');
        homeIndicator.className = "aite7-vote-indicator";
        homeVoteBox.appendChild(homeIndicator);
        const homeCheckMark = document.createElement('span');
        homeCheckMark.className = "aite7-check-mark";
        homeCheckMark.innerHTML = `<i class="fa-solid fa-check"></i>`;
        homeCheckMark.style.display = 'none';
        homeVoteBox.appendChild(homeCheckMark);

        const awayVoteBox = document.createElement('div');
        awayVoteBox.className = "aite7-vote-box";
        awayVoteBox.dataset.side = "away";
        const awayTeamSpan = document.createElement('span');
        awayTeamSpan.innerHTML = `<i class="fa-solid fa-user-ninja aite7-team-icon"></i> <span class="aite7-box-count" data-current-count="${post.game2box || 0}">${aite7_numFormat(post.game2box || 0)}</span>`;
        awayVoteBox.appendChild(awayTeamSpan);
        const awayIndicator = document.createElement('span');
        awayIndicator.className = "aite7-vote-indicator";
        awayVoteBox.appendChild(awayIndicator);
        const awayCheckMark = document.createElement('span');
        awayCheckMark.className = "aite7-check-mark";
        awayCheckMark.innerHTML = `<i class="fa-solid fa-check"></i>`;
        awayCheckMark.style.display = 'none';
        awayVoteBox.appendChild(awayCheckMark);

        const dividerDiv = document.createElement('div');
        dividerDiv.className = "aite7-divider";
        dividerDiv.textContent = "‚ûñ‚ûñ‚ûñ";
        scoreBarDiv.append(homeVoteBox, dividerDiv, awayVoteBox);
        card.appendChild(scoreBarDiv);

        const votedKey = `aite7_voted_${post.postCode}_${aite7_userid || 'guest'}`;
        const votedSide = localStorage.getItem(votedKey);

        if (votedSide) {
            homeVoteBox.classList.add('disabled');
            awayVoteBox.classList.add('disabled');
            if (votedSide === 'home') {
                homeVoteBox.classList.add('voted');
                homeCheckMark.style.display = 'flex';
            } else if (votedSide === 'away') {
                awayVoteBox.classList.add('voted');
                awayCheckMark.style.display = 'flex';
            }
        }

        homeVoteBox.onclick = (e) => {
            e.stopPropagation();
            if (homeVoteBox.classList.contains('disabled')) {
                return;
            }
            homeVoteBox.classList.add('voted', 'disabled');
            awayVoteBox.classList.add('disabled');
            homeCheckMark.style.display = 'flex';
            localStorage.setItem(votedKey, 'home');
            const homeBoxRef = ref(db, `wasaniMasuZabi/${post.postCode}/game1box`);
            const currentHomeCount = Number(homeTeamSpan.querySelector('.aite7-box-count').dataset.currentCount);
            runTransaction(homeBoxRef, (currentBox) => {
                return (Number(currentBox) || 0) + 1;
            });
            homeTeamSpan.querySelector('.aite7-box-count').textContent = aite7_numFormat(currentHomeCount + 1);
            homeTeamSpan.querySelector('.aite7-box-count').dataset.currentCount = currentHomeCount + 1;
        };
        awayVoteBox.onclick = (e) => {
            e.stopPropagation();
            if (awayVoteBox.classList.contains('disabled')) {
                return;
            }
            awayVoteBox.classList.add('voted', 'disabled');
            homeVoteBox.classList.add('disabled');
            awayCheckMark.style.display = 'flex';
            localStorage.setItem(votedKey, 'away');
            const awayBoxRef = ref(db, `wasaniMasuZabi/${post.postCode}/game2box`);
            const currentAwayCount = Number(awayTeamSpan.querySelector('.aite7-box-count').dataset.currentCount);
            runTransaction(awayBoxRef, (currentBox) => {
                return (Number(currentBox) || 0) + 1;
            });
            awayTeamSpan.querySelector('.aite7-box-count').textContent = aite7_numFormat(currentAwayCount + 1);
            awayTeamSpan.querySelector('.aite7-box-count').dataset.currentCount = currentAwayCount + 1;
        };

        const posterDiv = document.createElement('div');
        posterDiv.className = "aite7-poster";
        if (post.photalinlink) {
            const posterImg = document.createElement('img');
            posterImg.src = post.photalinlink;
            posterImg.alt = "Photo Show";
            posterImg.onclick = (e) => {
                e.stopPropagation();
                aite7_viewImage(post.photalinlink, post.postCode);
            };
            posterDiv.appendChild(posterImg);
        }
        card.appendChild(posterDiv);

        const contentDiv = document.createElement('div');
        contentDiv.className = "aite7-content";
        if (post.test) {
            contentDiv.textContent = post.test;
                     
            const readMoreBtn = document.createElement('a');
            readMoreBtn.href = "#";
            readMoreBtn.className = "aite7-read-more";
            readMoreBtn.textContent = " Kara Karantawa..";
            readMoreBtn.onclick = (e) => {
                e.preventDefault();
                e.stopPropagation();
                aite7_handleLoginRequired(post);
            };
            contentDiv.appendChild(readMoreBtn);
        } else if (post.audioLink) {
            contentDiv.appendChild(aite7_audioPlayer(post.audioLink, post.postCode));
        }
        card.appendChild(contentDiv);

        const metaInfoDiv = document.createElement('div');
        metaInfoDiv.className = "aite7-meta-info";

        const likeItem = document.createElement('span');
        likeItem.className = "aite7-icon-item";
        likeItem.innerHTML = `<i class="fa-solid fa-thumbs-up"></i> <span></span> <span class="aite7-count" data-current-count="${post.like || 0}">${aite7_numFormat(post.like || 0)}</span>`;
        if (localStorage.getItem("aite7_like_" + post.postCode + (aite7_userid || 'guest'))) {
            likeItem.classList.add("liked");
        }
        likeItem.onclick = (e) => {
            e.stopPropagation();
            aite7_likePost(post, likeItem, likeItem.querySelector('i'), likeItem.querySelector('.aite7-count'));
        };
        metaInfoDiv.appendChild(likeItem);

        const commentItem = document.createElement('span');
        commentItem.className = "aite7-icon-item";
        commentItem.innerHTML = `<i class="fa-regular fa-comment"></i> <span></span> <span class="aite7-count" data-current-count="${post.totalComment || 0}">${aite7_numFormat(post.totalComment || 0)}</span>`;
        commentItem.onclick = (e) => {
            e.stopPropagation();
            aite7_handleLoginRequired(post);
        };
        metaInfoDiv.appendChild(commentItem);

        const seeItem = document.createElement('span');
        seeItem.className = "aite7-icon-item";
        seeItem.innerHTML = `<i class="fa-solid fa-eye"></i> <span></span> <span class="aite7-count" data-current-count="${post.see || 0}">${aite7_numFormat(post.see || 0)}</span>`;
        metaInfoDiv.appendChild(seeItem);

        if (post.audioLink || post.photalinlink) {
            const downloadItem = document.createElement('span');
            downloadItem.className = "aite7-icon-item";
            downloadItem.innerHTML = `<i class="fa-solid fa-download"></i> <span></span>`;
            downloadItem.onclick = (e) => {
                e.stopPropagation();
                if (post.audioLink) aite7_downloadFile(post.audioLink, `audio_${post.postCode}.mp3`);
                else if (post.photalinlink) aite7_downloadFile(post.photalinlink, `image_${post.postCode}.jpg`);
            };
            metaInfoDiv.appendChild(downloadItem);
        }
        card.appendChild(metaInfoDiv);

        scroller.appendChild(card);

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    aite7_incrementSee(post);
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.8
        });
        observer.observe(card);
    });
}

onValue(wasaniZabiRef, (snap) => {
    if (!snap.exists()) {
        site7Container.innerHTML = "";
        site7Container.style.display = "none";
        return;
    }
    const raw = snap.val();
    const list = Object.values(raw).filter(x => !!x.postCode).sort((a, b) => (b.PostTime || 0) - (a.PostTime || 0));
    currentPostsCache = list;
    aite7_render(list);
});

window.addEventListener('storage', function(e) {
    if (e.key && (e.key.startsWith('aite7_voted_') || e.key.startsWith('aite7_like_'))) {
        aite7_render(currentPostsCache);
    }
});
// üö¶‚úîÔ∏èSite 7 JS ya kare daga nan


// üö¶‚úîÔ∏èSite 8 JS ya fara daga nan


const site8 = document.getElementById('site8-posting');
const postingRef = ref(db, "Posting");

const SITE8_LOAD_MORE_ID = 'site8-load-more-btn';
const SITE8_LOADER_ID = 'site8-loader';

const site8Logo = "https://i.imgur.com/CgvdgMA.png";
const SITE8_LEARNMORE_TEXT = "Kara Karantawa..";
const SITE8_COMMENTS_PAGE = "viewsComent.html";
const MAX_TEXT_LENGTH_PREVIEW = 300;
const VOTED_POLL_KEY_PREFIX = "tw_voted_poll_";
const PAGINATION_PAGE_SIZE = 10;
let isLoading = false;
const seenPostsInMemory = new Set();
const lastEvaluatedPost = { timestamp: null, key: null };
let hasMorePosts = true;

function site8_getSeenPosts() {
    return seenPostsInMemory;
}

function site8_addSeenPost(postId) {
    if (!seenPostsInMemory.has(postId)) {
        seenPostsInMemory.add(postId);
        return true;
    }
    return false;
}

function site8_incrementSee(postid) {
    if (!site8_addSeenPost(postid)) {
        return;
    }
    const postRef = ref(db, `Posting/${postid}`);
    runTransaction(postRef, (currentPost) => {
        if (currentPost) {
            const currentSee = currentPost.see || 0;
            currentPost.see = currentSee + 1;
            return currentPost;
        }
        return currentPost;
    })
    .then((snapshot) => {
        if (snapshot.committed) {
            const seeCountElement = document.querySelector(`.posting-card[data-postid="${postid}"] .see-count`);
            if (seeCountElement) {
                seeCountElement.textContent = site8_formatCount(snapshot.snapshot.val().see);
            }
        }
    })
    .catch(error => {
    });
}

function site8_showPush(text) {
    let push = document.querySelector('.push-container');
    if (!push) {
        push = document.createElement('div');
        push.className = "push-container";
        document.body.appendChild(push);
    }
    push.textContent = text;
    push.classList.add('active');
    setTimeout(() => push.classList.remove('active'), 2800);
}

function site8_formatCount(val) {
    val = parseInt(val) || 0;
    if (val >= 1000000000) return (val / 1000000000).toFixed(1).replace(/\.0$/, '') + "b";
    if (val >= 1000000) return (val / 1000000).toFixed(1).replace(/\.0$/, '') + "m";
    if (val >= 1000) return (val / 1000).toFixed(1).replace(/\.0$/, '') + "k";
    return val.toString();
}

function site8_getYouTubeVideoId(url) {
    let videoId = null;
    const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i;
    const match = url.match(regex);
    if (match && match[1]) {
        videoId = match[1];
    }
    return videoId;
}

function site8_updatePollUI(card, postData) {
    let totalVotes = 0;
    const optionsData = [];
    for (let i = 1; i <= 5; i++) {
        if (postData[`takara${i}`]) {
            const votes = postData[`zabi${i}`] || 0;
            totalVotes += votes;
            optionsData.push({ votes, index: i });
        }
    }
    const hasVoted = localStorage.getItem(`${VOTED_POLL_KEY_PREFIX}${postData.postid}`);
    const votedOptionIndex = hasVoted ? parseInt(hasVoted) : null;
    const totalVotesDisplay = card.querySelector('#total-votes');
    if (totalVotesDisplay) {
        totalVotesDisplay.textContent = site8_formatCount(totalVotes);
    }
    const optionItems = card.querySelectorAll('.candidate-item');
    
    optionItems.forEach(item => {
        const index = parseInt(item.dataset.index);
        const option = optionsData.find(opt => opt.index === index);
        const votes = option ? option.votes : 0;
        const percentage = totalVotes === 0 ? 0 : Math.round((votes / totalVotes) * 100);
        const voteBtn = item.querySelector('.vote-button-circle');
        const voteCountDisplay = item.querySelector('.vote-count');
        const progressBar = item.querySelector('.progress-bar');
        
        voteCountDisplay.textContent = site8_formatCount(votes);
        item.dataset.votes = votes;
        progressBar.style.width = percentage + '%'; 
        progressBar.setAttribute('data-percentage', percentage + '%');
        
        if (hasVoted) {
            voteBtn.onclick = null; 
            voteBtn.style.cursor = 'default';
            if(index === votedOptionIndex) {
                voteBtn.classList.add('selected'); 
                voteBtn.innerHTML = '<i class="fa-solid fa-check" style="color: white; font-size: 0.8em;"></i>';
                voteBtn.title = 'An riga an zaba!';
            } else {
                voteBtn.classList.remove('selected'); 
                voteBtn.style.border = '3px solid #ccc';
                voteBtn.style.backgroundColor = 'transparent';
                voteBtn.innerHTML = '';
                voteBtn.title = 'An riga an zaba!';
            }
        } else {
            voteBtn.classList.remove('selected'); 
            voteBtn.onclick = () => window.site8_voteOnPoll(postData.postid, index);
            voteBtn.style.cursor = 'pointer';
            voteBtn.style.border = '3px solid #007bff';
            voteBtn.style.backgroundColor = 'transparent';
            voteBtn.innerHTML = '';
            voteBtn.title = `Danna nan don zaba ${postData[`takara${index}`]}`;
        }
    });
}

function site8_renderPollCard(p) {
    let optionsHTML = '';
    let totalVotes = 0;
    const candidates = [];
    const hasVoted = localStorage.getItem(`${VOTED_POLL_KEY_PREFIX}${p.postid}`);
    
    for (let i = 1; i <= 5; i++) {
        if (p[`takara${i}`]) {
            const votes = p[`zabi${i}`] || 0;
            totalVotes += votes;
            candidates.push({ name: p[`takara${i}`], votes: votes, index: i });
        }
    }
    
    const initialTotalVotesDisplay = site8_formatCount(totalVotes);
    
    candidates.forEach(candidate => {
        const votes = candidate.votes;
        const percentage = totalVotes === 0 ? 0 : Math.round((votes / totalVotes) * 100);
        
        const displayVotes = site8_formatCount(votes);
        const displayWidth = percentage;
        
        const isVotedOption = (hasVoted && parseInt(hasVoted) === candidate.index);
        
        let votedStyle = '';
        let votedContent = '';
        let votedClass = '';
        let onclickHandler = `window.site8_voteOnPoll('${p.postid}', ${candidate.index})`;
        let cursorStyle = 'cursor: pointer;';
        
        if (hasVoted) {
            cursorStyle = 'cursor: default;';
            onclickHandler = '';
            
            if (isVotedOption) {
                votedClass = ' selected'; 
                votedStyle = ''; 
                votedContent = '<i class="fa-solid fa-check" style="color: white; font-size: 0.8em;"></i>';
            } else {
                votedStyle = 'border: 3px solid #ccc; background-color: transparent;'; 
            }
        } else {
            votedStyle = 'border: 3px solid #007bff; background-color: transparent;';
        }
        
        optionsHTML += `
            <div class="candidate-item" data-postid="${p.postid}" data-index="${candidate.index}" data-votes="${votes}">
                <div class="vote-button-circle${votedClass}"
                    title="${hasVoted ? 'An riga an zaba!' : 'Danna nan don zaba ' + candidate.name}" 
                    data-postid="${p.postid}" 
                    data-index="${candidate.index}"
                    style="${votedStyle} ${cursorStyle}"
                    onclick="${onclickHandler}">
                    ${votedContent}
                </div>
                
                <div class="candidate-details-content">
                    <div class="candidate-info">
                        <span class="candidate-name">${candidate.name}</span>
                        <span class="vote-count">${displayVotes}</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" 
                            style="width: ${displayWidth}%;" 
                            data-percentage="${percentage}%">
                        </div>
                    </div>
                </div>
            </div>
        `;
    });
    
    return `
        <div class="poll-card-content">
            <div class="posting-logo-row">
                <img class="posting-logo-img" src="${site8Logo}" alt="logo">
                <span class="posting-timestamp" id="postingTime-${p.postid}"></span>
                <span class="poll-label"><i class="fa-solid fa-poll"></i> ZA∆ÅE</span>
            </div>
            <div class="poll-header" style="text-align: left; border-bottom: none; margin-bottom: 20px; padding-bottom: 0;">
                <h2 class=" text">${p.text || 'Babu Tambaya'}</h2>
                <p style="color: green; font-size: 0.9em; margin-top: 5px;">Danna zagaye don bayar da ∆ôuri'arku, ga ra a yin ku Mafi Cancanta.</p>
            </div>
            <div class="poll-options-list" id="candidates-list">
                ${optionsHTML}
            </div>
            <div id="total-votes-display">
                <p style="color: inherit; font-style: italic;">Jimillar Za…ìe: <strong id="total-votes">${initialTotalVotesDisplay}</strong></p>
            </div>
        </div>
    `;
}

function site8_voteOnPoll(postid, optionIndex) {
    const hasVotedKey = `${VOTED_POLL_KEY_PREFIX}${postid}`;
    if (localStorage.getItem(hasVotedKey)) {
        return;
    }
    const card = document.querySelector(`.posting-card[data-postid="${postid}"]`);
    const buttonToSpin = card.querySelector(`.candidate-item[data-index="${optionIndex}"] .vote-button-circle`);
    
    if (buttonToSpin) {
        buttonToSpin.innerHTML = '<i class="fa-solid fa-spinner fa-spin" style="color: #007bff;"></i>';
        buttonToSpin.style.cursor = 'wait';
        buttonToSpin.onclick = null; 
    }
    
    const optionKey = `zabi${optionIndex}`;
    const postRef = ref(db, `Posting/${postid}`);
    
    runTransaction(postRef, (currentPost) => {
        if (currentPost && currentPost.isPoll) {
            const currentVotes = currentPost[optionKey] || 0;
            currentPost[optionKey] = currentVotes + 1; 
            return currentPost;
        }
        return currentPost;
    })
    .then((snapshot) => {
        if (snapshot.committed) {
            localStorage.setItem(hasVotedKey, optionIndex.toString());
            const card = document.querySelector(`.posting-card[data-postid="${postid}"]`);
            if (card) {
                site8_updatePollUI(card, snapshot.snapshot.val());
            }
        } else {
            if (buttonToSpin) {
                buttonToSpin.innerHTML = '';
                buttonToSpin.style.cursor = 'pointer';
                buttonToSpin.onclick = () => window.site8_voteOnPoll(postid, optionIndex);
            }
        }
    })
    .catch(error => {
        if (buttonToSpin) {
            buttonToSpin.innerHTML = '';
            buttonToSpin.style.cursor = 'pointer';
            buttonToSpin.onclick = () => window.site8_voteOnPoll(postid, optionIndex);
        }
    });
}

window.site8_voteOnPoll = site8_voteOnPoll;

function site8_renderPostingCard(p) {
    if (p.isPoll === true) {
        const c = document.createElement('div');
        c.className = "posting-card poll-post-card";
        c.dataset.postid = p.postid;
        c.innerHTML = site8_renderPollCard(p);
        const timestampElement = c.querySelector(`#postingTime-${p.postid}`);
        if (timestampElement && p.postingTime) {
            timestampElement.textContent = site8_formatTimestamp(p.postingTime);
        }
        site8_updatePollUI(c, p);
        return c;
    }
    
    let text = p.text || "";
    let previewText = text;
    let hasLearnMore = false;
    if (text.length > MAX_TEXT_LENGTH_PREVIEW) {
        previewText = text.substring(0, MAX_TEXT_LENGTH_PREVIEW);
        hasLearnMore = true;
    }
    let logoTextHtml = text ? `<div class="posting-text-below-logo" data-fulltext="${encodeURIComponent(text)}">${previewText}${hasLearnMore ? `<span class="posting-learnmore">${SITE8_LEARNMORE_TEXT}</span>` : ""}</div>` : "";
    let mediaHtml = "";
    let audioControllerHtml = ""; 
    
    if (p.videoLink) {
        const isYoutube = /youtube\.com|youtu\.be/.test(p.videoLink);
        let ytId = isYoutube ? site8_getYouTubeVideoId(p.videoLink) : null;
        let videoSrc = p.videoLink;
        if (isYoutube && ytId) {
            videoSrc = `https://www.youtube.com/embed/${ytId}?controls=0&modestbranding=1&rel=0&showinfo=0&autoplay=0&enablejsapi=1`;
            mediaHtml = `
                <div class="posting-video-container youtube-embed" data-videoid="${ytId}">
                    <div class="youtube-thumbnail" style="background-image: url('https://img.youtube.com/vi/${ytId}/hqdefault.jpg');">
                        <div class="youtube-play-btn"><i class="fa-solid fa-play"></i></div>
                    </div>
                    <iframe class="posting-video youtube-iframe hidden" src="${videoSrc}" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    <button class="video-fullscreen-btn" data-videourl="${videoSrc}"><i class="fa-solid fa-expand"></i></button>
                </div>
            `;
        } else {
            mediaHtml = `
                <div class="posting-video-container">
                    <video class="posting-video" src="${videoSrc}" controls preload="none" loading="lazy" poster="${p.photoLink1 || ''}"></video>
                    <button class="video-fullscreen-btn" data-videourl="${videoSrc}"><i class="fa-solid fa-expand"></i></button>
                </div>
            `;
        }
    } else if (p.photoLink1 && p.photoLink2) {
        mediaHtml = `
            <div class="posting-img-double-container">
                <img class="posting-img-double" src="${p.photoLink1}" alt="post-image-1" loading="lazy">
                <img class="posting-img-double" src="${p.photoLink2}" alt="post-image-2" loading="lazy">
            </div>
        `;
    } else if (p.audioLink && !p.text && !p.photoLink1) {
        mediaHtml = `<div class="posting-audio-full-container"><audio class="posting-audio-full" src="${p.audioLink}" controls preload="none"></audio></div>`;
        logoTextHtml = "";
    } else if (p.photoLink1) {
        mediaHtml = `<img class="posting-img" src="${p.photoLink1}" alt="post-image-1" loading="lazy">`;
    }
    
    if (p.audioLink && !p.videoLink) {
        const isFullAudioPost = !p.text && !p.photoLink1;
        
        if (!isFullAudioPost) {
            const audioPlayerHtmlContent = `<div class="posting-audio-container"><audio class="posting-audio-controller" src="${p.audioLink}" controls preload="none"></audio></div>`;
            
            if (p.text) {
                logoTextHtml += audioPlayerHtmlContent;
            } 
            
            else if (p.photoLink1) {
                logoTextHtml = audioPlayerHtmlContent;
            }
            audioControllerHtml = "";
        }
    }

    const c = document.createElement('div');
    c.className = "posting-card";
    c.dataset.postid = p.postid;
    const likedClass = localStorage.getItem(`liked_${p.postid}`) ? " active" : "";
    
    c.innerHTML = `
        <div class="posting-logo-row">
            <img class="posting-logo-img" src="${site8Logo}" alt="logo">
            <span class="posting-timestamp" id="postingTime-${p.postid}"></span>
        </div>
        ${logoTextHtml}
        <div class="posting-media">${mediaHtml}${audioControllerHtml}</div>
        <div class="posting-bottom">
            <span class="posting-action posting-action-see" title="See">
                <i class="fa-regular fa-eye"></i> <span class="see-count"> ${site8_formatCount(p.see || 0)}</span>
            </span>
            <span class="posting-action posting-action-comments" title="Comment" data-postid="${p.postid}">
                <i class="fa-regular fa-comment"></i> <span class="comment-count"> ${site8_formatCount(p.totalComment || 0)}</span>
            </span>
            <span class="posting-action posting-action-like${likedClass}" title="Like">
                <i class="fa-solid fa-thumbs-up"></i> <span class="like-count"> ${site8_formatCount(p.like || 0)}</span>
            </span>
            <span class="posting-action posting-action-download" title="Download">
                <i class="fa-solid fa-arrow-down"></i>
            </span>
        </div>
    `;
    
    const timestampElement = c.querySelector(`#postingTime-${p.postid}`);
    if (timestampElement && p.postingTime) {
        timestampElement.textContent = site8_formatTimestamp(p.postingTime);
    }
    
    const learnMoreBtn = c.querySelector('.posting-learnmore');
    const postTextElement = c.querySelector('.posting-text-below-logo');
    if (learnMoreBtn && postTextElement) {
        learnMoreBtn.addEventListener('click', () => {
            const fullText = decodeURIComponent(postTextElement.dataset.fulltext);
            postTextElement.innerHTML = fullText;
        });
    }

    const youtubeThumbnail = c.querySelector('.youtube-thumbnail');
    if (youtubeThumbnail) {
        youtubeThumbnail.addEventListener('click', function() {
            const videoContainer = this.parentElement;
            const iframe = videoContainer.querySelector('.youtube-iframe');
            this.classList.add('hidden');
            iframe.classList.remove('hidden');
            const youtubeSrc = iframe.src;
            if (!youtubeSrc.includes('autoplay=1')) {
                iframe.src = youtubeSrc + '&autoplay=1';
            }
        });
    }

    const commentBtn = c.querySelector('.posting-action-comments');
    if (commentBtn) {
        commentBtn.onclick = function() {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    window.location.href = `${SITE8_COMMENTS_PAGE}?postId=${p.postid}`;
                } else {
                    showSite5Push("Dole ka yi rigista ko login domin ka yi comment!", "fa-user-lock");
                }
            });
        };
    }

    const likeButton = c.querySelector('.posting-action-like');
    if (likeButton) {
        likeButton.onclick = function() {
            if (localStorage.getItem(`liked_${p.postid}`)) {
                return;
            }
            site8_likePost(p.postid);
            this.classList.add("active");
            localStorage.setItem(`liked_${p.postid}`, 'true');
        };
    }

    c.querySelector('.posting-action-download').onclick = function() {
        let fileUrl = p.photoLink1 || p.photoLink2 || p.audioLink || p.videoLink || "";
        if (!fileUrl) return site8_showPush("Babu file da za a sauke.");
        if (site8_getYouTubeVideoId(fileUrl)) {
            site8_showPush("Ba za a iya sauke bidiyon YouTube kai tsaye ba.");
            return;
        }
        let fileName = `tauraronwasa-file.${fileUrl.split('.').pop().split('?')[0]}`;
        site8_downloadFile(fileUrl, fileName);
    };

    const imagesInCard = c.querySelectorAll('.posting-img, .posting-img-double');
    imagesInCard.forEach(img => {
        img.style.cursor = 'zoom-in';
        img.onclick = function() {
            site8_openImageViewer(this.src);
        };
    });

    const videoFullscreenBtn = c.querySelector('.video-fullscreen-btn');
    if (videoFullscreenBtn) {
        videoFullscreenBtn.onclick = function() {
            const videoUrl = this.dataset.videourl;
            site8_openVideoFullscreen(videoUrl);
        };
    }

    return c;
}

let videoFullscreenViewer = null;

function site8_openVideoFullscreen(videoSrc) {
    if (!videoFullscreenViewer) {
        videoFullscreenViewer = document.createElement('div');
        videoFullscreenViewer.className = 'site8-video-fullscreen-viewer';
        videoFullscreenViewer.innerHTML = `
            <div class="site8-video-fullscreen-content">
                <button class="site8-video-fullscreen-close-btn"><i class="fa-solid fa-xmark"></i></button>
                <iframe class="site8-fullscreen-video-frame" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen" allowfullscreen></iframe>
            </div>
        `;
        document.body.appendChild(videoFullscreenViewer);
        const closeBtn = videoFullscreenViewer.querySelector('.site8-video-fullscreen-close-btn');
        closeBtn.onclick = site8_closeVideoFullscreen;
        document.addEventListener('keydown', function(e) {
            if (e.key === "Escape" && videoFullscreenViewer.classList.contains('active')) {
                site8_closeVideoFullscreen();
            }
        });
        window.addEventListener('orientationchange', function() {
            if (videoFullscreenViewer.classList.contains('active')) {
                const iframe = videoFullscreenViewer.querySelector('.site8-fullscreen-video-frame');
                if (iframe && iframe.requestFullscreen) {
                    iframe.requestFullscreen().catch(err => {
                    });
                }
            }
        });
    }
    const iframe = videoFullscreenViewer.querySelector('.site8-fullscreen-video-frame');
    iframe.src = videoSrc;
    videoFullscreenViewer.classList.add('active');
    if (iframe && iframe.requestFullscreen) {
        iframe.requestFullscreen().catch(err => {
        });
    }
}

function site8_closeVideoFullscreen() {
    if (videoFullscreenViewer) {
        const iframe = videoFullscreenViewer.querySelector('.site8-fullscreen-video-frame');
        if (iframe) {
            iframe.src = "";
        }
        videoFullscreenViewer.classList.remove('active');
        if (document.fullscreenElement) {
            document.exitFullscreen();
        }
    }
}

const site8_observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const postId = entry.target.dataset.postid;
            const isPoll = entry.target.classList.contains('poll-post-card');
            if (!isPoll) {
                site8_incrementSee(postId);
            }
            site8_observer.unobserve(entry.target);
        }
    });
}, { threshold: 0.5 });

const site8_renderPostingFeed = (feedList, append = false) => {
    let feedContainer = site8.querySelector(".posting-feed");
    if (!append || !feedContainer) {
        site8.innerHTML = '';
        feedContainer = document.createElement('div');
        feedContainer.className = "posting-feed";
        site8.appendChild(feedContainer);
    }

    if (!feedList || feedList.length === 0) {
        if (!append) {
            site8.innerHTML = "<div class='no-posts'>Babu wani wani labari a halin yanzu.</div>";
        }
        site8_hideLoader();
        return;
    }

    const loadMoreButton = document.getElementById(SITE8_LOAD_MORE_ID);
    if (loadMoreButton) {
        loadMoreButton.remove();
    }

    feedList.forEach(post => {
        const card = site8_renderPostingCard(post);
        if (card) {
            feedContainer.appendChild(card);
            if (post.postid) {
                site8_observer.observe(card);
            }
        }
    });

    if (hasMorePosts) {
        site8_appendLoadMoreButton();
    }
    site8_hideLoader();
};

function site8_appendLoadMoreButton() {
    let loadMoreButton = document.getElementById(SITE8_LOAD_MORE_ID);
    if (!loadMoreButton) {
        loadMoreButton = document.createElement('button');
        loadMoreButton.id = SITE8_LOAD_MORE_ID;
        loadMoreButton.textContent = "Loda Karin Labarai...";
        loadMoreButton.onclick = site8_loadMorePosts;
        site8.appendChild(loadMoreButton);
    }
    loadMoreButton.style.display = 'block';

    let loader = document.getElementById(SITE8_LOADER_ID);
    if (!loader) {
        loader = document.createElement('div');
        loader.id = SITE8_LOADER_ID;
        loader.className = 'site8-loader';
        loader.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Ana loda posts...';
        loader.style.display = 'none';
        site8.appendChild(loader);
    }
}

function site8_showLoader() {
    const loader = document.getElementById(SITE8_LOADER_ID);
    const button = document.getElementById(SITE8_LOAD_MORE_ID);
    if (loader) loader.style.display = 'block';
    if (button) button.style.display = 'none';
}

function site8_hideLoader() {
    const loader = document.getElementById(SITE8_LOADER_ID);
    if (loader) loader.style.display = 'none';
}

function site8_formatTimestamp(timestamp) {
    const date = new Date(timestamp);
    const now = new Date();
    const diffMs = now - date;
    const diffSec = Math.round(diffMs / 1000);
    const diffMin = Math.round(diffSec / 60);
    const diffHr = Math.round(diffMin / 60);
    const diffDay = Math.round(diffHr / 24);
    if (diffSec < 60) return `${diffSec}s ago`;
    if (diffMin < 60) return `${diffMin}m ago`;
    if (diffHr < 24) return `${diffHr}h ago`;
    if (diffDay < 7) return `${diffDay}d ago`;
    return date.toLocaleDateString('ha-NG', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
    });
}

function site8_likePost(postid) {
    const postRef = ref(db, `Posting/${postid}`);
    runTransaction(postRef, (currentPost) => {
        if (currentPost) {
            const currentLike = currentPost.like || 0;
            currentPost.like = currentLike + 1;
            return currentPost;
        }
        return currentPost;
    })
    .then((snapshot) => {
        if (snapshot.committed) {
            site8_showPush("Mun Gode da 'Like'üòÄ!");
            const likeCountElement = document.querySelector(`.posting-card[data-postid="${postid}"] .like-count`);
            if (likeCountElement) {
                likeCountElement.textContent = site8_formatCount(snapshot.snapshot.val().like);
                const likeButton = document.querySelector(`.posting-card[data-postid="${postid}"] .posting-action-like`);
                if (likeButton) {
                    likeButton.classList.add("active");
                }
            }
        }
    })
    .catch(error => console.error("Error incrementing like count with transaction:", error));
}

function site8_downloadFile(fileUrl, fileName) {
    const link = document.createElement('a');
    link.href = fileUrl;
    link.download = fileName;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    site8_showPush("An sauke file!");
}

let imageViewer = null;

function site8_openImageViewer(src) {
    if (!imageViewer) {
        imageViewer = document.createElement('div');
        imageViewer.className = 'site8-image-viewer';
        imageViewer.innerHTML = `
            <div class="site8-image-viewer-controls">
                <i class="fa-solid fa-xmark close-viewer"></i>
                <i class="fa-solid fa-save save-image"></i>
            </div>
            <img src="${src}" alt="Full size image">
        `;
        document.body.appendChild(imageViewer);
        imageViewer.querySelector('.close-viewer').onclick = site8_closeImageViewer;
        imageViewer.querySelector('.save-image').onclick = () => {
            const imgToSave = imageViewer.querySelector('img');
            site8_downloadFile(imgToSave.src, `tauraronwasa-image-${Date.now()}.png`);
        };
        imageViewer.onclick = (e) => {
            if (e.target === imageViewer) {
                site8_closeImageViewer();
            }
        };
    } else {
        imageViewer.querySelector('img').src = src;
    }
    imageViewer.classList.add('active');
}

function site8_closeImageViewer() {
    if (imageViewer) {
        imageViewer.classList.remove('active');
    }
}

async function site8_fetchPosts(append = false) {
    if (isLoading || (append && !hasMorePosts)) return;
    isLoading = true;
    site8_showLoader();

    let postQuery;
    
    if (lastEvaluatedPost.key) {
        postQuery = query(
            postingRef,
            orderByChild('postingTime'),
            endBefore(lastEvaluatedPost.timestamp, lastEvaluatedPost.key), 
            limitToLast(PAGINATION_PAGE_SIZE)
        );
    } else {
        postQuery = query(
            postingRef,
            orderByChild('postingTime'),
            limitToLast(PAGINATION_PAGE_SIZE)
        );
    }

    try {
        const snapshot = await get(postQuery);
        if (!snapshot.exists()) {
            isLoading = false;
            hasMorePosts = false;
            site8_renderPostingFeed([], append);
            return;
        }

        let postsArray = [];
        snapshot.forEach(childSnap => {
            let post = childSnap.val();
            post.postid = childSnap.key;
            postsArray.push(post);
        });

        postsArray.sort((a, b) => {
            const timeA = new Date(a.postingTime).getTime() || 0;
            const timeB = new Date(b.postingTime).getTime() || 0;
            return timeB - timeA;
        });

        let newPosts = postsArray.filter(post => post.postid && (post.isPoll || post.text || post.photoLink1 || post.videoLink || post.audioLink));
        
        const currentBatchSize = postsArray.length;
        hasMorePosts = currentBatchSize === PAGINATION_PAGE_SIZE;
        
        if (newPosts.length > 0) {
             const oldestPost = postsArray[postsArray.length - 1];
             if (oldestPost && oldestPost.postingTime) {
                 lastEvaluatedPost.timestamp = oldestPost.postingTime;
                 lastEvaluatedPost.key = oldestPost.postid;
             }
        }

        site8_renderPostingFeed(newPosts, append);

        if (!hasMorePosts) {
            const loadMoreButton = document.getElementById(SITE8_LOAD_MORE_ID);
            if (loadMoreButton) loadMoreButton.remove();
        }

    } catch (error) {
        if (!append) {
             site8.innerHTML = "<div class='no-posts'>An samu matsala wajen loda labarai.</div>";
        }
    } finally {
        isLoading = false;
        site8_hideLoader();
    }
}

function site8_loadMorePosts() {
    site8_fetchPosts(true);
}

site8_fetchPosts();
// üö¶‚úîÔ∏èSite 8 JS ya kare daga nan




function push1Alert(message, type = "info") {
  const alertBox = document.getElementById('push1-modern-alert');
  if (!alertBox) return;
  let icon = '<i class="fa-solid fa-circle-info icon"></i>';
  let bg = 'linear-gradient(90deg, #7d3cff 60%, #180022 120%)';
  if (type === "success") {
    icon = '<i class="fa-solid fa-circle-check icon"></i>';
    bg = 'linear-gradient(90deg, #2ecc71 60%, #180022 120%)';
  }
  if (type === "error") {
    icon = '<i class="fa-solid fa-circle-xmark icon"></i>';
    bg = 'linear-gradient(90deg, #ff4343 60%, #180022 120%)';
  }
  alertBox.innerHTML = icon + `<span>${message}</span>`;
  alertBox.style.background = bg;
  alertBox.classList.add('show');
  setTimeout(() => {
    alertBox.classList.remove('show');
  }, 3800);
}



let installPromptEvent = null;
window.addEventListener('beforeinstallprompt', function(e) {
  e.preventDefault();
  installPromptEvent = e;
  document.getElementById('install-btn').style.display = 'inline-block';
});
document.getElementById('install-btn').addEventListener('click', function installSiteShowPrompt() {
  if (installPromptEvent) {
    installPromptEvent.prompt();
    installPromptEvent.userChoice.then(res => {
      if (res.outcome === 'accepted') {
        push1Alert('An saka TauraronWasa App cikin na\'urar ka!', 'success');
      }
    });
  }
});


const bellBtn = document.getElementById('push1-bell-btn');
const pushContainer = document.getElementById('push1-container');
const pushClose = document.getElementById('push1-close-btn');
const pushAllow = document.getElementById('push1-allow-btn');
const pushDeny = document.getElementById('push1-deny-btn');


bellBtn.addEventListener('click', function push1ShowContainer() {
  pushContainer.classList.add('show');
});


pushClose.addEventListener('click', function push1HideContainer() {
  pushContainer.classList.remove('show');
});
pushDeny.addEventListener('click', function push1HideContainerDeny() {
  pushContainer.classList.remove('show');
});


if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js');
}


const applicationServerKey = 'BHKKgIF0DdjV9XXxXGI7MXQA_scnU0OxDP80OtZSlZyD02gSJY6aRYPxOS32bBP-wgjWAJr5VP4pDMYat38LGYc';

async function push1SubscribeUser() {
  if (!('serviceWorker' in navigator)) return;
  try {
    const registration = await navigator.serviceWorker.ready;
    const subscription = await registration.pushManager.subscribe({
      userVisibleOnly: true,
      applicationServerKey: urlB64ToUint8Array(applicationServerKey)
    });
   
    if (window.currentUser && window.currentUser.uid) {
      await saveSubscriptionToFirebase(window.currentUser.uid, subscription);
    } else {
    
      localStorage.setItem('tw_sub', JSON.stringify(subscription));
    }
    pushContainer.classList.remove('show');
    push1Alert('An kunna sanarwa!', 'success');
  } catch (e) {
    push1Alert('Ba a samu damar kunnawa ba: ' + e, 'error');
  }
}
pushAllow.addEventListener('click', push1SubscribeUser);


function urlB64ToUint8Array(base64String) {
  const padding = '='.repeat((4 - base64String.length % 4) % 4);
  const base64 = (base64String + padding)
    .replace(/\-/g, '+')
    .replace(/_/g, '/');
  const rawData = window.atob(base64);
  const outputArray = new Uint8Array(rawData.length);
  for (let i = 0; i < rawData.length; ++i) {
    outputArray[i] = rawData.charCodeAt(i);
  }
  return outputArray;
}


async function saveSubscriptionToFirebase(uid, subscription) {
 
  await set(ref(db, 'users/' + uid + '/subscription'), subscription);
}


//const auth = getAuth(app);
let currentUser = null;
onAuthStateChanged(auth, (user) => {
    currentUser = user;
    window.currentUser = user;
    if (user) {
        localStorage.setItem("tw_uid", user.uid);
      
        if (localStorage.getItem('tw_sub')) {
          const sub = JSON.parse(localStorage.getItem('tw_sub'));
          saveSubscriptionToFirebase(user.uid, sub);
          localStorage.removeItem('tw_sub');
        }
        document.getElementById('register-notification').classList.remove('show');
    } else {
        setTimeout(() => {
            if (!localStorage.getItem("tw_uid")) {
                document.getElementById('register-notification').classList.add('show');
            }
        }, 20000); 
    }
});

      
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js').then(function(registration) {
               
                console.log('An yi nasarar ha…óa Service Worker da scope:', registration.scope);
            }, function(err) {
               
                console.log('Kuskuren ha…óa Service Worker:', err);
            });
        });
    }
</script>
            
<script>
           const body = document.body;
const bgBtns = [
¬†¬†¬† document.getElementById("bg1-btn"),
¬†¬†¬† document.getElementById("bg2-btn"),
¬†¬†¬† document.getElementById("bg3-btn")

];

let currentBg = localStorage.getItem('tw_bg') || 'bg-1';
body.classList.add(currentBg);
bgBtns.forEach((btn, idx) => {
¬†¬†¬† btn.addEventListener('click', () => {
¬†¬†¬†¬†¬†¬†¬† body.classList.remove("bg-1", "bg-2", "bg-3");
¬†¬†¬†¬†¬†¬†¬† const bg = `bg-${idx+1}`;
¬†¬†¬†¬†¬†¬†¬† body.classList.add(bg);
¬†¬†¬†¬†¬†¬†¬† localStorage.setItem('tw_bg', bg);

¬†¬†¬† });

});

const registerNotif = document.getElementById('register-notification');
const userBtn = document.getElementById('user-btn');
userBtn.addEventListener('click', (e) => {
¬†¬†¬† e.stopPropagation(); 
¬†¬†¬† registerNotif.classList.toggle('show');

});

document.getElementById('close-register').onclick = () => registerNotif.classList.remove('show');
window.addEventListener('click', (e) => {

¬†¬†¬† if (

¬†¬†¬†¬†¬†¬†¬† registerNotif.classList.contains('show') &&
¬†¬†¬†¬†¬†¬†¬† !registerNotif.contains(e.target) &&
¬†¬†¬†¬†¬†¬†¬† e.target !== userBtn &&
¬†¬†¬†¬†¬†¬†¬† !userBtn.contains(e.target)

¬†¬†¬† ) {

¬†¬†¬†¬†¬†¬†¬† registerNotif.classList.remove('show');
¬†¬†¬† }
});


let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {

¬†¬†¬† deferredPrompt = e;¬†¬†¬† document.getElementById('install-btn').style.display = 'inline-block';
});

document.getElementById('install-btn').onclick = (e) => {
¬†¬†¬† e.preventDefault();
¬†¬†¬† if (deferredPrompt) {
¬†¬†¬†¬†¬†¬†¬† deferredPrompt.prompt();
¬†¬†¬†¬†¬†¬†¬† deferredPrompt = null;
¬†¬†¬† }

};


const profileBtn = document.getElementById('site2-profile');
if (profileBtn) profileBtn.onclick = () => window.location = 'teamsIn.html';
const teamsBtn = document.getElementById('site2-teams');
if (teamsBtn) teamsBtn.onclick = () => window.location = 'team.html';
const statusBtn = document.getElementById('site2-status');
if (statusBtn) statusBtn.onclick = () => window.location = 'statusPost.html';


document.querySelectorAll('.league-card').forEach(card => {
¬†¬†¬† card.addEventListener('click', () => {
¬†¬†¬†¬†¬†¬†¬† window.location = card.dataset.link;

¬†¬†¬† });

});


function saveAndRender(sectionKey, data, renderFn, parent) {
¬†¬†¬† localStorage.setItem(sectionKey, JSON.stringify(data));
¬†¬†
¬†¬†¬† if (renderFn && parent) {
¬†¬†¬†¬†¬†¬†¬† parent.innerHTML = "";
¬†¬†¬†¬†¬†¬†¬† if (Array.isArray(data)) {
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† data.forEach(item => parent.appendChild(renderFn(item)));
¬†¬†¬†¬†¬†¬†¬† } else if (data) {
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† parent.appendChild(renderFn(data));

¬†¬†¬†¬†¬†¬†¬† }

¬†¬†¬† }

}

function loadFromLocalStorage(sectionKey, renderFn, parent) {
¬†¬†¬† try {
¬†¬†¬†¬†¬†¬†¬† const raw = localStorage.getItem(sectionKey);
¬†¬†¬†¬†¬†¬†¬† if (raw) {
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† const data = JSON.parse(raw);
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† if (renderFn && parent) {
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† parent.innerHTML = "";
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† if (Array.isArray(data)) {
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† data.forEach(item => parent.appendChild(renderFn(item)));
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† } else if (data) {¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† parent.appendChild(renderFn(data));
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† }
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† }
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† return data;
¬†¬†¬†¬†¬†¬†¬† }
¬†¬†¬† } catch (e) {}
¬†¬†¬† return null;
}

       </script>
       
</body>
</html>